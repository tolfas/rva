!function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons-menu.html",'<ul>\n  <li class="new-app">  \n    <a href="https://apps.risevision.com/editor" target="_blank" link-cid>\n      <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image.png"></div>\n      <span>Presentations</span>\n    </a>\n  </li>\n\n  <li class="new-app">\n      <a href="https://apps.risevision.com/schedules" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/schedule-image.png"></div>\n        <span>Schedules</span>\n      </a>\n  </li>\n  \n  <li class="new-app"> \n      <a href="https://apps.risevision.com/displays" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/displays-image.png"></div>\n        <span>Displays</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://store.risevision.com/" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/store-image.png"></div>\n        <span>Store</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://apps.risevision.com/storage" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/storage-image.png"></div>\n        <span>Storage</span>\n      </a>\n  </li>\n\n   <li>\n      <a href="https://rva.risevision.com/#PRESENTATIONS" target="_blank" class="old-app" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image-gray.png"></div>\n        <span>Classic Editor</span>\n      </a>\n  </li>\n\n \n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons.html",'<li dropdown class="dropdown hidden-xs">\n  <button dropdown-toggle class="dropdown-toggle btn btn-link"><i class="fa fa-lg fa-th"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n    <ng-include \n      replace-include\n      src="\'app-nav-buttons-menu.html\'">\n    </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li class="visible-xs-inline-block" >\n  <a href="" class="company-buttons-icon-mobile"\n  action-sheet="\'app-nav-buttons-menu.html\'"\n  action-sheet-class="app-navigation">\n    <i class="fa fa-th"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons-menu.html",'<company-buttons\n  ng-show="isRiseVisionUser"\n  ng-controller="CompanyButtonsCtrl"\n></company-buttons>\n\n<ul>\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="alertSettings()" class="alert-settings-button action">\n      <i class="fa fa-bullhorn"></i>\n      <span class="item-name">Alert Settings</span>\n    </a>\n  </li>\n\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="userSettings()" class="user-settings-button action">\n      <i class="fa fa-user"></i>\n      <span class="item-name">User Settings</span>\n    </a>\n  </li>\n\n  <li ng-show="isRiseVisionUser">\n    <a href="https://store.risevision.com/account" target="_blank" link-cid>\n      <i class="fa fa-shopping-cart"></i>\n      <span class="item-name">Store Account</span>\n    </a>\n  </li>\n\n  <span ng-if="isLoggedIn && !isRiseVisionUser" class="google-account" class="username">{{username}}</span>\n\n  <li class="dropdown-footer text-right" ng-show="isLoggedIn">\n    <button class="sign-out-button btn btn-sm btn-default" ng-controller="SignOutButtonCtrl" ng-click="logout()">Sign Out<i class="fa fa-sign-out icon-right"></i>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons.html",'<!-- Desktop and tablet -->\n<li\n  ng-show="isLoggedIn && !isRiseVisionUser && !loading">\n  <button type="button" ng-controller="RegisterButtonCtrl" ng-click="register()"\n    class="btn btn-danger register-user-menu-button">\n    Complete Registration\n  </button>\n</li>\n<li\n  dropdown\n  class="dropdown user-profile-dropdown desktop-menu-item"\n  ng-class="{\'hidden-xs\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="dropdown-toggle">\n      <div class="user-id pull-left">\n        <span ng-class="{\'pending-registration\' : isLoggedIn && !isRiseVisionUser && !loading}" class="username">{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n    <div class="dropdown-menu" role="menu">\n      <ng-include\n        src="\'auth-buttons-menu.html\'"\n        replace-include\n      ></ng-include>\n    </div>\n</li>\n<!-- Mobile -->\n<li\n  dropdown\n  class="dropdown user-profile-dropdown mobile-menu-item"\n  ng-class="{\'visible-xs-inline-block\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="visible-xs dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'"\n      action-sheet-class="user-profile-dropdown">\n      <div class="user-id">\n        <span>{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n    </a>\n</li>\n<!-- If User NOT Authenticated -->\n<li ng-show="!undetermined && isLoggedIn === false" ng-controller="SignUpButtonCtrl">\n  <button type="button" ng-click="openSignUpModal()"\n  class="btn-primary btn u_margin-right">\n   Sign Up Free</button>\n</li>\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="sign-in top-auth-button" ng-click="login(\'registrationComplete\')">\n    Sign In\n  </button>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("authorization-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n  \t\t<i class="fa fa-times"></i>\n  \t</button>\n</div>\n<div class="modal-body authorization-modal"\n  stop-event="touchend"\n  rv-spinner="spinnerOptions"\n  rv-spinner-key="authenticate-button"\n  rv-spinner-start-active="0"\n>\n  <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg" class="profile-img">\n  <p>Please authorize your Google Account to register with Rise Vision.</p>\n\n  <button type="button" class="btn btn-success btn-fixed-width btn-block authorize-button" ng-click="authenticate(true)">\n    Authorize <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("close-frame-button.html",'<li class="close-frame">\n  <a href="" class="close-frame-button" ng-click="closeIFrame()">\n    <i class="fa fa-times"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("common-header.html",'<!-- Common Header Navbar -->\n<nav class="navbar navbar-default navbar-static-top hidden-print"\n\tng-class="{\'active-banner\': isSubcompanySelected() || isTestCompanySelected()}" role="navigation">\n\t<div class="container">\n\t\t<div class="navbar-header" style="width: 100%;">\n\t\t\t<a class="navbar-brand visible-md visible-lg"\n\t\t\t  href="http://www.risevision.com/" target="{{newTabHome ? \'_blank\' : \'_self\'}}" ng-if="!inRVAFrame">\n\t\t\t\t<img src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n\t\t\t</a>\n\t\t\t<a class="navbar-brand hidden-md hidden-lg text-center"\n\t\t\t\thref="" off-canvas-toggle>\n\t\t\t\t<i class="fa fa-bars"></i>\n\t\t\t</a>\n\t\t\t<!-- If User Authenticated -->\n\t\t\t<!-- Action Nav -->\n\t\t\t<ul class="nav navbar-nav navbar-right actions-nav pull-right">\n\t\t\t\t<!-- Help Dropdown -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-controller="HelpDropdownButtonCtrl"\n\t\t\t\t\tsrc="\'help-dropdown.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- END Help Dropdown -->\n\t\t\t\t<!-- Notifications -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t  ng-controller="SystemMessagesButtonCtrl"\n\t\t\t\t\tsrc="\'system-messages-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Shopping Cart -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-controller="ShoppingCartButtonCtrl"\n\t\t\t\t\tsrc="\'shoppingcart-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Shopping Cart -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="inRVAFrame"\n\t\t\t\t\tng-controller="CloseFrameButtonCtrl"\n\t\t\t\t\tsrc="\'close-frame-button.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- Current App -->\n\t\t\t\t<ng-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t\treplace-include\n\t\t\t\t\tsrc="\'app-nav-buttons.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<!-- END Current App -->\n\t\t\t\t<!-- Auth -->\n\t\t\t\t<ng-include\n\t\t\t\t\treplace-include\n\t\t\t\t\tng-if="!inRVAFrame"\n\t\t\t\t  ng-controller="AuthButtonsCtr"\n\t\t\t\t\tsrc="\'auth-buttons.html\'"\n\t\t\t\t></ng-include>\n\t\t\t\t<li ng-if="inRVAFrame"\n\t\t\t\t  ng-controller="AuthButtonsCtr"></li>\n\t\t\t</ul>\n\t\t\t<!-- END Action Nav -->\n\n\t\t\t<!-- Nav Links -->\n\t\t\t<div class="navbar-collapse navbar-left hidden-xs hidden-sm">\n\t\t\t\t<ul class="nav navbar-nav">\n\t\t\t\t\t<li ng-repeat="opt in navOptions">\n\t\t\t\t\t\t<a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n\t\t\t\t\t\t<a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li ng-if="!inRVAFrame && !hideHelpMenu">\n\t\t\t\t\t\t<a href="http://www.risevision.com/help/" target="_blank">\n\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<!-- END Nav Links -->\n\t\t</div>\n\n\t\t<ng-include\n\t\treplace-include\n\t\tng-controller="TestCompanyBannerCtrl"\n\t\tsrc="\'test-company-banner.html\'"></ng-include>\n\t\t\n\t\t<ng-include\n\t\treplace-include\n\t\tng-controller="SubcompanyBannerCtrl"\n\t\tsrc="\'subcompany-banner.html\'"></ng-include>\n\t</div>\n</nav>\n\n<div ng-show="cookieEnabled === false" class="bg-warning text-center u_padding-sm">\n    <small><strong>Cookies Are Disabled.</strong> Rise Vision needs to use cookies to properly function. Please enable Cookies and Third-Party Cookies on your web browser and refresh this page.</small>\n</div>\n\n<ng-include\n\treplace-include\n\tng-controller="GlobalAlertsCtrl"\n\tsrc="\'global-alerts.html\'"></ng-include>\n\n<!-- END Common Header Navbar -->\n\n<!-- Off Canvas Version of the Nav -->\n<nav class="off-canvas-nav" off-canvas-nav>\n  <ul class="nav nav-pills nav-stacked">\n  \t<li off-canvas-toggle>\n  \t\t<i class="fa fa-times fa-2x pull-right"></i>\n  \t\t<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n  \t</li>\n    <li ng-repeat="opt in navOptions">\n\t\t\t<a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid target="{{opt.target}}">{{opt.title}}</a>\n\t\t\t<a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n\t\t</li>\n\t\t<li ng-if="!hideHelpMenu">\n\t\t\t<a target="_blank" href="http://www.risevision.com/help">Help</a>\n\t\t</li>\n  </ul>\n</nav>\n<iframe name="logoutFrame" id="logoutFrame" style=\'display:none\'></iframe>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons-menu.html",'<ul>\n  <li class="dropdown-header" ng-show="!isSubcompanySelected">\n    <p>{{username}}</p>\n    <p><strong>{{selectedCompanyName}}</strong>\n      <span class="text-muted" ng-show="isRiseVisionUser && !isSubcompanySelected">|</span>\n      <a id="select-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser && !isSubcompanySelected">Select Sub-Company</a>\n    </p>\n  </li>\n\n  <li class="dropdown-header sub-company-header" ng-show="isSubcompanySelected">\n    <p>You are in Sub-Company <strong>{{selectedCompanyName}}</strong>\n    <span class="text-muted">|</span>\n     <a id="change-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser">Change</a></p>\n    <p><a id="reset-subcompany-button" href="" ng-click="resetCompany()">Switch to My Company</a></p>\n  </li>\n\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button">\n      <i class="fa fa-plus"></i>\n      <span class="item-name">Add Sub-Company</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="companySettings()" class="action company-settings-menu-button">\n      <i class="fa fa-building"></i>\n      <span class="item-name">Company Settings</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button">\n      <i class="fa fa-users"></i>\n      <span class="item-name">Company Users</span>\n    </a>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}">\n  <label for="company-settings-name">\n    Name *\n  </label>\n  <input required id="company-settings-name" type="text" class="form-control"\n    ng-model="company.name" name="name" />\n  <p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine"\n    class="help-block validation-error-message-name">Company name is required.</p>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-street" class="control-label">\n        Street\n      </label>\n      <input id="company-settings-street" type="text" class="form-control" ng-model="company.street" />\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-unit" class="control-label">\n        Unit\n      </label>\n      <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit" />\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-3">      \n    <div class="form-group">\n      <label for="company-settings-city" class="control-label">\n        City\n      </label>\n      <input id="company-settings-city" type="text" class="form-control" ng-model="company.city" />\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-country" class="control-label">\n        Country\n      </label>\n      <select id="company-settings-country" class="form-control selectpicker"\n        ng-model="company.country" ng-options="c.code as c.name for c in countries" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Country &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-state" class="control-label">\n        State/Province/Region\n      </label>\n      <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'" />\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Province &gt;</option>\n      </select>\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select State &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-zip" class="control-label">\n        ZIP/Postal Code\n      </label>\n      <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode" />\n    </div>\n  </div>\n</div>\n<div class="form-group">\n  <label for="company-settings-phone" class="control-label">\n    Phone\n  </label>\n  <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"/>\n</div>\n<div class="form-group">\n  <label for="company-settings-timezone" class="control-label">Time Zone</label>\n  <select class="form-control" ng-model="company.timeZoneOffset" integer-parser>\n    <option ng-show="false" value="">&lt; Select Time Zone &gt;</option>\n    <option value="{{c[1]}}" ng-repeat="c in timezones">{{c[0]}}</option>\n  </select>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-selector-modal.html",'\n<form role="form">\n\t<div class="modal-header">\n\t\t<button type="button" class="close" data-dismiss="modal"\n\t\t  aria-hidden="true" ng-click="closeModal()">\n\t\t\t<i class="fa fa-times"></i>\n\t\t</button>\n\t\t<h2 id="switch-company" class="modal-title">\n\t\t\tSelect Sub-Company\n\t\t</h2>\n\t</div>\n\t<div class="modal-body select-subcompany-modal" stop-event="touchend">\n\t  <!-- Search -->\n\t\t<search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n\t\t<!-- List of Companies -->\n\t\t<div class="panel panel-default scrollable-list u_margin-sm-top"\n\t\t  scrolling-list="loadCompanies()"\n\t\t  rv-spinner rv-spinner-key="company-selector-modal-list"\n\t\t\trv-spinner-start-active="1"\n\t\t>\n\t\t\t<div class="list-group-item"  ng-repeat="company in companies.list" ng-click="setCompany(company)">\n\t\t\t\t<p class="list-group-item-text"><strong>{{company.name}}</strong><br/><small class="text-muted">{{company | fullAddress}}</small>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="modal-footer">\n\t\t<button type="button" class="btn btn-default btn-fixed-width" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel\n\t\t\t<i class="fa fa-white fa-times icon-right"></i>\n\t\t</button>\n\t</div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-settings-modal.html",'<div rv-spinner\n  rv-spinner-key="company-settings-modal"\n  rv-spinner-start-active="1">\n\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-settings-label" class="modal-title">Company Settings</h2>\n</div>\n<div class="modal-body company-settings-modal" stop-event="touchend">\n  <form id="companyForm" role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <label>\n        Authentication Key\n      </label>\n      <a class="action-link ps-reset-auth-key" href="" ng-click="resetAuthKey()">Reset</a>\n      <div class="ps-auth-key">\n        {{company.authKey}}\n      </div>\n    </div>\n    <div class="form-group">\n      <label>\n        Claim ID\n      </label>\n      <a class="action-link ps-reset-claim-id" href="" ng-click="resetClaimId()">Reset</a>\n      <div class="ps-claim-id">\n        {{company.claimId}}\n      </div>\n    </div>\n    <div class="form-group" ng-hide="true">\n      <label>\n        Sub-Company Home Page Presentation\n      </label>\n      <a class="action-link" href="" ng-click="showSelector()">Select</a>\n      <a class="action-link" href="">Default</a>\n      <div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div>\n      <div class="presentation-selector" ng-show="isSelectorVisible">\n        <div class="panel panel-default">\n          <ul class="list-unstyled selector-header">\n            <li ng-class="{active : selected == \'list\'}">\n              <a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a>\n            </li>\n            <li ng-class="{active : selected == \'search\'}">\n              <a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a>\n            </li>\n            <li class="close-button">\n              <button type="button" class="close" aria-hidden="true" ng-click="closeSelector()">\n                <i class="fa fa-times"></i>\n              </button>\n            </li>\n          </ul>\n          <div class="panel-body">\n            <div class="presentation-list" ng-show="selected == \'list\'">\n              <div class="input-group search">\n                <input type="text" class="form-control" placeholder="Search Presentations">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-search fa-white"></i>\n                  </button>\n                </span>\n              </div>\n              <div class="list-group scrollable-list">\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">\n                  Demo Presentation\n                </a>\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">\n                  My First Presentation\n                </a>\n              </div>\n            </div>\n            <div class="presentation-search" ng-show="selected == \'search\'">\n              <form role="form">\n                <div class="form-group">\n                  <input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID" />\n                </div>\n                <div class="form-group">\n                  <a href="" ng-click="setPresentation($event)">Retrieve Presentation</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-community-url">\n          Sub-Company Community URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-community-url" type="url" class="form-control" />\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-support-url">\n          Sub-Company Support URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-support-url" type="url" class="form-control" />\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isSeller" />\n          Registered Seller\n        </label>\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isTest" />\n          Test Company\n        </label>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-status">\n          Status\n        </label>\n        <select id="company-settings-status" class="form-control selectpicker">\n          <option value="active">Active</option>\n          <option value="inactive">Inactive</option>\n        </select>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <p class="visible-xs text-right"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></p>\n    <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n      ng-show="!isDeletingCompany" ng-click="deleteCompany()">\n      Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">\n      Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n    </button>\n    <div class="pull-right">\n      <span class="hidden-xs"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></span>\n      <button type="button" id="save-button"\n        class="btn btn-primary btn-fixed-width" ng-click="save()"\n        ng-disabled="forms.companyForm.$invalid">Save\n        <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" id="close-button"\n        class="btn btn-default btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Cancel\n        <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n</div> <!--spinner -->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-users-modal.html",'<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal"\n    aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-users-label" class="modal-title">Company Users</h2>\n</div>\n<div class="modal-body company-users-modal" stop-event="touchend">\n  <!-- Search -->\n  <search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n  <!-- List of Users -->\n  <div class="panel panel-default scrollable-list company-users-list u_margin-sm-top"\n    rv-spinner\n    rv-spinner-key="company-users-list"\n    rv-spinner-start-active="1">\n    <div class="list-group-item  company-users-list-item"\n      ng-repeat="user in users | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)">\n      <p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-success add-company-user-button"\n    ng-click="addUser()">Add User\n    <i class="fa fa-white fa-plus icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default close-company-users-button"\n    data-dismiss="modal" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("global-alerts.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="alert alert-danger" role="alert" ng-repeat="msg in errors">\n        <span ng-bind-html="msg"></span>\n        <button type="button" class="close pull-right"\n          ng-click="dismiss(\'errors\', $index);">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown-menu.html",'\n<ul>\n    <li><a id="askCommunityButton" href="https://community.risevision.com/rise_vision_inc" target="_blank">Ask the Community</a></li>\n    <li>\n      <a ng-if="isLoggedIn === false" ng-controller="SignUpButtonCtrl" id="prioritySupportButton" href="" ng-click="openSignUpModal()">Priority Support <span class="text-green">Fastest</span></a>\n      <a ng-if="isLoggedIn === true" id="prioritySupportButton" href="" ng-click="openPrioritySupport()">Priority Support <span class="text-green">Fastest</span></a>\n  </li>\n    <li><a id="sendUsANoteButton" href="" ng-click="openSendUsANote()">Send Us a Note</a></li>\n    <li><a id="signUpForWebinarsButton" href="https://www.risevision.com/webinars" target="_blank">Free Webinars</a></li>\n    <li><a id="documentationButton" href="https://help.risevision.com/user" target="_blank">User Documentation</a></li>\n    <li><a id="signUpForTrainingButton" href="https://store.risevision.com/product/30/rise-training" target="_blank">Rise Training</a></li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown.html",'<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" dropdown class="dropdown hidden-xs">\n  <button id="helpDropdownButton" dropdown-toggle class="dropdown-toggle btn btn-primary"><span class="hidden-sm hidden-xs hidden-md">Need Help</span><i class="fa fa-question u_icon-white"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n      <ng-include\n              replace-include\n              src="\'help-dropdown-menu.html\'">\n      </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" class="visible-xs-inline-block" >\n    <button class="dropdown-toggle btn btn-primary"\n       action-sheet="\'help-dropdown-menu.html\'"\n       action-sheet-class="app-navigation">\n        <i class="fa fa-question u_icon-white"></i>\n    </button>\n</li>\n\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-priority-support-modal.html",'<div id="prioritySupportModal">\n    <div class="modal-header">\n        <button id="prioritySupportModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title">Priority Support</h2>\n    </div>\n    <div class="modal-body" stop-event="touchend">\n\n        <div class="u_margin-lg-bottom blank-state">\n            <div class="product-graphic" ng-show="[\'trial-available\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n                <img itemprop="image" class="img-responsive" src="https://s3.amazonaws.com/Store-Products/Rise-Vision/support_image.png">\n            </div>\n\n            <div ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0">\n\n                <p class="lead">\n                <strong>Need help fast?</strong>\n                Check out Priority Support and have a response in <strong>10 minutes</strong>. We are online 8-5 CST Monday through Friday.\n                </p>\n\n                <div ng-show="subscriptionStatus.statusCode === \'on-trial\'" class="subscription-status trial">\n                    <span  ng-bind-html="\'subscription-status.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n                    <a class="btn btn-primary u_margin-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'trial-expired\'" class="subscription-status expired">\n                    <span translate="subscription-status.expanded-expired"></span>\n                    <a class="btn btn-primary u_margin-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'cancelled\'" class="subscription-status cancelled">\n                    <span translate="subscription-status.expanded-cancelled"></span>\n                    <a class="btn btn-primary u_margin-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'suspended\'" class="subscription-status suspended">\n                    <span translate="subscription-status.expanded-suspended"></span>\n                    <a class="btn btn-primary u_margin-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n            </div><!--content-box-body-->\n\n            <div class="content-box-body" ng-show="[\'trial-available\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n                <div class="product-intro">\n                    <h1>Priority Support</h1>\n                    <p class="lead">Get the help you need in 10 minutes or less, 8-5 CST Monday through Friday, or let us remotely connect, diagnose and correct display problems all without the need for you to intervene!</p>\n                    <p class="lead">$75 per Company per Month.</p>\n                    <button ng-show="subscriptionStatus.statusCode === \'trial-available\'" type="button" class="btn btn-hg btn-primary" ng-click="startTrial()">Start Your Free Trial</button>\n                    <a ng-show="[\'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-hg btn-primary" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n            </div>\n        </div><!--blank-state-->\n    </div>\n</div>');
}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-send-us-a-note-modal.html",'<div id="sendUsANoteModal">\n    <div class="modal-header">\n        <button id="sendUsANoteModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title"></h2>\n    </div>\n    <div class="modal-body text-center" stop-event="touchend">\n        <p class="lead"><strong>Something else in mind?</strong> Send us a note and we will typically get back to you next business day.</p>\n        <button class="btn btn-primary btn-lg" ng-click="sendUsANote()">\n            Send Us a Note\n        </button>\n\n        <div class="content-box u_margin-md-top u_remove-bottom">\n          <div class="content-box-body">\n            <p class="lead u_margin-left u_margin-right">\n                <strong>Need help fast?</strong>\n                Check out Priority Support and have a response in <strong>10 minutes</strong>. We are online 8-5 CST Monday through Friday.\n            </p>\n            <button ng-if="subscriptionStatus.statusCode === \'trial-available\'" class="btn btn-primary btn-lg" ng-click="startTrial()">\n                Start Your Free Trial\n            </button>\n\n            <a ng-if="!subscriptionStatus.statusCode || [\'not-subscribed\', \'trial-expired\', \'cancelled\', \'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-primary btn-lg" href="{{supportProductUrl}}" ng-click="dismiss();" target="_blank">\n                Subscribe Now\n            </a>\n            <button ng-if="[\'on-trial\', \'subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-primary btn-lg" ng-click="prioritySupport()">\n                Use Priority Support\n            </button>\n      </div><!--content-box-body-->\n    </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("move-company-modal.html",'<div rv-spinner\n  rv-spinner-key="move-company-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="move-company-label" class="modal-title">Move Company</h2>\n</div>\n<div class="modal-body move-company-modal" stop-event="touchend">\n  <form role="form">\n    <div class="form-group">\n      <label for="auth-key">\n        Enter the Authentication Key of the Company that you want to move.\n      </label>\n      <div class="row">\n        <div class="col-sm-6">\n          <input id="auth-key" type="text" class="form-control"\n          ng-model="company.authKey" />\n        </div>\n        <div class="col-sm-6">\n          <a href="" class="btn btn-secondary retrieve-company-details-button"\n          ng-disabled="!company.authKey"\n          ng-click="getCompany()">Retrieve Company Details</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div ng-show="company.name" class="company-details-info">\n    <h3>Details of the Company You Want to Move</h3>\n    <div>\n      {{company.name}}<br>\n      {{company.address}}\n      {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}\n    </div>\n    <h3>Details of the Company You Are Moving the Above Company Under</h3>\n    <div class="to-company">\n      {{selectedCompany.name}}<br>\n      {{selectedCompany.address}}<br>\n      {{selectedCompany.city}}, {{selectedCompany.province}},\n      {{selectedCompany.country}} {{selectedCompany.postalCode}}\n    </div>\n  </div>\n  <div ng-show="errors.length > 0">\n    <div class="alert alert-danger" ng-repeat="error in errors">\n      {{error}}\n    </div>\n  </div>\n  <div ng-show="messages.length > 0">\n    <div class="alert alert-success" ng-repeat="message in messages">\n      {{message}}\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success move-company-button"\n    ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width close-move-company-button" data-dismiss="modal" ng-click="closeModal()">\n    {{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("registration-modal.html",'<div rv-spinner\nrv-spinner-key="registration-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close registration-cancel-button" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 class="modal-title">Let\'s finish with your details</h2>\n</div>\n<div class="modal-body registration-modal" stop-event="touchend">\n  \n  <div class="row">\n    <div class="col-sm-8">\n\n      <form id="registrationForm" novalidate role="form" name="forms.registrationForm">\n        <!-- First Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine }">\n          <label for="firstName">First Name</label>\n          <input type="text" class="form-control firstName"\n          name="firstName"\n          id="firstName" required\n          ng-model="profile.firstName">\n          <p ng-show="forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine"\n            class="help-block validation-error-message-first-name">Enter First Name.</p>\n        </div>\n        <!-- Last Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine }">\n          <label for="lastName">Last Name</label>\n          <input type="text" class="form-control lastName"\n          name="lastName"\n          id="lastName" required\n          ng-model="profile.lastName">\n          <p ng-show="forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine"\n            class="help-block validation-error-message-last-name">Enter Last Name.</p>\n        </div>\n        <!-- Email -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine }">\n          <label for="email">Email <span>(We\'ll only send you system notices and other critical information)</span></label>\n          <input type="email" class="form-control email"\n          name="email"\n          id="email" required\n          ng-model="profile.email">\n          <p ng-show="forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine"\n            class="help-block validation-error-message-email">Enter a valid email.</p>\n        </div>\n        <!-- Terms of Service and Privacy -->\n        <div class="checkbox form-group" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }">\n          <label>\n          <input type="checkbox" name="accepted"\n            ng-model="profile.accepted"\n            class="accept-terms-checkbox" required />\n          I accept the terms of <a href="http://www.risevision.com/terms-service-privacy/" target="_blank">Service and Privacy</a>\n          <p ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine"\n            class="help-block validation-error-message-accepted">You must accept terms and condtions.</p>\n          </label>\n        </div>\n        <!-- Newsletter -->\n        <div class="checkbox form-group">\n          <label>\n            <input type="checkbox" class="sign-up-newsletter-checkbox" ng-model="profile.mailSyncEnabled"> Sign up for our newsletter\n          </label>\n        </div>\n        <div class="u_margin-md-top">\n          <button ng-click="save()"\n            name="create-account"\n            type="button"\n            class="btn btn-lg btn-success btn-block registration-save-button"\n            ng-disabled="registering">\n            Create Account <i class="fa fa-white fa-check icon-right"></i>\n          </button>\n          <button type="button" class="btn hidden btn-lg btn-link btn-fixed-width"\n          ng-disabled="registering"\n          ng-click="closeModal()">\n            Cancel\n          </button>\n        </div>\n      </form>\n\n    </div>\n    <div class="col-sm-4">\n      <div class="signup-counters">\n        <div class="counter">\n          <p>129</p>\n          <span>New Companies Added Yesterday</span>\n        </div>\n        <div class="counter">\n          <p>72,990</p>\n          <span>Total Companies</span>\n        </div>\n        <div class="counter">\n          <p>120</p>\n          <span>Countries with Active Displays</span>\n        </div>\n      </div>\n    </div>\n  </div>  \n\n  \n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("safe-delete-modal.html",'<form id="safeDeleteForm">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true">\n      <i class="fa fa-times"></i>\n    </button>\n    <h3 class="modal-title" translate>common.safeDelete.title</h3>\n  </div>\n  <div class="modal-body" stop-event="touchend">\n    <p translate>common.safeDelete.message</p>\n    <input id="safeDeleteInput" type="text" ng-model="inputText" class="form-control" />\n  </div>\n  <div class="modal-footer">\n    <button id="deleteForeverButton" class="btn btn-primary" ng-click="confirm()" ng-disabled="!canConfirm">\n      <span translate>common.delete-forever</span> <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button class="btn btn-default btn-fixed-width" ng-click="cancel()">\n      <span translate>common.cancel</span> <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("shoppingcart-button.html",'<li class="shopping-cart" ng-show="!hideShoppingCart && isRiseVisionUser">\n<a href="{{shoppingCartUrl}}" class="shopping-cart-button">\n  <i class="fa fa-shopping-cart"></i>\n  <span id="cartBadge" class="label label-primary" ng-show="cart.items.length">\n    {{cart.items.length | surpressZero}}</span>\n</a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signout-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sign-out-label" class="modal-title">Sign Out</h2>\n</div>\n<div class="modal-body sign-out-modal" stop-event="touchend">\n  <form role="form">\n    <p>\n      Signing out does not sign you out of your Google Account.\n    </p>\n    <p>\n      If you are on a shared computer you should sign out of your Google Account.\n    </p>\n    <p>\n      <button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out\n        <i class="fa fa-sign-out fa-lg icon-right"></i>\n      </button>\n    </p>\n      <button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account\n        <i class="fa fa-google-plus-square fa-lg icon-right"></i>\n      </button>\n    <p>\n    </p>\n  </form>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signup-modal.html",'<div class="modal-body text-center" stop-event="touchend">\n  <div class="signup-modal">\n    <div class="logo u_margin-lg-bottom hidden">\n      <img style="width:120px" src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" alt="Rise Vision">\n    </div>\n    <h1 class="modal-title u_margin-md-top u_remove-bottom">New to Rise Vision?</h1>\n    <p class="text-muted">CREATE A FREE ACCOUNT</p>\n\n    <a class="u_margin-md-top btn btn-hg btn-google-auth" id="google-registration-button" ng-click="login(\'registrationComplete\')"><strong>Sign Up with Google</strong> <i class="fa fa-google fa-lg icon-right"></i></a>\n    <p class="text-muted u_remove-bottom u_margin-sm-top"><a href="https://accounts.google.com/signup" target="_blank">I don\'t have a Google Account</a></p>\n    <p class="text-muted hidden">Already a Rise Vision User? <a ng-click="$event.preventDefault(); login(\'registrationComplete\');" ng-href="#">Sign In</a></p>\n\n    <div class="signup-offer">\n      <p>Get <strong>Unlimited Access To All Features</strong> Including Our Most Popular Widgets</p>\n      <ul class="list-unstyled widgets-offer">\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/web.png"><span>Web <br>Page</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/spreadsheet.png"><span>Google Spreadsheet</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/calendar.png"><span>Google Calendar</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/rss.png"><span>RSS <br>Feed</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/news.png"><span>News <br>Headlines</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/video.png"><span>Video <br>Folder</span></li>\n      </ul>\n    </div>\n  </div><!--signup-modal-->  \n</div><!--modal-body-->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame"\n  class="common-header-alert sub-company-alert">\n  You\'re in Sub-Company {{selectedCompanyName}}&nbsp;\n  <a href="" ng-click="switchToMyCompany()" class="link-button">Switch to My Company</a>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-modal.html",'<div rv-spinner\n  rv-spinner-key="add-subcompany-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2>\n</div>\n<div class="modal-body add-subcompany-modal" stop-event="touchend">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button"\n        ng-click="moveCompany()">Move a Company Under Your Company</a>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success btn-fixed-width add-subcompany-save-button"\n    ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel\n    <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button-menu.html",'<ul>\n  <li class="dropdown-header dropdown-title system-message">\n    Notifications\n  </li>\n  <li class="divider"></li>\n  <li class="system-message"\n    ng-repeat="message in messages"\n    ng-bind-html="renderHtml(message.text)">\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button.html",'<!-- Desktop and tablet -->\n<li dropdown class="dropdown system-messages hidden-xs"\nng-show="isRiseVisionUser && messages.length > 0">\n  <a href="" dropdown-toggle class="dropdown-toggle system-messages-button">\n    <i class="fa fa-bell"></i>\n    <span class="label label-danger system-messages-badge">{{messages.length | surpressZero}}</span>\n  </a>\n  <div class="dropdown-menu system-messages system-message-list" role="menu">\n    <ng-include\n      src="\'system-messages-button-menu.html\'"\n    ></ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li\n  class="system-messages"\n  ng-show="isRiseVisionUser  && messages.length > 0"\n  ng-class="{\'visible-xs-inline-block\': isRiseVisionUser && messages.length > 0}">\n    <a href=""\n      class="system-messages-button"\n      action-sheet="\'system-messages-button-menu.html\'"\n      action-sheet-class="system-message-list">\n        <i class="fa fa-bell"></i>\n        <span class="label label-danger system-messages-badge">{{messages.length}}</span>\n    </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("test-company-banner.html",'<div ng-show="isTestCompanySelected"\n  class="sub-company-alert test-company-alert">\n  This is a Test Company\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions"\nrv-spinner-key="user-settings-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">\n  <span ng-if="!isAdd">User Settings</span>\n  <span ng-if="isAdd">Add User</span>\n  </h2>\n</div>\n<div class="modal-body user-settings-modal" stop-event="touchend">\n  <form id="userSettingsForm" role="form" novalidate name="forms.userSettingsForm">\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine }"\n    >\n      <label>\n        Username *\n      </label>\n      <div ng-if="!isAdd">{{user.username}}</div>\n      <input id="user-settings-username"\n        type="email" required name="username"\n        class="form-control"\n        ng-if="isAdd"\n        ng-model="user.username"\n        />\n        <p ng-show="forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine"\n          class="help-block validation-error-message-email">User name must be a valid email address.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine }">\n      <label for="user-settings-first-name">\n        First Name *\n      </label>\n      <input id="user-settings-first-name"\n        type="text" required name="firstName"\n        class="form-control"\n        ng-model="user.firstName"\n        />\n        <p ng-show="forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine"\n          class="help-block validation-error-message-firstName">First Name is required.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine }">\n      <label for="user-settings-last-name">\n        Last Name *\n      </label>\n      <input id="user-settings-last-name"\n        type="text" required name="lastName"\n        class="form-control"\n        ng-model="user.lastName"\n        />\n        <p ng-show="forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine"\n          class="help-block validation-error-message-lastName">Last Name is required.</p>\n    </div>\n    <div class="form-group">\n      <label for="user-settings-phone">\n        Phone\n      </label>\n      <input\n        id="user-settings-phone"\n        type="tel"\n        name="phone"\n        class="form-control"\n        ng-model="user.telephone"\n         />\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine }">\n      <label for="user-settings-email">\n        Email *\n      </label>\n      <input\n        id="user-settings-email"\n        type="email" required name="email"\n        class="form-control"\n        ng-model="user.email"\n        />\n        <p ng-show="forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine"\n          class="help-block validation-error-message-email">A valid email address is required.</p>\n    </div>\n    <div class="form-group">\n      <label>\n        Roles\n      </label>\n      <div class="checkbox" ng-repeat="role in availableRoles"\n        ng-show="editRoleVisible(role)">\n        <label>\n          <input type="checkbox"\n            id="user-settings-{{role.key}}"\n            checklist-model="user.roles"\n            ng-disabled="!editRoleAllowed(role)"\n            checklist-value="role.key"> {{role.name}}\n        </label>\n      </div>\n    </div>\n    <div class="form-group" ng-if="user.lastLogin">\n      <label>\n        Last Login\n      </label>\n      <div>{{user.lastLogin | date:\'d-MMM-yyyy h:mm a\'}}</div>\n    </div>\n    <div class="form-group" ng-if="!editingYourself && !isAdd">\n      <label for="user-settings-status">\n        Status\n      </label>\n      <select id="user-settings-status"\n        class="form-control selectpicker" ng-model="user.status" integer-parser>\n        <option value="1">Active</option>\n        <option value="0">Inactive</option>\n      </select>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <p class="text-right"><last-modified change-date="user.changeDate" changed-by="user.changedBy"></last-modified></p>\n  <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n    ng-if="!isAdd" ng-click="deleteUser()">\n    Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n  </button>\n  <div class="pull-right">\n    <button type="button"\n      class="btn btn-primary btn-fixed-width"\n      data-dismiss="modal"\n      ng-click="save()" id="save-button">\n      Save <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width" ng-click="closeModal()">\n      Cancel <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</div>\n')}])}(),angular.module("risevision.common.header",["ui.router","risevision.common.account","risevision.common.gapi","risevision.common.config","risevision.core.cache","risevision.core.company","risevision.common.cookie","risevision.common.header.templates","risevision.common.header.directives","risevision.common.loading","risevision.ui-flow","risevision.common.systemmessages","risevision.core.systemmessages","risevision.core.countries","risevision.core.oauth2","risevision.common.geodata","risevision.store.data-gadgets","risevision.core.userprofile","risevision.common.registration","risevision.common.shoppingcart","checklist-model","ui.bootstrap","ngSanitize","ngCsv","ngTouch","risevision.common.components.userstate","risevision.common.components.last-modified","risevision.common.components.search-filter","risevision.common.components.scrolling-list","risevision.common.components.stop-event","risevision.common.components.analytics","risevision.common.svg","risevision.common.support"]).factory("bindToScopeWithWatch",[function(){return function(e,n,t){t.$watch(function(){return e.call()},function(e){t[n]=e})}}]).directive("commonHeader",["$modal","$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch","$document","cookieTester",function(e,n,t,a,o,s,i,r,l,c,u,d,p){return{restrict:"E",template:r.get("common-header.html"),scope:!1,link:function(e,t,a){p.checkCookies().then(function(){e.cookieEnabled=!0},function(){e.cookieEnabled=!1}),e.navCollapsed=!0,e.inRVAFrame=l.inRVAFrame(),e.isSubcompanySelected=l.isSubcompanySelected,e.isTestCompanySelected=l.isTestCompanySelected,e[a.navOptions]||(e.navOptions=[{title:"Home",link:"#/"},{title:"Store",link:""},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),e.hideShoppingCart="0"!==a.hideShoppingCart&&"false"!==a.hideShoppingCart,e.hideHelpMenu="0"!==a.hideHelpMenu&&"false"!==a.hideHelpMenu,n.redirectToRoot="0"!==a.redirectToRoot&&"false"!==a.redirectToRoot,n.newTabHome="0"!==a.newTabHome&&"false"!==a.newTabHome,u(l.isRiseVisionUser,"isRiseVisionUser",e),n.$on("$stateChangeSuccess",function(){e.inRVAFrame&&c.search("inRVA",e.inRVAFrame)});var o=d[0].createElement("meta");o.id="viewport",o.name="viewport",o.content="width=device-width, initial-scale=1, user-scalable=no",d[0].getElementsByTagName("head")[0].appendChild(o)}}}]).run(["segmentAnalytics","SEGMENT_API_KEY","ENABLE_INTERCOM_MESSAGING","analyticsEvents","$document",function(e,n,t,a,o){a.initialize(),e.load(n,t),o.on("keydown",function(e){var n=!1;if(8===e.keyCode){var t=e.srcElement||e.target;n=("INPUT"!==t.tagName.toUpperCase()||"TEXT"!==t.type.toUpperCase()&&"PASSWORD"!==t.type.toUpperCase()&&"FILE"!==t.type.toUpperCase()&&"SEARCH"!==t.type.toUpperCase()&&"EMAIL"!==t.type.toUpperCase()&&"NUMBER"!==t.type.toUpperCase()&&"DATE"!==t.type.toUpperCase())&&"TEXTAREA"!==t.tagName.toUpperCase()||(t.readOnly||t.disabled)}n&&e.preventDefault()})}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}),angular.module("risevision.common.header.directives",[]),angular.module("risevision.common.header.directives").directive("integerParser",[function(){return{require:"ngModel",link:function(e,n,t,a){a.$parsers.push(function(e){return parseInt(e,10)||0}),a.$formatters.push(function(e){return"undefined"==typeof e?"":""+e})}}}]),angular.module("risevision.common.header.directives").directive("emptySelectParser",[function(){return{require:"ngModel",link:function(e,n,t,a){a.$parsers.unshift(function(e){return null===e?"":e})}}}]),angular.module("risevision.common.header.directives").directive("companyButtons",["$templateCache",function(e){return{restrict:"E",scope:!1,replace:!0,template:e.get("company-buttons-menu.html"),link:function(){}}}]),angular.module("risevision.common.header.directives").directive("requireRole",["userState",function(e){return{restrict:"A",priority:1e5,scope:!1,compile:function(n,t){var a=!0,o=t.requireRole.split(" ");for(var s in o)e.hasRole(o[s])&&(a=!1);a&&(angular.forEach(n.children(),function(e){try{e.remove()}catch(n){}}),n.remove())}}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,n){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),n.$on("risevision.common.globalError",function(n,t){e.errors.push(t)}),e.dismiss=function(n,t){e[n].splice(t,1)}}]),angular.module("risevision.common.header").controller("HelpDropdownButtonCtrl",["$scope","supportFactory","userState",function(e,n,t){e.$watch(function(){return t.isLoggedIn()},function(n){e.isLoggedIn=n}),e.$watch(function(){return t.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.openPrioritySupport=function(){n.handlePrioritySupportAction()},e.openSendUsANote=function(){n.handleSendUsANote()}}]),angular.module("risevision.common.header").controller("HelpPrioritySupportModalCtrl",["$scope","$modalInstance","subscriptionStatus","supportFactory","SUPPORT_PRODUCT_URL",function(e,n,t,a,o){e.subscriptionStatus=t,e.supportProductUrl=o,e.startTrial=function(){a.initiateTrial().then(function(){e.dismiss()})},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("HelpSendUsANoteModalCtrl",["$scope","$modalInstance","subscriptionStatus","supportFactory","SUPPORT_PRODUCT_URL",function(e,n,t,a,o){e.subscriptionStatus=t,e.supportProductUrl=o,e.sendUsANote=function(){a.openIntercomChat(),e.dismiss()},e.prioritySupport=function(){a.openIntercomChat(),e.dismiss()},e.startTrial=function(){a.initiateTrial().then(function(){e.dismiss()})},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch","$window","APPS_URL",function(e,n,t,a,o,s,i,r,l,c,u,d){window.$loading=o,e.inRVAFrame=a.inRVAFrame(),e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.$on("risevision.user.signedOut",function(){s.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){s.remove("surpressRegistration")}),e.$watch(function(){return r.isStatusUndetermined()},function(n){e.undetermined=n,e.loading=n}),e.$watch(function(){return r.getStatus()},function(o,s){o&&(i.debug("status changed from",s,"to",o),"registeredAsRiseVisionUser"===o?(!a.registrationModalInstance&&a.isLoggedIn()&&(a.registrationModalInstance=n.open({template:t.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static",resolve:{account:["getUserProfile","getAccount",function(e,n){return e(a.getUsername()).then(null,function(e){return e&&"User has not yet accepted the Terms of Service"===e.message?n():null})["catch"](function(){return null})}]}})),a.registrationModalInstance.result["finally"](function(){a.registrationModalInstance=null,r.invalidateStatus()})):"signedInWithGoogle"===o&&e.login())}),e.$watch(function(){return a.isLoggedIn()},function(n){e.isLoggedIn=n,n===!0&&(e.userPicture=a.getUserPicture())}),e.$watch(function(){return a.getUserCompanyName()},function(){e.companyName=a.getUserCompanyName()}),e.$watch(function(){return a.getUsername()},function(){e.username=a.getUsername()}),c(a.isRiseVisionUser,"isRiseVisionUser",e),e.login=function(e){o.startGlobal("auth-buttons-login"),a.authenticate(!0).then()["finally"](function(){o.stopGlobal("auth-buttons-login"),r.invalidateStatus(e)})},e.alertSettings=function(){var e=d+"/alerts?cid="+a.getSelectedCompanyId();u.location.href=e},e.userSettings=function(e){n.open({template:t.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return a.getUsername()},add:function(){return!1}}})},o.startGlobal("auth-buttons-silent"),
l().then()["finally"](function(){a.authenticate(!1).then()["finally"](function(){o.stopGlobal("auth-buttons-silent"),r.isStatusUndetermined()||r.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("SignUpModalCtrl",["$scope","userState","uiFlowManager","$loading",function(e,n,t,a){e.login=function(e){a.startGlobal("auth-buttons-login"),n.authenticate(!0).then()["finally"](function(){a.stopGlobal("auth-buttons-login"),t.invalidateStatus(e)})}}]),angular.module("risevision.common.header").controller("SignUpButtonCtrl",["$scope","$modal",function(e,n){e.openSignUpModal=function(){n.open({templateUrl:"signup-modal.html",controller:"SignUpModalCtrl"})}}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCoreCountries",function(e,n,t,a,o){e.inRVAFrame=a.inRVAFrame(),e.$watch(function(){return a.isSubcompanySelected()},function(){e.isSubcompanySelected=a.isSubcompanySelected()}),e.$watch(function(){return a.getSelectedCompanyName()},function(n){n&&(e.selectedCompanyName=a.getSelectedCompanyName())}),e.$watch(function(){return a.isRiseVisionUser()},function(n){e.isRiseVisionUser=n,n===!0&&(e.isUserAdmin=a.isUserAdmin(),e.isPurchaser=a.isPurchaser())}),e.$watch(function(){return a.isRiseAdmin()},function(n){e.isRiseVisionAdmin=n}),e.addSubCompany=function(){n.open({template:t.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:"lg",resolve:{countries:function(){return o()}}})},e.companySettings=function(){n.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:"lg",resolve:{companyId:function(){return a.getSelectedCompanyId()},countries:function(){return o()}}})},e.companyUsers=function(e){n.open({template:t.get("company-users-modal.html"),controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return a.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=n.open({template:t.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return a.getSelectedCompanyId()}}});e.result.then(a.switchCompany)},e.moveCompany=function(e){n.open({template:t.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){a.resetCompany()}}]),angular.module("risevision.common.header").filter("surpressZero",function(){return function(e){return e?e:""}}).controller("ShoppingCartButtonCtrl",["$scope","shoppingCart","userState","$log","STORE_URL",function(e,n,t,a,o){e.shoppingCartUrl=o+"shopping-cart",e.cart={},e.cart.items=n.getItems(),e.$watch(function(){return t.isRiseVisionUser()},function(t){e.isRiseVisionUser=t,n.get()})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,n,t){e.closeIFrame=function(){n.debug("gadgetsService.closeIFrame"),t.closeIFrame()}}]),angular.module("risevision.common.header").controller("SystemMessagesButtonCtrl",["$scope","userState","$log","$sce","getCoreSystemMessages","systemMessages",function(e,n,t,a,o,s){e.messages=s,e.$watch(function(){return n.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.renderHtml=function(e){return a.trustAsHtml(e)},s.registerRetriever(function(){return o(n.getSelectedCompanyId())}),e.$watch(function(){return n.getSelectedCompanyId()},function(n){null!==n?s.resetAndGetMessages().then(e.apply):s.clear()})}]),angular.module("risevision.common.header").controller("RegisterButtonCtrl",["$scope","cookieStore","uiFlowManager",function(e,n,t){e.register=function(){n.remove("surpressRegistration"),t.invalidateStatus("registrationComplete")}}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$scope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError","agreeToTermsAndUpdateUser","account","segmentAnalytics","bigQueryLogging","analyticsEvents",function(e,n,t,a,o,s,i,r,l,c,u,d,p,m,g){var f=!d,h=d?d:i.getCopyOfProfile()||{};s.remove("surpressRegistration"),e.profile=r(h,"email","mailSyncEnabled","firstName","lastName"),e.registering=!1,e.profile.accepted=angular.isDefined(h.termsAcceptanceDate)&&null!==h.termsAcceptanceDate,angular.isDefined(e.profile.mailSyncEnabled)||(e.profile.mailSyncEnabled=!1),e.closeModal=function(){s.put("surpressRegistration",!0),n.dismiss("cancel")};var v=e.$watch(function(){return l.isStatusUndetermined()},function(e){e===!0?t.start("registration-modal"):e===!1&&("registrationComplete"===l.getStatus()&&(n.close("success"),v()),t.stop("registration-modal"))});e.save=function(){if(e.forms.registrationForm.accepted.$pristine=!1,e.forms.registrationForm.firstName.$pristine=!1,e.forms.registrationForm.lastName.$pristine=!1,e.forms.registrationForm.email.$pristine=!1,!e.forms.registrationForm.$invalid){e.registering=!0,t.start("registration-modal");var s;s=f?a(i.getUsername(),e.profile):u(i.getUsername(),e.profile),s.then(function(){i.refreshProfile().then()["finally"](function(){g.identify(),p.track("User Registered",{companyId:i.getUserCompanyId(),companyName:i.getUserCompanyName(),isNewCompany:f}),m.logEvent("User Registered"),n.close("success"),t.stop("registration-modal")})},function(e){alert("Error: "+c(e)),o.error(e)})["finally"](function(){e.registering=!1,i.refreshProfile()})}},e.forms={}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,n,t,a,o,s){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?s.start("move-company-modal"):s.stop("move-company-modal")}),e.selectedCompany=o.getCopyOfSelectedCompany(),e.closeModal=function(){n.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,t(e.company.authKey,o.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(n){e.errors.push("Error: "+JSON.stringify(n))})["finally"](function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,a(e.company.authKey).then(function(n){angular.extend(e.company,n)},function(n){e.errors.push("Failed to retrieve company. "+n.message)})["finally"](function(){e.loading=!1})},e.$watch("moveSuccess",function(n){n?e.dismissButtonText="Close":e.dismissButtonText="Cancel"})}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","countries","REGIONS_CA","REGIONS_US","TIMEZONES","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","deleteCompany","segmentAnalytics","$modal","$templateCache",function(e,n,t,a,o,s,i,r,l,c,u,d,p,m,g,f,h,v){function y(n){e.isRiseStoreAdmin?n.sellerId=n.isSeller?"yes":null:(delete n.sellerId,delete n.isTest)}e.company={id:a},e.countries=o,e.regionsCA=s,e.regionsUS=i,e.timezones=r,e.isRiseStoreAdmin=m.isRiseStoreAdmin(),e.$watch("loading",function(e){e?d.start("company-settings-modal"):d.stop("company-settings-modal")}),e.loading=!1,e.forms={},a&&(e.loading=!0,l(a).then(function(n){e.company=n,e.company.isSeller=!(!n||!n.sellerId)},function(e){alert("An error has occurred. "+p(e))})["finally"](function(){e.loading=!1})),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0;var a=angular.copy(e.company);y(a),t(e.company.id,a).then(function(){f.track("Company Updated",{companyId:m.getSelectedCompanyId(),companyName:m.getSelectedCompanyName(),isUserCompany:!m.isSubcompanySelected()}),m.updateCompanySettings(e.company),n.close("success")})["catch"](function(e){alert("Error(s): "+p(e))})["finally"](function(){e.loading=!1})},e.deleteCompany=function(){var t=h.open({template:v.get("safe-delete-modal.html"),controller:"SafeDeleteModalCtrl"});t.result.then(function(){e.loading=!0,g(e.company.id).then(function(){f.track("Company Deleted",{companyId:m.getSelectedCompanyId(),companyName:m.getSelectedCompanyName(),isUserCompany:!m.isSubcompanySelected()}),m.getUserCompanyId()===e.company.id?m.signOut():m.getSelectedCompanyId()===e.company.id&&m.resetCompany(),n.close("success")})["catch"](function(e){alert("Error(s): "+p(e))})["finally"](function(){e.loading=!1})})},e.resetAuthKey=function(){u.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(d.start("company-settings-modal"),c(e.company.id,"authKey").then(function(n){e.company.authKey=n.item,alert("Successfully changed Authentication Key.")},function(e){alert("Error: "+p(e))})["finally"](function(){d.stop("company-settings-modal")}))},e.resetClaimId=function(){u.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(d.start("company-settings-modal"),c(e.company.id,"claimId").then(function(n){e.company.claimId=n.item,alert("Successfully changed Claim ID.")},function(e){alert("Error: "+p(e))})["finally"](function(){d.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","countries","REGIONS_CA","REGIONS_US","TIMEZONES","userState","$loading","humanReadableError","segmentAnalytics","bigQueryLogging",function(e,n,t,a,o,s,i,r,l,c,u,d,p,m){e.company={},e.countries=s,e.regionsCA=i,e.regionsUS=r,e.timezones=l,e.forms={},e.$watch("loading",function(e){e?u.start("add-subcompany-modal"):u.stop("add-subcompany-modal")}),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,o(c.getSelectedCompanyId(),e.company).then(function(e){p.track("Company Created",{companyId:e.id,companyName:e.name}),m.logEvent("Company Created",e.name,null,c.getUsername(),e.id),n.close("success")},function(e){alert("Error: "+d(e))})["finally"](function(){e.loading=!1})},e.moveCompany=function(e){t.open({template:a.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$modalInstance","companyService","companyId","BaseList","$loading",function(e,n,t,a,o,s){var i=40;e.companies=new o(i),e.search={query:""},e.filterConfig={placeholder:"Search Companies"},e.$watch("loading",function(e){e?(s.start("company-selector-modal"),s.start("company-selector-modal-list")):(s.stop("company-selector-modal"),s.stop("company-selector-modal-list"))}),e.closeModal=function(){n.dismiss("cancel")},e.loadCompanies=function(){e.companies.endOfList||(e.loading=!0,t.getCompanies(a,e.search.query,e.companies.cursor,i,null).then(function(n){n&&n.items&&e.companies.add(n.items,n.cursor)})["finally"](function(){e.loading=!1}))},0===e.companies.list.length&&e.loadCompanies(),e.doSearch=function(){e.companies.clear(),e.loadCompanies()},e.setCompany=function(e){n.close(e.id)}}]),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,n,t,a){e.inRVAFrame=a.inRVAFrame(),e.$watch(function(){return a.getSelectedCompanyId()},function(){e.isSubcompanySelected=a.isSubcompanySelected(),e.selectedCompanyName=a.getSelectedCompanyName()}),e.switchToMyCompany=function(){a.resetCompany()}}]),angular.module("risevision.common.header").controller("TestCompanyBannerCtrl",["$scope","userState",function(e,n){e.$watch(function(){return n.isTestCompanySelected()},function(n){e.isTestCompanySelected=n})}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(n){return e[n]}}]).controller("CompanyUsersModalCtrl",["$scope","$modalInstance","$modal","$templateCache","company","getUsers","$loading",function(e,n,t,a,o,s,i){e.$watch("loading",function(e){e?i.start("company-users-list"):i.stop("company-users-list")}),e.sort={field:"username",descending:!1},e.search={query:""},e.filterConfig={placeholder:"Search Users"},e.changeSorting=function(n){var t=e.sort;t.field===n?t.descending=!t.descending:(t.field=n,t.descending=!1)};var r=function(){e.loading=!0,s({companyId:o.id,search:e.search.query}).then(function(n){e.users=n})["finally"](function(){e.loading=!1})};r(),e.addUser=function(e){var n=t.open({template:a.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:e,resolve:{companyId:function(){return o.id}}});n.result["finally"](r)},e.editUser=function(e,n){var o=t.open({template:a.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return e},add:function(){return!1}}});o.result["finally"](r)},e.closeModal=function(){n.dismiss("cancel")},e.doSearch=function(){e.users=[],r()}}]),angular.module("risevision.common.header").controller("AddUserModalCtrl",["$scope","addUser","$modalInstance","companyId","userState","userRoleMap","humanReadableError","$loading","segmentAnalytics",function(e,n,t,a,o,s,i,r,l){e.isAdd=!0,e.availableRoles=[],angular.forEach(s,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){e.user&&"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.$watch("loading",function(e){e?r.start("user-settings-modal"):r.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.username.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,n(a,e.user.username,e.user).then(function(){l.track("User Created",{userId:e.user.username,companyId:a}),t.close("success")},function(e){alert("Error"+i(e))})["finally"](function(){e.loading=!1}))},e.closeModal=function(){t.dismiss("cancel")},e.editRoleAllowed=function(e){return!!o.isRiseAdmin()||!!o.isUserAdmin()&&("sa"!==e.key&&"ba"!==e.key)},e.editRoleVisible=function(e){return o.isRiseAdmin()?!o.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!o.isUserAdmin()&&!o.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key)},e.forms={}}]),angular.module("risevision.common.header").controller("UserSettingsModalCtrl",["$scope","$modalInstance","updateUser","getUserProfile","deleteUser","addUser","username","userRoleMap","$log","$loading","userState","uiFlowManager","humanReadableError","$rootScope","segmentAnalytics",function(e,n,t,a,o,s,i,r,l,c,u,d,p,m,g){e.user={},e.$watch("loading",function(e){e?c.start("user-settings-modal"):c.stop("user-settings-modal")}),e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.isUserAdmin=u.isUserAdmin(),e.username=i,e.loading=!0,a(i).then(function(n){e.user=n,e.editingYourself=u.checkUsername(n.username)})["finally"](function(){e.loading=!1}),e.closeModal=function(){n.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&o(e.username).then(function(){g.track("User Deleted",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),u.checkUsername(i)&&u.signOut().then()["finally"](function(){d.invalidateStatus("registrationComplete")})})["finally"](function(){n.dismiss("deleted")})},e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,t(i,e.user).then(function(t){u.checkUsername(i)&&u.updateUserProfile(t.item),g.track("User Updated",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),n.close("success")},function(e){l.debug(e),alert("Error: "+p(e))})["finally"](function(){e.loading=!1}))},e.editRoleAllowed=function(n){return!!u.isRiseAdmin()||!!u.isUserAdmin()&&("sa"!==n.key&&"ba"!==n.key&&("ua"!==n.key||!u.checkUsername(e.user.username)))},e.editRoleVisible=function(e){return u.isRiseAdmin()?!u.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!u.isUserAdmin()&&!u.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key)},e.forms={}}]),angular.module("risevision.common.header").controller("SignOutButtonCtrl",["$scope","$modal","$templateCache","uiFlowManager",function(e,n,t,a){e.logout=function(){var e=n.open({template:t.get("signout-modal.html"),controller:"SignOutModalCtrl"});e.result["finally"](function(){a.invalidateStatus("registrationComplete")})}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userState",function(e,n,t,a){e.closeModal=function(){n.dismiss("cancel")},e.signOut=function(e){a.signOut(e).then(function(){t.debug("user signed out")},function(e){t.error("sign out failed",e)})["finally"](function(){n.dismiss("success")})}}]),angular.module("risevision.common.header").controller("SafeDeleteModalCtrl",["$scope","$modalInstance",function(e,n){e.inputText=null,e.canConfirm=!1,e.$watch("inputText",function(){e.canConfirm="DELETE"===e.inputText}),e.confirm=function(){e.canConfirm&&n.close()},e.cancel=function(){n.dismiss("cancel")},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var n={visible:!1,enabled:!1};return n.enabled=angular.element(e).width()<=1200,n.toggle=function(e){e&&e.stopPropagation(),(n.enabled||n.visible)&&(n.visible=!n.visible,n.visible?n.nav.addClass("is-off-canvas-opened"):n.nav.removeClass("is-off-canvas-opened"))},n.registerNav=function(e){n.nav=e,n.nav.addClass("off-canvas--container")},window.onresize=function(){n.enabled=angular.element(e).width()<=1200},n}]).directive("offCanvasContent",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,a){var o;n.bind(a,{start:function(e){o=e},end:function(n){n.x-o.x>0&&e.toggle()}})}}}]).directive("offCanvasNav",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,a){a.addClass("off-canvas--nav"),e.registerNav(a);var o;n.bind(a,{start:function(e){o=e},end:function(n){n.x-o.x<0&&e.toggle()}}),a.bind("tap",e.toggle),a.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile","$timeout",function(e,n,t){return{restrict:"A",link:function(a,o,s){var i=e.find("body").eq(0),r=!1,l=document.getElementById("action-sheet-backdrop");angular.isObject(l)?l=angular.element(l):(l=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),i.append(l)),a.templateUrl=a.$eval(s.actionSheet),a.title=a.$eval(s.title);var c=angular.element('<div class="action-sheet is-action-sheet-closed"><ng-include src="templateUrl"></ng-include></div>'),u=n(c)(a);i.append(u);var d=function(){r=!r,r?(u.toggleClass("is-action-sheet-closed"),t(function(){u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened")})):(u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened"),t(function(){u.toggleClass("is-action-sheet-closed")},500)),r?(l.bind("tap",d),l.bind("click",d)):(l.unbind("tap"),l.unbind("click"))};s.actionSheetClass&&s.actionSheetClass.split(" ").forEach(function(e){u.addClass(e)}),o.bind("tap",d),o.bind("click",d),c.bind("tap",d),c.bind("click",d)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),angular.module("risevision.common.geodata",[]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]).value("TIMEZONES",[["(GMT -12:00) International Dateline West","-720"],["(GMT -11:00) Midway Island, Samoa","-660"],["(GMT -10:00) Hawaii","-600"],["(GMT -09:00) Alaska","-540"],["(GMT -08:00) Pacific Time (US & Canada], Tijuana","-480"],["(GMT -07:00) Mountain Time (US & Canada)","-420"],["(GMT -06:00) Central Time (US & Canada)","-360"],["(GMT -05:00) Eastern Time (US & Canada)","-300"],["(GMT -04:00) Atlantic Time (Canada)","-240"],["(GMT -03:30) NewfoundLand Time (Canada)","-210"],["(GMT -03:00) Buenos Aires, Georgetown","-180"],["(GMT -02:00) Mid-Atlantic","-120"],["(GMT -01:00) Cape Verde Is.","-60"],["(GMT  00:00) Dublin, Edinburgh, Lisbon, London","0"],["(GMT +01:00) Amsterdam, Berlin, Bern, Rome, Paris, Stockholm, Vienna","60"],["(GMT +02:00) Athens, Bucharest, Istanbul, Minsk","120"],["(GMT +03:00) Moscow, St. Petersburg, Volgograd","180"],["(GMT +03:30) Tehran","210"],["(GMT +04:00) Abu Dhabi, Muscat","240"],["(GMT +04:30) Kabul","270"],["(GMT +05:00) Islamabad, Karachi, Tashkent","300"],["(GMT +05:30) Calcutta, Chennai, Mumbai,New Delhi","330"],["(GMT +05:45) Kathmandu","345"],["(GMT +06:00) Astana,Almaty, Dhaka, Novosibirsk","360"],["(GMT +06:30) Rangoon (Yangon, Burma)","390"],["(GMT +07:00) Bangkok, Hanoi, Jakarta","420"],["(GMT +08:00) Beijing, Chongqing, Hong Kong, Urumqi","480"],["(GMT +09:00) Osaka, Sapporo, Tokyo","540"],["(GMT +09:30) Adelaide, Darwin","570"],["(GMT +10:00) Canberra, Melbourne, Sydney, Vladvostok","600"],["(GMT +11:00) Magadan, Solomon Is., New Caledonia","660"],["(GMT +12:00) Auckland, Fiji, Kamchatka, Marshall Is.","720"],["(GMT +13:00) Nuku'alofa","780"]]),function(e){"use strict";e.module("risevision.ui-flow",["LocalStorageModule"]).constant("uiStatusDependencies",{_dependencies:{},_retries:{},addDependencies:function(n){e.extend(this._dependencies,n)},setMaximumRetryCount:function(e,n){if(n<1)throw"Retry count for "+e+" must be equal to or greater than 1.";void 0===this._retries[e]&&(this._retries[e]=n)}}).factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope","localStorageService",function(n,t,a,o,s,i){var r,l,c,u=null,d=o._dependencies,p=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},m=function(e){var t;try{t=a.get(e)}catch(o){n.debug("Generating dummy status",e),t=p()}return t},g=function(a){var o;n.debug("Attempting to reach status",a,"...");var s=d[a];if(s){s instanceof Array||(s=[s]);var i=t.defer(),r=i;e.forEach(s,function(e){var s=t.defer();i.promise.then(s.resolve,function(){g(e).then(function(){d[e]&&n.debug("Deps for status",e,"satisfied."),m(a)().then(function(){n.debug("Status",a,"satisfied."),s.resolve(!0)},function(){n.debug("Status",a,"not satisfied."),s.reject(a)})},function(t){d[e]?(n.debug("Failed to reach status",e," because its dependencies are not satisfied. Last rejected dep: ",t),s.reject(t)):s.reject(e)})}),o=i=s}),r.reject()}else o=t.defer(),m(a)().then(function(){n.debug("Termination status",a,"satisfied."),o.resolve(!0)},function(){n.debug("Termination status",a,"not satisfied."),o.reject(a)});return o.promise},f=!0,h=function(a){if(!a&&!l){var s=t.defer();return s.resolve(),s.promise}return!l&&f&&(l=a,u=e.copy(o._retries),c=t.defer(),f=!1),l&&(c=t.defer(),g(l).then(function(e){l&&(r=l),c.resolve(e),l=null,f=!0},function(e){r=e,void 0!==u[e]&&(0===u[e]?(n.debug("Maximum allowed retries for status",e,"reached. Validation will cancel."),b()):u[e]--),f=!0,c.reject(e)})),c&&c.promise},v=function(e){return r="pendingCheck",h(e)},y=function(){i.set("risevision.ui-flow.state",{goalStatus:l,retriesLeft:u})},b=function(){r="",l="",u=null,f=!0,s.$broadcast("risevision.uiStatus.validationCancelled"),n.debug("UI status validation cancelled.")};if(i.get("risevision.ui-flow.state")){var C=i.get("risevision.ui-flow.state");C&&C.goalStatus&&(l=C.goalStatus,n.debug("uiFlowManager.goalStatus restored to",C.goalStatus,C.retriesLeft),u=C.retriesLeft,c=t.defer(),f=!1),i.remove("risevision.ui-flow.state")}var S={invalidateStatus:v,cancelValidation:b,getStatus:function(){return r},isStatusUndetermined:function(){return"pendingCheck"===r},persist:y};return S}])}(angular),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.userprofile","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,n,t,a){return function(){t.debug("agreeToTerms called.");var o=e.defer();return n().then(function(e){var n=e.account.agreeToTerms();n.execute(function(e){t.debug("agreeToTerms resp",e),a.removeAll(),e.error?o.reject(e.error):o.resolve()})}),o.promise}}]).factory("agreeToTermsAndUpdateUser",["$q","$log","agreeToTerms","updateUser",function(e,n,t,a){return function(o,s){n.debug("registerAccount called.",o,s);var i=e.defer();return t().then()["finally"](function(){a(o,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("registerAccount",["$q","$log","addAccount","updateUser",function(e,n,t,a){return function(o,s){n.debug("registerAccount called.",o,s);var i=e.defer();return t().then()["finally"](function(){a(o,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("addAccount called.");var a=e.defer();return n().then(function(e){var n=e.account.add();n.execute(function(e){t.debug("addAccount resp",e),e.result?a.resolve():a.reject("addAccount")})}),a.promise}}]).factory("getAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("getAccount called.");var a=e.defer();return n().then(function(e){var n=e.account.get();n.execute(function(e){t.debug("getAccount resp",e),e.item?a.resolve(e.item):a.reject("getAccount")})}),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.registration",["risevision.common.components.userstate","risevision.ui-flow","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registerdAsRiseVisionUser:"signedInWithGoogle",registeredAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registeredAsRiseVisionUser"]}),e.setMaximumRetryCount("signedInWithGoogle",1)}]).factory("signedInWithGoogle",["$q","getOAuthUserInfo","userState",function(e,n,t){return function(){var n=e.defer();return t.isLoggedIn()?n.resolve():n.reject("signedInWithGoogle"),n.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,n,t){return function(){var n=e.defer();return t().then(function(){n.reject("notLoggedIn")},n.resolve),n.promise}}]).factory("registeredAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(n,t,a,o,s){return function(){var i=n.defer();return t(s.getUsername()).then(function(n){e.isDefined(n.email)&&e.isDefined(n.mailSyncEnabled)?i.resolve(n):a.get("surpressRegistration")?i.resolve({}):i.reject("registeredAsRiseVisionUser")},function(e){a.get("surpressRegistration")?i.resolve({}):(o.debug("registeredAsRiseVisionUser rejected",e),i.reject("registeredAsRiseVisionUser"))}),i.promise}}])}(angular),angular.module("risevision.common.support",["risevision.widget.common.subscription-status"]).factory("supportFactory",["$q","subscriptionStatusService","SUPPORT_PRODUCT_CODE","STORE_SERVER_URL","userState","$modal","$templateCache","$http","$window","segmentAnalytics",function(e,n,t,a,o,s,i,r,l,c){var u={},d="Premium",p="Trial",m="Free";u.handlePrioritySupportAction=function(){g().then(function(e){"on-trial"===e.statusCode&&v(e),u.openIntercomChat()},function(e){v(e)})};var g=function(){var n=e.defer();return h().then(function(e){!e||"not-subscribed"!==e.statusCode&&"cancelled"!==e.statusCode&&"suspended"!==e.statusCode&&"trial-expired"!==e.statusCode&&"trial-available"!==e.statusCode||(f(m),n.reject(e)),"on-trial"===e.statusCode&&(f(p),n.resolve(e)),"subscribed"===e.statusCode&&(f(d),n.resolve(e))},function(e){console.debug("Could not retrieve a subscription status",e),n.reject()}),n.promise},f=function(e){c.identify(o.getUsername(),{plan:e})},h=function(){var a=e.defer();return t&&o.getSelectedCompanyId()?n.get(t,o.getSelectedCompanyId()).then(function(e){console.debug("subscriptionStatus",e),a.resolve(e)},function(e){console.debug("Could not retrieve a subscription status",e),a.reject(e)}):a.reject(),a.promise},v=function(e){console.debug("opening support trial popup"),s.open({template:i.get("help-priority-support-modal.html"),controller:"HelpPrioritySupportModalCtrl",resolve:{subscriptionStatus:function(){return e}}})};u.openIntercomChat=function(){console.debug("opening intercom chat"),l.Intercom("showNewMessage")},u.initiateTrial=function(){var n=a+"/v1/widget/auth?pc="+t+"&cid="+o.getSelectedCompanyId(),s=e.defer();return r.get(n).then(function(){console.debug("Subscription trial star2ted"),u.handlePrioritySupportAction(),s.resolve()},function(e){console.debug("Could not call the subscription start trial",e),s.reject()}),s.promise},u.handleSendUsANote=function(){g().then(function(e){y(e)},function(e){y(e)})};var y=function(e){console.debug("opening send us a note popup"),s.open({template:i.get("help-send-us-a-note-modal.html"),controller:"HelpSendUsANoteModalCtrl",resolve:{subscriptionStatus:function(){return e}}})};return u}]),function(e){"use strict";e.module("risevision.core.cache",[]).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var n=Array.prototype,t=n.slice,a=n.concat,o=function(e,n,t){if(void 0===n)return e;switch(null===t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,a){return e.call(n,t,a)};case 3:return function(t,a,o){return e.call(n,t,a,o)};case 4:return function(t,a,o,s){return e.call(n,t,a,o,s)}}return function(){return e.apply(n,arguments)}};return function(n,s,i){var r,l={};if(null===n)return l;if(e.isFunction(s)){s=o(s,i);for(r in n){var c=n[r];s(c,r,n)&&(l[r]=c)}}else{var u=a.apply([],t.call(arguments,1));n=new Object(n);for(var d=0,p=u.length;d<p;d++)r=u[d],r in n&&(l[r]=n[r])}return l}})}(angular),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log",function(e,n,t,a){var o,s={};return function(i,r){var l;if(i===o&&!r&&null!==s[i])return s[i].promise;if(o=i,s[i]=l=t.defer(),i){var c={};i&&(c.username=i),a.debug("getUserProfile called",c),t.all([e(),n()]).then(function(e){var n=e[1];n.user.get(c).execute(function(e){e.error||!e.result?l.reject(e):(a.debug("getUser resp",e),l.resolve(e.item))})},l.reject)}else l.reject("getUserProfile failed: username param is required."),
a.debug("getUserProfile failed: username param is required.");return l.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","getUserProfile","pick",function(e,n,t,a,o){return function(s,i){var r=e.defer();return i=o(i,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status"),t.debug("updateUser called",s,i),n().then(function(e){var n=e.user.patch({username:s,data:i});n.execute(function(e){t.debug("updateUser resp",e),e.error?r.reject(e):e.result?a(s,!0).then(function(){r.resolve(e)}):r.reject("updateUser")})},r.reject),r.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick","getUserProfile",function(e,n,t,a,o){return function(s,i,r){var l=e.defer();return n().then(function(e){r=a(r,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status");var n=e.user.add({username:i,companyId:s,data:r});n.execute(function(e){t.debug("addUser resp",e),e.result?o(i,!0).then(function(){l.resolve(e)}):l.reject(e)})}),l.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,n,t){return function(a){var o=e.defer();return n().then(function(e){var n=e.user["delete"]({username:a});n.execute(function(e){t.debug("deleteUser resp",e),e.result?o.resolve(e):o.reject("deleteUser")})}),o.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,n,t){return function(a){t.debug("getUsers",a);var o=e.defer();return n().then(function(e){var n=e.user.list(a);n.execute(function(e){t.debug("getUsers resp",e),e.result?o.resolve(e.items):o.reject("getUsers")})},o.reject),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","mailSyncEnabled","sellerId","isTest","shipToUseCompanyAddress","shipToName","shipToStreet","shipToUnit","shipToCity","shipToProvince","shipToPostalCode","shipToCountry"]).constant("ALERTS_WRITABLE_FIELDS",["alertSettings"]).constant("COMPANY_SEARCH_FIELDS",["name","id","street","unit","city","province","country","postalCode","telephone","fax","shipToName","shipToStreet","shipToCity","shipToPostalCode"]).factory("company",["$q","$log","coreAPILoader","pick","ALERTS_WRITABLE_FIELDS",function(e,n,t,a,o){var s={updateAlerts:function(s,i){var r=e.defer(),l=a.apply(this,[i].concat(o)),c={id:s,data:l};return n.debug("updateAlerts called",s,l),t().then(function(e){return e.company.patch(c)}).then(function(e){n.debug("update Alerts resp",e),r.resolve(e.result)}).then(null,function(e){n.error("Failed to update Alerts.",e),r.reject(e)}),r.promise}};return s}]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,n,t,a){return function(o,s){var i=e.defer();return n().then(function(e){var n=a.apply(this,[s].concat(t)),r=e.company.add({parentId:o,data:n});r.execute(function(e){e.result?i.resolve(e.item):i.reject(e)},i.reject)}),i.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(a){t.debug("getCompany called",a);var o=n.defer();return e().then(function(e){var n={};a&&(n.id=a);var s=e.company.get(n);s.execute(function(e){t.debug("getCompany resp",e),e.result?o.resolve(e.item):o.reject(e)})}),o.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(a){t.debug("lookupCompany called",a);var o=n.defer();return e().then(function(e){var n=e.company.lookup({authKey:a});n.execute(function(e){t.debug("lookupCompany resp",e),e.result?o.resolve(e.item):o.reject(e)})}),o.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(a,o){var s=n.defer();return e().then(function(e){var n=e.company.move({authKey:a,newParentId:o});n.execute(function(e){t.debug("moveCompany resp",e),e.result?s.resolve(e.item):s.reject(e)})}),s.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,n,t,a,o){return function(s,i){var r=e.defer();return i=a.apply(this,[i].concat(o)),n.debug("updateCompany called",s,i),t().then(function(e){var t=e.company.patch({id:s,data:i});t.execute(function(e){n.debug("updateCompany resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,n,t){return function(a,o){var s=e.defer();return n.debug("regenerateField called",a,o),t().then(function(e){var t=e.company.regenerateField({id:a,fieldName:o});t.execute(function(e){n.debug("regenerateField resp",e),e.error?s.reject(e.message):s.resolve(e)},function(e){s.reject("call failed "+e)})}),s.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(a){t.debug("deleteCompany called",a);var o=n.defer();return e().then(function(e){var n={};a&&(n.id=a);var s=e.company["delete"](n);s.execute(function(e){t.debug("deleteCompany resp",e),e.result?o.resolve(e.item):o.reject(e)})}),o.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany","COMPANY_SEARCH_FIELDS",function(e,n,t,a,o){var s=function(e,n){var t="";for(var a in e)t+="OR "+e[a]+":~'"+n+"' ";return t=t?t.substring(3):"",t.trim()};this.getCompanies=function(a,i,r,l,c){var u=n.defer(),d=i?s(o,i):"",p={companyId:a,search:d,cursor:r,count:l,sort:c};return t.debug("getCompanies called with",p),e().then(function(e){var n=e.company.list(p);n.execute(function(e){t.debug("getCompanies resp",e),u.resolve(e)})}),u.promise},this.loadSelectedCompany=function(e,t){var o=n.defer();return e&&e!==t.id?a(e).then(function(e){0===e.code&&e.item?o.resolve(e.item):o.resolve(t)}):o.resolve(t),o.promise}}]).filter("fullAddress",function(){return function(e){var n=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return n&&(n=n.substr(0,n.length-2)),n}})}(angular),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,n,t,a){return function(){var o,s=n.defer();return(o=t.get("oauth2UserInfo"))?o.error?s.reject(o.error):s.resolve(o):e().then(function(e){e.userinfo.get().execute(function(e){a.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(t.remove("oauth2UserInfo"),s.reject(e.error)):(t.put("oauth2UserInfo",e),s.resolve(e)):(t.remove("oauth2UserInfo"),s.reject())})},s.reject),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.systemmessages",["risevision.common.gapi"]).factory("getCoreSystemMessages",["gapiLoader","$q","$log",function(e,n,t){return function(a){var o=n.defer();return e().then(function(e){var n=e.client.core.systemmessage.list({companyId:a});n.execute(function(e){var n=e;n instanceof Array||!n.items||(n=n.items),t.debug("getCoreSystemMessage resp",n),o.resolve(n)})}),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.countries",["risevision.common.gapi"]).factory("getCoreCountries",["coreAPILoader","$q","$log","$filter",function(e,n,t,a){var o;return function(){return o?o.promise:(o=n.defer(),e().then(function(e){return e.country.list()}).then(function(e){var n=e.result?e.result.items:[];n instanceof Array&&(n=a("orderBy")(n,"name")),o.resolve(n)}).then(null,function(e){t.debug("getCoreCountries failed",e),o.reject(e),o=null}),o.promise)}}]).factory("COUNTRIES",["getCoreCountries",function(e){var n=[];return e().then(function(e){Array.prototype.push.apply(n,e)}),n}])}(angular),angular.module("risevision.common.fastpass",[]).factory("loadFastpass",["$q","$http","$document","$timeout","GSFP_URL","$log",function(e,n,t,a,o,s){var i=function(n){var a=e.defer(),o=t[0].createElement("script");return o.onload=o.onreadystatechange=function(e){a.resolve(e)},o.onerror=function(e){a.reject(e)},o.src=n,t[0].body.appendChild(o),a.promise};return function(t,a){var r=e.defer();s.debug("loadFastpass called",t,a);var l=function(e){s.error("loadFastpass rejected",e),r.reject("loadFastpass rejected "+e)};return n.get(o+"/geturl?userEmail="+a+"&userName="+t).then(function(e){i(e.data).then(function(e){s.debug("loadFastpass result",e),r.resolve(!0)},l)["catch"](l)},r.reject),r.promise}}]),angular.module("risevision.common.header.directives").directive("fastpass",["loadFastpass","userState",function(e,n){return{restrict:"AE",scope:{},link:function(t){t.$watch(function(){return n.getUserEmail()},function(t){t&&e(n.getUsername(),n.getUserEmail())})}}}]),angular.module("risevision.common.header.directives").directive("linkCid",["userState",function(e){return{link:function(n,t,a){var o=function(e){var n,t=a.href.indexOf("cid=");n=t>-1?a.href.substring(0,t+4)+e:a.href+(a.href.indexOf("?")===-1?"?":"&")+"cid="+e,a.$set("href",n)};n.$watch(function(){return e.getSelectedCompanyId()},function(e,n){e&&e!==n&&o(e)})}}}]),function(e){"use strict";e.module("risevision.common.shoppingcart",["risevision.common.gapi","risevision.common.components.userstate"]).factory("shoppingCart",["storeAPILoader","$log","$q","userState",function(n,t,a,o){var s=[],i={items:s,useBillToAddress:!1,shipToAttention:"",couponCode:""},r=function(){var e=a.defer();return o.isLoggedIn()?n().then(function(n){var a={id:o.getUsername()},s=n.cart.get(a);s.execute(function(n){n.error?(t.warn("Error loading cart items. Error: "+n.error),e.resolve()):(u(),d(n.items),i.useBillToAddress=n.useBillToAddress,i.shipToAttention=n.shipToAttention?n.shipToAttention:"",i.couponCode=n.couponCode,e.resolve())})}):(u(),e.resolve()),e.promise},l=function(){var e=a.defer();return o.isLoggedIn()&&n().then(function(n){try{var a={data:{jsonItems:m(s),shipToAttention:i.shipToAttention,useBillToAddress:i.useBillToAddress,couponCode:i.couponCode}},o=n.cart.put(a);o.execute(function(n){n.error?(t.warn("Error persisting cart items. Error: "+n.error),e.resolve()):e.resolve()})}catch(r){e.resolve(),t.error("[persistToStorage] - Unimplemented API method "+r.message)}}),e.promise},c=function(){i.useBillToAddress=!1,i.shipToAttention="",i.couponCode="",u()},u=function(){for(;s.length>0;)s.pop()},d=function(e){if(e)for(var n=0;n<e.length;n++)s.push(e[n])},p=function(e){for(var n,t=[],a=0;a<e.length;a++)n={productId:e[a].productId,qty:e[a].qty,accountingId:e[a].selected.accountingId},t.push(n);return t},m=function(e){var n=p(e);return JSON.stringify(n)},g=null,f=null,h={get:function(){if(null!==g&&o.checkUsername(f))return g;f=o.getUsername(),c(),g=a.defer();var e=g;return r().then(function(){e.resolve(i)}),e},clear:function(){u(),l(),t.debug("Shopping cart cleared.")},getItems:function(){return s},setItems:function(e){return t.debug("Setting cart items",e),e!==s&&(u(),d(e)),l()},getShipToAttention:function(){return i.shipToAttention},getUseBillToAddress:function(){return i.useBillToAddress},setAddressFields:function(e,n){return i.shipToAttention=e,i.useBillToAddress=n,l()},getCouponCode:function(){return i.couponCode},setCouponCode:function(e){return t.debug("Setting coupon code",e),i.couponCode=e,l()},getItemCount:function(){return null!==s?s.length:0},removeItem:function(e){if(e){for(var n=0;n<s.length;n++)if(s[n].productId===e.productId){s.splice(n,1);break}l()}},adjustItemQuantity:function(e,n){e&&$.isNumeric(n)&&n>0&&l()},addItem:function(n,t,a){if(o.isRiseVisionUser()){var i=this.findItem(n);(!i||"Subscription"!==n.paymentTerms&&"Metered"!==n.paymentTerms)&&n&&$.isNumeric(t)&&n.orderedPricing.length>a&&(i?i.qty=parseInt(i.qty)+parseInt(t):(i=e.copy(n),i.qty=t,s.push(i)),i.selected=n.orderedPricing[a],l())}},findItem:function(e){if(e)for(var n=0;n<s.length;n++)if(e.productId===s[n].productId)return s[n];return null},itemExists:function(e){return!(!o.isRiseVisionUser()||!e||null===this.findItem(e))}};return h}])}(angular),function(e){"use strict";e.module("risevision.common.currency",["risevision.common.gapi"]).factory("currencyService",["$q","storeAPILoader","$log",function(e,n,t){var a=null,o={defaultItem:null},s=function(e){this.country=e.country,this.currencyCode=e.currencyCode,this.description=e.description,this.bankAccountCode=e.bankAccountCode,this.bankAccountDescription=e.bankAccountDescription,this.getName=function(){return this.currencyCode.toUpperCase()},this.pickPrice=function(e,n){switch(this.currencyCode.toUpperCase()){case"CAD":return n;default:return e}}};return o.getByCountry=function(e){if(e)for(var n=0;n<this.items.length;n++)if(this.items[n].country&&this.items[n].country.toUpperCase()===e.toUpperCase())return this.items[n];return this.defaultItem},o.setItems=function(e){this.items=[];for(var n=0;n<e.length;n++){var t=new s(e[n]);this.items.push(t),t.country||(this.defaultItem=t)}},function(){return null!==a?a.promise:(a=e.defer(),t.debug("currencyService called"),n().then(function(e){var n=e.currency.list();n.execute(function(e){t.debug("currencyService resp",e),e.error?(t.error("currencyService error: ",e.error),a.reject(e.error)):(o.setItems(e.items),a.resolve(o))})}),a.promise)}}])}(angular),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),e.module("risevision.common.config").value("ENABLE_INTERCOM_MESSAGING",!1).value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("COOKIE_CHECK_URL","//storage-dot-rvaserver2.appspot.com").value("STORE_URL","https://store.risevision.com").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com").value("STORE_ENDPOINT_URL","https://store-dot-rvaserver2.appspot.com/_ah/api").value("STORAGE_ENDPOINT_URL","https://storage-dot-rvaserver2.appspot.com/_ah/api").value("GSFP_URL","https://gsfp-dot-rvaserver2.appspot.com/fp").value("SUPPORT_PRODUCT_CODE","4c8c2f1a481d0ad84c6b16a9c6e90e2fc2252944").value("SUPPORT_PRODUCT_ID","14").value("SUPPORT_PRODUCT_URL","https://store.risevision.com/product/14/rise-priority-support").value("APPS_URL","https://apps.risevision.com")}(angular);var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).factory("gapiLoader",["$q","$window",function(e,n){var t=e.defer();return function(){var e;if("loaded"===n.gapiLoadingStatus)t.resolve(n.gapi);else if(!n.gapiLoadingStatus){n.gapiLoadingStatus="loading";var a=n.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",a),"undefined"!=typeof o&&document.getElementsByTagName("body")[0].appendChild(o),e=function(){t.resolve(n.gapi),n.removeEventListener("gapi.loaded",e,!1)},n.addEventListener("gapi.loaded",e,!1)}return t.promise}}]).factory("gapiClientLoaderGenerator",["$q","gapiLoader","$log",function(e,n,t){return function(a,o,s){return function(){var i=e.defer();return n().then(function(e){e.client[a]?i.resolve(e.client[a]):e.client.load.apply(this,[a,o].concat([function(){if(e.client[a])t.debug(a+"."+o+" Loaded"),i.resolve(e.client[a]);else{var n=a+"."+o+" Load Failed";t.error(n),i.reject(n)}},s]))}),i.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("core","v1",a)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("rise","v0",a)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().store_api_base_url?t.search().store_api_base_url+"/_ah/api":e;return n("store","v0.01",a)}]).factory("storageAPILoader",["STORAGE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().storage_api_base_url?t.search().storage_api_base_url+"/_ah/api":e;return n("storage","v0.01",a)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("discovery","v1",a)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var a=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("monitoring","v0",a)}]),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",["$log","$q",function(n,t){function a(e,t){n.debug("pushing message",e),t.push(e)}var o=[],s=[];return o.addMessages=function(n){n&&n instanceof Array&&(n=function(n){var t=[],a=new Date;return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),o=new Date(e.startDate||0);n.setDate(n.getDate()+1),a>o&&a<n&&t.push(e)}),t}(n),n.forEach(function(e){var n=!1;o.forEach(function(t){t.text===e.text&&(n=!0)}),n||a(e,o)}),o.sort(function(e,n){return!e.startDate||e.startDate>n.startDate?1:e.startDate&&e.startDate===n.startDate?0:-1}).reverse())},o.clear=function(){o.length=0,n.debug("System message cleared.")},o.registerRetriever=function(e){s.push(e)},o.resetAndGetMessages=function(){o.clear();var e=s.map(function(e){return e.call()});return t.all(e).then(function(e){e.forEach(o.addMessages)})},o}])}(angular),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var n=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise},this.sendProductCode=function(n){var t=e.defer(),a={params:n};return gadgets.rpc.call("","rscmd_saveSettings",function(){t.resolve(!0)},a),t.promise}}]),angular.module("risevision.common.cookie",["risevision.common.config"]).service("cookieTester",["$q","$document","$http","COOKIE_CHECK_URL",function(e,n,t,a){var o={};return o.checkCookies=function(){var n=e.defer();return e.all([o.checkLocalCookiePermission(),o.checkThirdPartyCookiePermission()]).then(function(){n.resolve()},function(){n.reject()}),n.promise},o.checkLocalCookiePermission=function(){return n[0].cookie="rv-test-local-cookie=yes",n[0].cookie.indexOf("rv-test-local-cookie")>-1?e.when(!0):e.reject(!1)},o.checkThirdPartyCookiePermission=function(){var n=e.defer();return t.get(a+"/createThirdPartyCookie",{withCredentials:!0}).then(function(){return t.get(a+"/checkThirdPartyCookie",{withCredentials:!0})}).then(function(e){"true"===e.data.check?n.resolve(!0):n.reject(!1)}).then(null,function(){n.resolve(!1)}),n.promise},o}]),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.config").value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api"),e.module("risevision.common.components.util",[]),e.module("risevision.common.components.logging",[]),e.module("risevision.common.components.rvtokenstore",["risevision.common.components.util","LocalStorageModule","ngBiscuit"]),e.module("risevision.common.components.userstate",["ui.router","risevision.common.components.util","risevision.common.components.rvtokenstore","risevision.common.components.logging","risevision.common.config","risevision.common.gapi","LocalStorageModule","risevision.core.cache","risevision.core.oauth2","risevision.core.company","risevision.core.util","risevision.core.userprofile","risevision.common.loading","risevision.ui-flow"]).value("CLIENT_ID","614513768474.apps.googleusercontent.com")}(angular),angular.module("risevision.common.components.logging").factory("bigQueryLogging",["externalLogging","userState",function(e,n){var t={};return t.logEvent=function(t,a,o,s,i){return e.logEvent(t,a,o,s||n.getUsername(),i||n.getSelectedCompanyId())},t}]),function(e){"use strict";e.module("risevision.common.components.userstate").factory("companyState",["$location","getCompany","objectHelper","$rootScope","$log","$q",function(n,t,a,o,s,i){var r,l={userCompany:{},selectedCompany:{}},c=function(){a.clearObj(l.selectedCompany),a.clearObj(l.userCompany),s.debug("Company state has been reset.")};n.search().cid&&(s.debug("cid",n.search().cid,"saved for later processing."),r=n.search().cid);var u=function(){var e=i.defer();return t().then(function(e){var n=p.getSelectedCompanyId()?p.getSelectedCompanyId():r;return a.clearAndCopy(e,l.userCompany),d(n)}).then(null,function(){p.resetCompany()})["finally"](function(){r=null,e.resolve(null)}),e.promise},d=function(e){var n=i.defer();return e&&e!==l.userCompany.id?t(e).then(function(e){a.clearAndCopy(e,l.selectedCompany),n.resolve(),o.$broadcast("risevision.company.selectedCompanyChanged")}).then(null,function(e){s.error("Failed to load selected company.",e),n.reject(e)}):(p.resetCompany(),n.resolve()),n.promise},p={init:u,switchCompany:d,updateCompanySettings:function(e){e&&e.id===p.getSelectedCompanyId()&&a.clearAndCopy(e,l.selectedCompany),e&&e.id===p.getUserCompanyId()&&a.clearAndCopy(e,l.userCompany),o.$broadcast("risevision.company.updated",{companyId:e.id})},resetCompany:function(){a.clearAndCopy(l.userCompany,l.selectedCompany),o.$broadcast("risevision.company.selectedCompanyChanged")},resetCompanyState:c,getUserCompanyId:function(){return l.userCompany&&l.userCompany.id||null},getUserCompanyName:function(){return l.userCompany&&l.userCompany.name||null},getSelectedCompanyId:function(){return l.selectedCompany&&l.selectedCompany.id||null},getSelectedCompanyName:function(){return l.selectedCompany&&l.selectedCompany.name||null},getSelectedCompanyCountry:function(){return l.selectedCompany&&l.selectedCompany.country||null},getCopyOfUserCompany:function(n){return n?e.extend({},l.userCompany):a.follow(l.userCompany)},getCopyOfSelectedCompany:function(n){return n?e.extend({},l.selectedCompany):a.follow(l.selectedCompany)},isSubcompanySelected:function(){return l.selectedCompany&&l.selectedCompany.id!==(l.userCompany&&l.userCompany.id)},isTestCompanySelected:function(){return l.selectedCompany&&l.selectedCompany.isTest===!0},isSeller:function(){return!(!l.selectedCompany||!l.selectedCompany.sellerId)},isRootCompany:function(){return l.userCompany&&!l.userCompany.parentId}};return p}])}(angular),angular.module("risevision.common.components.logging").constant("EXTERNAL_LOGGER_SERVICE_URL","https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Apps_Events/tables/TABLE_ID/insertAll").constant("EXTERNAL_LOGGER_REFRESH_URL","https://www.googleapis.com/oauth2/v3/token?client_id=1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com&client_secret=nlZyrcPLg6oEwO9f9Wfn29Wh&refresh_token=1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT&grant_type=refresh_token").factory("externalLogging",["$http","$window","$q","$log","EXTERNAL_LOGGER_REFRESH_URL","EXTERNAL_LOGGER_SERVICE_URL","ENABLE_EXTERNAL_LOGGING",function(e,n,t,a,o,s,i){var r,l,c={},u=function(){var e=new Date,n=e.getUTCFullYear(),t=e.getUTCMonth()+1,a=e.getUTCDate();return t<10&&(t="0"+t),a<10&&(a="0"+a),n.toString()+t.toString()+a.toString()},d={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:u(),rows:[{insertId:"",json:{event:"",event_details:"",event_value:0,host:"",ts:0,user_id:"",company_id:""}}]};return c.logEvent=function(o,r,l,u,p){if(a.debug("BQ log",o,r,l,u,p),i===!1)return void a.debug("External Logging DISABLED");var m=t.defer();return c.getToken().then(function(t){var i=JSON.parse(JSON.stringify(d)),c=s.replace("TABLE_ID","apps_events");i.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),i.rows[0].json.event=o,r&&(i.rows[0].json.event_details=r),l&&(i.rows[0].json.event_value=l),i.rows[0].json.user_id=u||"",i.rows[0].json.company_id=p||"",i.rows[0].json.host=n.location.hostname,i.rows[0].json.ts=(new Date).toISOString(),e.post(c,i,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then(function(e){m.resolve(e)},function(e){a.debug("error posting to BQ",e),m.reject(e)})},function(e){a.debug("BQ token ERROR",e),m.reject(e)}),m.promise},c.getToken=function(){var n=t.defer();return r&&(new Date).getTime()-l<358e4?n.resolve(r):e.post(o).then(function(e){r=e.data.access_token,l=(new Date).getTime(),n.resolve(e.data.access_token)},function(){n.reject()}),n.promise},c}]),function(e){"use strict";e.module("risevision.common.components.rvtokenstore").service("rvTokenStore",["$log","$location","cookieStore","getBaseDomain",function(e,n,t,a){var o=function(){return t.get("rv-token")},s=function(e){var n=a();"localhost"===n?t.put("rv-token",e,{path:"/"}):t.put("rv-token",e,{domain:n,path:"/"})},i=function(){var e=a();"localhost"===e?t.remove("rv-token",{path:"/"}):t.remove("rv-token",{domain:e,path:"/"})},r={read:o,write:s,clear:i};return r}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").run(["$rootScope","userState","selectedCompanyUrlHandler",function(e,n,t){e.$on("risevision.company.selectedCompanyChanged",function(e){e&&t.updateUrl()}),e.$on("$stateChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$locationChangeSuccess",t.locationChangeSuccess)}]).service("selectedCompanyUrlHandler",["$state","$stateParams","$location","userState",function(e,n,t,a){this.updateUrl=function(){var o=a.getSelectedCompanyId();o&&t.search().cid!==o&&!e.transition&&(n.cid=o,e.params.cid=o,t.search("cid",o))},this.updateSelectedCompanyFromUrl=function(){var o=t.search().cid;if(o&&a.getUserCompanyId()&&o!==a.getSelectedCompanyId())a.switchCompany(o);else if(!o&&a.getSelectedCompanyId()){var s=t.absUrl();n.cid=a.getSelectedCompanyId(),e.params.cid=a.getSelectedCompanyId(),t.search("cid",a.getSelectedCompanyId()),s===t.destUrl&&t.replace()}},this.locationChangeSuccess=function(e,n){t.destUrl=n}}])}(angular),function(e){"use strict";var n=function(e){return"/"===e[0]&&(e=e.slice(1)),e},t=function(e){var n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n};e.module("risevision.common.components.userstate").value("DEFAULT_PROFILE_PICTURE","http://api.randomuser.me/portraits/med/men/33.jpg").value("OAUTH2_SCOPES","https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile").value("GOOGLE_OAUTH2_URL","https://accounts.google.com/o/oauth2/auth").run(["$location","$window","userState","$log",function(e,a,o,s){var i=e.path(),r=t(n(i));if(s.debug("URL params",r),o._restoreState(),r.access_token&&o._setUserToken(r),r.state){var l=JSON.parse(decodeURIComponent(r.state));l.p||l.s?(o._persistState(),a.location.replace(l.p+l.s+l.u)):e.$$html5?e.path(""):a.location.hash=l.u}}]).factory("userState",["$q","$log","$location","CLIENT_ID","gapiLoader","OAUTH2_SCOPES","userInfoCache","getOAuthUserInfo","getUserProfile","companyState","objectHelper","$rootScope","$interval","$loading","$window","GOOGLE_OAUTH2_URL","localStorageService","$document","uiFlowManager","getBaseDomain","rvTokenStore","externalLogging","$http",function(n,t,a,o,s,i,r,l,c,u,d,p,m,g,f,h,v,y,b,C,S,$,w){var k,A,I={profile:{},user:{},roleMap:{},userToken:S.read(),inRVAFrame:e.isDefined(a.search().inRVA)},U=null,R=!0,T=function(e){if(R){R=!1;try{var n=(new Date).getTime()-f.performance.timing.navigationStart;$.logEvent("page load time",e,n,X.getUsername(),X.getSelectedCompanyId())}catch(a){t.debug("Error logging load time")}}},E=function(){var e=S.read();e!==I.userToken?f.location.reload():I.userToken&&G(!0)["finally"](function(){I.userToken||(t.debug("Authentication failed. Reloading..."),f.location.reload())})},N=function(){var e,n=y[0];"undefined"!=typeof n.hidden?e="visibilityState":"undefined"!=typeof n.mozHidden?e="mozVisibilityState":"undefined"!=typeof n.msHidden?e="msVisibilityState":"undefined"!=typeof n.webkitHidden&&(e="webkitVisibilityState"),t.debug("visibility: "+n[e]),"visible"===n[e]&&E()},L=function(){var e,n=y[0];return"undefined"!=typeof n.hidden?e="visibilitychange":"undefined"!=typeof n.mozHidden?e="mozvisibilitychange":"undefined"!=typeof n.msHidden?e="msvisibilitychange":"undefined"!=typeof n.webkitHidden&&(e="webkitvisibilitychange"),e},_=function(){document.addEventListener(L(),N)},x=function(){document.removeEventListener(L(),N)};_();var P=function(){I.userToken=X.getUsername(),S.write(I.userToken)},O=function(){t.debug("Clearing user token..."),F(),I.userToken=null,S.clear()},M=function(){m.cancel(U),U=m(function(){m.cancel(U),G(!0)},33e5)},F=function(){m.cancel(U),U=null},j=function(){A=null,d.clearObj(I.user),d.clearObj(I.profile),I.roleMap={},u.resetCompanyState(),t.debug("User state has been reset.")},D=function(){var e=n.defer();return c(I.user.username,!0).then(function(e){return X.updateUserProfile(e),u.init()}).then(function(){e.resolve()},e.reject),e.promise},V=function(e){var r=n.defer(),l={client_id:o,scope:i,cookie_policy:a.protocol()+"://"+C()};return"dummy"!==I.userToken?l.authuser=I.userToken:l.authuser=w.get("https://www.googleapis.com/oauth2/v1/userinfo?access_token="+I.params.access_token).then(function(e){return e.data.email},function(e){return console.log("Error retrieving userinfo"),l.authuser}),e?l.immediate=!0:l.prompt="select_account",n.all([s(),l.authuser]).then(function(e){var n=e[0];l.authuser=e[1],n.auth.setToken(I.params),n.auth.authorize(l,function(e){t.debug("authResult",e),e&&!e.error?(I.params&&delete I.params,M(),r.resolve(e)):(O(),r.reject(e.error||"failed to authorize user"))})}).then(null,r.reject),r.promise},G=function(e){if(k)return k.promise;k=n.defer();var t;return V(e).then(function(e){return t=e,l()}).then(function(n){I.user.username&&I.profile.username&&I.user.username===n.email?(k.resolve(t),k=void 0):(d.clearAndCopy({userId:n.id,username:n.email,picture:n.picture},I.user),P(),D()["finally"](function(){k.resolve(t),p.$broadcast("risevision.user.authorized"),e||p.$broadcast("risevision.user.userSignedIn"),k=void 0}))}).then(null,function(e){d.clearObj(I.user),k.reject(e),k=void 0}),k.promise},B=function(e){if(e){var t,a,s,r;p.redirectToRoot===!1?t=f.location.href.substr(0,f.location.href.indexOf("#"))||f.location.href:(t=f.location.origin+"/",a=f.location.pathname?f.location.pathname.substring(1):"",s=f.location.search),r=encodeURIComponent(encodeURIComponent(JSON.stringify({p:a,u:f.location.hash,s:s}))),v.set("risevision.common.userState",I),b.persist(),f.location.href=h+"?response_type=token&scope="+encodeURIComponent(i)+"&client_id="+o+"&redirect_uri="+encodeURIComponent(t)+"&prompt=select_account&state="+r;var l=n.defer();return l.promise}return q(e)},q=function(a){var o;if(a&&(j(),r.removeAll()),A)return A.promise;A=n.defer(),o=A,t.debug("authentication called");var i=function(){var n=e.isDefined(I.userToken)&&null!==I.userToken;if(t.debug("userAuthed",n),a||n===!0)G(!a).then(function(e){e&&!e.error?o.resolve():(O(),t.debug("Authentication Error: "+e.error),o.reject("Authentication Error: "+e.error))}).then(null,function(e){O(),o.reject(e)})["finally"](function(){g.stopGlobal("risevision.user.authenticate"),T("authenticated user")});else{var s="user is not authenticated";t.debug(s),o.reject(s),d.clearObj(I.user),g.stopGlobal("risevision.user.authenticate"),T("unauthenticated user")}};return s()["finally"](i),a&&g.startGlobal("risevision.user.authenticate"),o.promise},z=function(e){var a=n.defer();return r.removeAll(),s().then(function(n){e&&(f.logoutFrame.location="https://accounts.google.com/Logout"),n.auth.signOut(),O(),j(),d.clearObj(I.user),p.$broadcast("risevision.user.signedOut"),t.debug("User is signed out."),a.resolve()},function(){a.reject();
}),a.promise},H=function(){return!!I.user.username},K=function(){return null!==I.profile.username&&void 0!==I.profile.username},W=function(n){return e.isDefined(I.roleMap[n])},Y=function(){return f.gapi?f.gapi.auth.getToken():null},J=function(){var n=v.get("risevision.common.userState");n&&(e.extend(I,n),v.remove("risevision.common.userState"),t.debug("userState restored with",n))},X={getUsername:function(){return I.user&&I.user.username||null},getUserEmail:function(){return I.profile.email},getCopyOfProfile:function(n){return n?e.extend({},I.profile):d.follow(I.profile)},getUserPicture:function(){return I.user.picture},hasRole:W,inRVAFrame:function(){return I.inRVAFrame},isRiseAdmin:function(){return W("sa")&&u.isRootCompany()},isRiseStoreAdmin:function(){return W("ba")&&u.isRootCompany()},isUserAdmin:function(){return W("ua")},isPurchaser:function(){return W("pu")},isSeller:u.isSeller,isRiseVisionUser:K,isLoggedIn:H,getAccessToken:Y,checkUsername:function(e){return(e||!1)&&(X.getUsername()||!1)&&e.toUpperCase()===X.getUsername().toUpperCase()},updateUserProfile:function(n){X.checkUsername(n.username)&&(d.clearAndCopy(e.extend({username:I.user.username},n),I.profile),I.roleMap={},I.profile.roles&&I.profile.roles.forEach(function(e){I.roleMap[e]=!0}),p.$broadcast("risevision.user.updated"))},authenticate:I.inRVAFrame?q:B,authenticatePopup:function(){return q(!0)},signOut:z,refreshProfile:D,addEventListenerVisibilityAPI:_,removeEventListenerVisibilityAPI:x,getUserCompanyId:u.getUserCompanyId,getUserCompanyName:u.getUserCompanyName,getSelectedCompanyId:u.getSelectedCompanyId,getSelectedCompanyName:u.getSelectedCompanyName,getSelectedCompanyCountry:u.getSelectedCompanyCountry,getCopyOfUserCompany:u.getCopyOfUserCompany,getCopyOfSelectedCompany:u.getCopyOfSelectedCompany,isSubcompanySelected:u.isSubcompanySelected,isTestCompanySelected:u.isTestCompanySelected,isRootCompany:u.isRootCompany,updateCompanySettings:u.updateCompanySettings,updateUserCompanySettings:u.updateUserCompanySettings,resetCompany:u.resetCompany,switchCompany:u.switchCompany,_restoreState:J,_setUserToken:function(e){I.params=e,I.userToken="dummy"},_persistState:function(){v.set("risevision.common.userState",I)}};return X}])}(angular),function(e){"use strict";e.module("risevision.common.components.util").value("humanReadableError",function(e){var n;return n=e.message?e.message:e.error?e.error.message?e.error.message:e.error:e,JSON.stringify(n)}).factory("dateIsInRange",[function(){return function(e,n,t){var a,o,s=!0;try{n&&(a=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),o=new Date(a[1],parseInt(a[2])-1,a[3],0,0,0,0),s=e>=o),s&&t&&(a=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),o=new Date(a[1],parseInt(a[2])-1,a[3],0,0,0,0),s=e<=o)}catch(i){s=!1}return s}}]).factory("objectHelper",[function(){var n={};return n.follow=function(e){var n=function(){};return n.prototype=e,new n},n.clearObj=function(e){for(var n in e)delete e[n]},n.clearAndCopy=function(t,a){n.clearObj(a),e.extend(a,t)},n}]).factory("getBaseDomain",["$log","$location",function(e,n){var t=function(e){return!!/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)};return function(){var a;if(!a){var o=n.host();if(t(o))a=o;else{var s=o.split(".");a=s.length>1?"appspot"===s[s.length-2]?s.slice(s.length-3).join("."):s.slice(s.length-2).join("."):o}e.debug("baseDomain",a)}return a}}])}(angular),function(){"use strict";angular.module("risevision.common.components.last-modified",[]).directive("lastModified",["$templateCache",function(e){return{restrict:"E",scope:{changeDate:"=",changedBy:"="},template:e.get("last-modified/last-modified.html"),link:function(e){e.$watch("changedBy",function(n){e.changedBy=n?n:"N/A"})}}}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified").filter("username",function(){return function(e){var n=e;return e&&e.indexOf("@")!==-1&&(n=e.substring(0,e.indexOf("@"))),n}})}(),function(e){try{e=angular.module("risevision.common.components.last-modified")}catch(n){e=angular.module("risevision.common.components.last-modified",[])}e.run(["$templateCache",function(e){e.put("last-modified/last-modified.html","<span class=\"text-muted\"><small>Saved {{changeDate | date:'d-MMM-yyyy h:mm a'}} by {{changedBy | username}}</small></span>")}])}(),angular.module("risevision.common.components.search-filter",[]).directive("searchFilter",["$timeout",function(e){return{restrict:"E",scope:{filterConfig:"=",search:"=",doSearch:"="},templateUrl:"search-filter/search-filter.html",link:function(n){n.delay=function(){var n=null;return function(t,a){e.cancel(n),n=e(t,a)}}(),n.reset=function(){n.search.query&&(n.search.query="",n.doSearch())}}}}]),function(e){try{e=angular.module("risevision.common.components.search-filter")}catch(n){e=angular.module("risevision.common.components.search-filter",[])}e.run(["$templateCache",function(e){e.put("search-filter/search-filter.html",'<div class="input-group"><span class="input-group-addon" ng-click="doSearch()"><i class="fa fa-search"></i></span> <input id="{{ filterConfig.id }}" type="text" class="form-control" placeholder="{{ filterConfig.placeholder }}" ng-model="search.query" ng-enter="delay(doSearch, 0)" ng-change="delay(doSearch, 1000)"> <span class="input-group-addon" ng-click="reset()"><i class="fa fa-times"></i></span></div>')}])}(),function(e){"use strict";e.module("risevision.common.components.scrolling-list",["rvScrollEvent"]).value("BaseList",function(e){this.list=[],this.maxCount=e?e:40,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(e,n){this.cursor=n,this.endOfList=e.length<this.maxCount,this.concat(e)}})}(angular),function(e){"use strict";var n=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,t){return{scope:!1,link:function(a,o,s){var i,r,l=e(s.rvScrollEvent),c=o[0],u="scroll",d={x:0,y:0},p=function(){r=function(e){d.x=c.scrollLeft,d.y=c.scrollTop,m(e),g(),f(e,!1)},o.bind(u,r)},m=function(e){i=t.setInterval(function(){d.x===c.scrollLeft&&d.y===c.scrollTop?(t.clearInterval(i),p(),f(e,!0)):(d.x=c.scrollLeft,d.y=c.scrollTop)},n)},g=function(){o.unbind(u,r)},f=function(e,n){a.$apply(function(){l(a,{$event:e,isEndEvent:n})})};p()}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.scrolling-list").directive("scrollingList",["$parse","$compile",function(e,n){return{restrict:"A",replace:!1,terminal:!0,priority:1e3,link:function(t,a,o){var s=e(o.scrollingList);t.handleScroll=function(e,n){n&&e.target.scrollTop&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&s(t)},a.attr("rv-scroll-event","handleScroll($event, isEndEvent)"),a.removeAttr("scrolling-list"),n(a)(t)}}}])}(angular),angular.module("risevision.common.components.stop-event",[]).directive("stopEvent",function(){return{restrict:"A",link:function(e,n,t){n.on(t.stopEvent,function(e){e.stopPropagation()})}}}),function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").factory("segmentAnalytics",["$rootScope","$window","$log","$location",function(e,n,t,a){function o(e){e&&(n.intercomSettings=n.intercomSettings||{},n.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}function s(){e.$on("$viewContentLoaded",function(){r.location!==a.path()&&(r.location=a.path(),r.pageview(r.location))})}var i,r={};n.analytics=n.analytics||[];var l=n.analytics;l.factory=function(e){function o(n,t){"track"===e&&t&&t.length>1&&t[1]&&"object"==typeof t[1]&&(t[1].url=a.host())}return function(){var a=Array.prototype.slice.call(arguments);return o(e,a),a.unshift(e),n.analytics.push(a),t.debug("Segment Tracker",a),n.analytics}},l.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var c=0;c<l.methods.length;c++){var u=l.methods[c];r[u]=l.factory(u)}return r.load=function(e,n){if(e&&!i){o(n),s();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),i=!0}},r}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,n,t){var a={};return a.identify=function(){if(t.getUsername()){var e=t.getCopyOfProfile(),a={email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:""};t.getUserCompanyId()&&(a.companyId=t.getUserCompanyId(),a.companyName=t.getUserCompanyName(),a.company={id:t.getUserCompanyId(),name:t.getUserCompanyName()}),n.identify(t.getUsername(),a)}},a.initialize=function(){e.$on("risevision.user.authorized",function(){a.identify()})},a}])}(angular),function(){"use strict";try{angular.module("risevision.common.config")}catch(e){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/"),angular.module("risevision.widget.common.subscription-status.config",[]).value("IN_RVA_PATH","product/productId/?cid=companyId").value("ACCOUNT_PATH","account?cid=companyId").value("PATH_URL","v1/company/companyId/product/status?pc=").value("AUTH_PATH_URL","v1/widget/auth?cid=companyId&pc=")}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status",["risevision.common.config","risevision.widget.common.subscription-status.config","risevision.widget.common.subscription-status.service","risevision.widget.common","risevision.common.i18n","ngSanitize","ui.bootstrap"])}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("appSubscriptionStatus",["$templateCache","$modal","subscriptionStatusService",function(e,n,t){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",productPrice:"@"},template:e.get("app-subscription-status-template.html"),link:function(e,a,o,s){function i(){e.productCode&&e.productId&&e.companyId&&t.get(e.productCode,e.companyId).then(function(n){n&&(e.subscriptionStatus=n)},function(){})}e.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null},e.$watch("companyId",function(){i()}),s&&e.$watch("subscriptionStatus",function(e){s.$setViewValue(e)}),e.$watch("showStoreModal",function(t){if(t){var a=n.open({templateUrl:"store-iframe-template.html",controller:"StoreModalController",size:"lg",resolve:{productId:function(){return e.productId},companyId:function(){return e.companyId}}});a.result.then(function(){i()},function(){i()})["finally"](function(){e.showStoreModal=!1})}})}}}]).directive("ngDisableRightClick",function(){return function(e,n){n.bind("contextmenu",function(n){e.$apply(function(){n.preventDefault()})})}})}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("subscriptionStatus",["$rootScope","$templateCache","subscriptionStatusService","STORE_URL","ACCOUNT_PATH","IN_RVA_PATH",function(e,n,t,a,o,s){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",expandedFormat:"@",showStoreModal:"=?"},template:n.get("subscription-status-template.html"),link:function(n,i,r,l){function c(){n.productCode&&n.productId&&n.companyId&&t.get(n.productCode,n.companyId).then(function(t){t&&(n.subscriptionStatus&&n.subscriptionStatus.status===t.status||e.$emit("subscription-status:changed",t),n.subscriptionStatus=t)},function(){})}n.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null};var u=function(){n.storeAccountUrl=a+o.replace("companyId",n.companyId),n.storeUrl=a+s.replace("productId",n.productId).replace("companyId",n.companyId)};n.$watch("companyId",function(){c(),u()}),e.$on("refreshSubscriptionStatus",function(e,t){null!==t&&n.subscriptionStatus.statusCode!==t||c()}),l&&n.$watch("subscriptionStatus",function(e){l.$setViewValue(e)})}}}]).filter("to_trusted",["$sce",function(e){return function(n){return e.trustAsHtml(n)}}])}(),angular.module("risevision.widget.common.subscription-status").filter("productTrialDaysToExpiry",["$interpolate","$translate",function(e,n){var t=null,a=null;return n(["subscription-status.expires-today","subscription-status.expires-in"],{days:"{{days}}"}).then(function(n){t=e(n["subscription-status.expires-today"]),a=e(n["subscription-status.expires-in"])}),function(e){var n="";try{var o=864e5,s=new Date(e).getTime()-(new Date).getTime(),i=Math.floor(s/o),r={days:i};n=0===i?null!==t?t(r):"":i>0?null!==a?a(r):"":null!==t?t(r):""}catch(l){n=null!==t?t(r):""}return n}}]),function(){"use strict";angular.module("risevision.widget.common.subscription-status.service",["risevision.common.config","risevision.widget.common.subscription-status.config"]).service("subscriptionStatusService",["$http","$q","STORE_SERVER_URL","PATH_URL","AUTH_PATH_URL",function(e,n,t,a,o){function s(e,n){return Math.floor((n.getTime()-e.getTime())/l)}var i=["On Trial","Trial Expired","Subscribed","Suspended","Cancelled","Free","Not Subscribed","Product Not Found","Company Not Found","Error"],r=["on-trial","trial-expired","subscribed","suspended","cancelled","free","not-subscribed","product-not-found","company-not-found","error"],l=864e5,c=function(a,s){var i=n.defer(),r=t+o.replace("companyId",s)+a;return e.get(r).then(function(e){e&&e.data?i.resolve(e.data.authorized):i.resolve(!1)}),i.promise},u=function(o,l){var c=n.defer(),u=t+a.replace("companyId",l)+o;return e.get(u).then(function(e){if(e&&e.data&&e.data.length){var n=e.data[0];n.plural="";var t=i.indexOf(n.status);t>=0&&(n.statusCode=r[t]),""===n.status?(n.status="N/A",n.statusCode="na",n.subscribed=!1):n.status===i[0]||n.status===i[2]||n.status===i[5]?n.subscribed=!0:n.subscribed=!1,"not-subscribed"===n.statusCode&&n.trialPeriod&&n.trialPeriod>0&&(n.statusCode="trial-available",n.subscribed=!0),n.expiry&&"on-trial"===n.statusCode&&(n.expiry=new Date(n.expiry),n.expiry instanceof Date&&!isNaN(n.expiry.valueOf())&&(n.expiry=s(new Date,n.expiry)),0===n.expiry?n.plural="-zero":n.expiry>1&&(n.plural="-many")),c.resolve(n)}else c.reject("No response")}),c.promise};this.get=function(e,n){return u(e,n).then(function(t){return t.subscribed===!1?c(e,n).then(function(e){return t.subscribed=e,t}):t})}}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("app-subscription-status-template.html",'<a id="app-subscription-status" href=""\n  ng-click="showStoreModal = true" class="store-link">\n    <div class="rate">\n      <strong>${{productPrice}}</strong>\n    </div>\n    <div class="subscribe">\n      <strong ng-if="!subscriptionStatus.subscribed"><span translate="subscription-status.get-subscription"></span></strong>\n      <strong ng-if="subscriptionStatus.subscribed"><span translate="subscription-status.continue-to-app"></span></strong>\n    </div>\n</a>\n')}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("subscription-status-template.html",'<div ng-show="!expandedFormat">\n  <h3 ng-disable-right-click>\n    <span ng-show="subscriptionStatus.statusCode !== \'not-subscribed\'" ng-bind-html="\'subscription-status.\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n  </h3>\n  \n  <span ng-show="subscriptionStatus.statusCode === \'trial-available\'">\n    <button class="btn btn-primary btn-xs" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.start-trial"></span>\n    </button>\n  </span>\n  <span ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <a class="btn btn-primary btn-xs" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="subscription-status.subscribe"></span>\n    </a>\n  </span>\n  <span ng-show="[\'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <a type="button" class="btn btn-primary btn-xs" ng-href="{{storeAccountUrl}}" target="_blank">\n      <span translate="subscription-status.view-account"></span>\n    </a>\n  </span>\n</div>\n\n<div ng-show="expandedFormat">\n  <div class="subscription-status trial" ng-show="subscriptionStatus.statusCode === \'on-trial\'">\n    <span ng-bind-html="\'subscription-status.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="subscription-status.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status expired" ng-show="subscriptionStatus.statusCode === \'trial-expired\'">\n    <span translate="subscription-status.expanded-expired"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="subscription-status.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status cancelled" ng-show="subscriptionStatus.statusCode === \'cancelled\'">\n   <span translate="subscription-status.expanded-cancelled"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank">\n      <span translate="subscription-status.subscribe-now"></span>\n    </a>\n  </div>\n  <div class="subscription-status suspended" ng-show="subscriptionStatus.statusCode === \'suspended\'">\n    <span translate="subscription-status.expanded-suspended"></span>\n    <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeAccountUrl}}" target="_blank">\n      <span translate="subscription-status.view-invoices"></span>\n    </a>\n  </div>\n</div>\n')}])}(),angular.module("risevision.widget.common",[]),angular.module("risevision.widget.common").controller("settingsController",["$scope","settingsSaver","settingsGetter","settingsCloser",function(e,n,t,a){e.settings={params:{},additionalParams:{}},e.alerts=[],e.getAdditionalParam=function(n,t){var a=e.settings.additionalParams[n];return angular.isUndefined(a)?t:a},e.setAdditionalParam=function(n,t){e.settings.additionalParams[n]=t},e.loadAdditionalParams=function(){t.getAdditionalParams().then(function(n){e.settings.additionalParams=n,e.$broadcast("loadAdditionalParams",n)},function(e){alert(e)})},e.setAdditionalParams=function(n,t){e.settings.additionalParams[n]=t},e.saveSettings=function(){e.alerts=[],e.$broadcast("collectAdditionalParams"),n.saveSettings(e.settings).then(function(){},function(n){e.alerts=n.alerts})},e.closeSettings=function(){a.closeSettings().then(function(){},function(n){e.alerts=n.alerts})},e.settings.params=t.getParams(),e.loadAdditionalParams()}]).directive("scrollOnAlerts",function(){return{restrict:"A",scope:!1,link:function(e,n){e.$watchCollection("alerts",function(e,t){e.length>0&&0===t.length&&$("body").animate({scrollTop:n.offset().top},"fast")})}}}),angular.module("risevision.widget.common").constant("STORAGE_FILE_URL_BASE","storage.googleapis.com/risemedialibrary-").constant("STORAGE_FOLDER_URL_BASE","googleapis.com/storage/").factory("commonSettings",["$log","STORAGE_FILE_URL_BASE","STORAGE_FOLDER_URL_BASE",function(e,n,t){var a={getStorageUrlData:function(e){function a(e){return e.indexOf(n)!==-1?"file":e.indexOf(t)!==-1?"folder":null}function o(e){var n=e.split("risemedialibrary-");return n[1].slice(0,n[1].indexOf("/"))}var s,i,r,l,c={};if("file"===a(e))s=e.split(n)[1],s=decodeURIComponent(s.slice(s.indexOf("/")+1)),i=s.split("/"),c.companyId=o(e),c.fileName=i.pop(),c.folder=i.length>0?i.join("/"):"",""!==c.folder&&(c.folder+="/");else if("folder"===a(e)){r=e.split("?");for(var u=0;u<r.length;u++)if(l=r[u].split("="),"prefix"===l[0]&&"undefined"!=typeof l[1]&&""!==l[1]){c.companyId=o(e),c.folder=decodeURIComponent(l[1]),c.fileName="";break}}return c}};return a}]),angular.module("risevision.widget.common").factory("gadgetsApi",["$window",function(e){return e.gadgets}]),angular.module("risevision.widget.common").factory("googleFontLoader",["$http","angularLoad",function(e,n){function t(){for(var e="",t="",a="",s=[],i=!1,r=",sans-serif;",l="//fonts.googleapis.com/css?family=",c=["Buda","Coda Caption","Open Sans Condensed","UnifrakturCook","Molle"],u=0;u<o.length;u++)e=o[u],c.indexOf(e)===-1&&(a=l+e,n.loadCSS(a),s.push(a),/\s/.test(e)&&(i=!0),t+=i?e+"='"+e+"'"+r:e+"="+e+r);return{fonts:t,urls:s}}var a={},o=[];return a.getGoogleFonts=function(){return 0===o.length?e.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBXxVK_IOV7LNQMuVVo_l7ZvN53ejN86zY&sort=alpha",{cache:!0}).then(function(e){var n=null;if(e.data&&e.data.items){for(var a=0,s=e.data.items.length;a<s;a++)n=e.data.items[a],n.subsets&&1===n.subsets.length&&"khmer"===n.subsets[0].toLowerCase()||o.push(n.family);return t()}}):t()},a.getFontsUsed=function(e){var n=[];return angular.forEach(o,function(t){e.indexOf(t)!==-1&&n.push(t)}),n},a}]),angular.module("risevision.widget.common").service("i18nLoader",["$window","$q",function(e,n){var t=n.defer();e.i18n.init({fallbackLng:"en",resGetPath:"locales/__ns_____lng__.json"},function(){t.resolve(e.i18n)}),this.get=function(){return t.promise}}]),angular.module("risevision.widget.common").factory("imageValidator",["$q",function(e){var n={isImage:function(n){var t=e.defer(),a=new Image;return a.onload=function(){t.resolve(!0)},a.onerror=function(){t.resolve(!1)},a.src=n,t.promise}};return n}]),angular.module("risevision.widget.common").service("settingsSaver",["$q","$log","gadgetsApi","settingsParser",function(e,n,t,a){function o(e){var n=angular.copy(e);return delete n.params.id,delete n.params.companyId,delete n.params.rsW,delete n.params.rsH,n}this.saveSettings=function(s,i){var r=e.defer(),l=[],c="";s=o(s),i&&(l=i(s)),l.length>0&&(n.debug("Validation failed.",l),r.reject({alerts:l})),s.params.hasOwnProperty("layoutURL")&&(c+=s.params.layoutURL+"?",delete s.params.layoutURL),c+=a.encodeParams(s.params);var u=a.encodeAdditionalParams(s.additionalParams);return t.rpc.call("","rscmd_saveSettings",function(e){n.debug("encoded settings",JSON.stringify(e)),n.debug("Settings saved. ",s),r.resolve(e)},{params:c,additionalParams:u}),r.promise}}]).service("settingsGetter",["$q","gadgetsApi","$log","settingsParser","$window","defaultSettings",function(e,n,t,a,o,s){this.getAdditionalParams=function(){var o=e.defer(),i=s.additionalParams||{};return n.rpc.call("","rscmd_getAdditionalParams",function(e){e=e?a.parseAdditionalParams(e):{},t.debug("getAdditionalParams returns ",e),o.resolve($.extend(!0,i,e))}),o.promise},this.getParams=function(){var e=s.params||{};return angular.extend(e,a.parseParams(o.location.search))}}]).service("settingsParser",[function(){function e(e){return 0===e.indexOf("up_")?e.slice(3):null}this.parseAdditionalParams=function(e){return e?JSON.parse(e):{}},this.encodeAdditionalParams=function(e){return JSON.stringify(e)},this.encodeParams=function(e){var n=[];for(var t in e)if(e.hasOwnProperty(t)){var a;a="object"==typeof e[t]?JSON.stringify(e[t]):e[t],n.push("up_"+encodeURIComponent(t)+"="+encodeURIComponent(a))}return n.join("&")},this.parseParams=function(n){"?"===n[0]&&(n=n.slice(1));for(var t={},a=n.split("&"),o=0;o<a.length;o++){var s=a[o].split("="),i=e(decodeURIComponent(s[0]));if(i)try{t[i]=JSON.parse(decodeURIComponent(s[1]))}catch(r){t[i]=decodeURIComponent(s[1])}}return t}}]).service("settingsCloser",["$q","$log","gadgetsApi",function(e,n,t){this.closeSettings=function(){var n=e.defer();return t.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise}}]).value("defaultSettings",{}),function(e){"use strict";e.module("risevision.widget.common.visualization",[]).factory("visualizationApi",["$q","$window",function(e,n){var t,a=e.defer(),o={get:function(){return t||(t=a.promise,n.google.visualization?a.resolve(n.google.visualization):n.google.setOnLoadCallback(function(){a.resolve(n.google.visualization)})),t}};return o}])}(angular),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof exports?module.exports=n():n()}(this,function(){function e(e){"use strict";var n=e.storageKey(),t=e.storage(),a=function(){var a=e.preferredLanguage();angular.isString(a)?e.use(a):t.put(n,e.use())};a.displayName="fallbackFromIncorrectStorageValue",t?t.get(n)?e.use(t.get(n))["catch"](a):a():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function n(){"use strict";var e,n,t,a=null,o=!1,s=!1;t={sanitize:function(e,n){return"text"===n&&(e=r(e)),e},escape:function(e,n){return"text"===n&&(e=i(e)),e},sanitizeParameters:function(e,n){return"params"===n&&(e=c(e,r)),e},escapeParameters:function(e,n){return"params"===n&&(e=c(e,i)),e},sce:function(e,n,t){return"text"===n?e=l(e):"params"===n&&"filter"!==t&&(e=c(e,i)),e},sceParameters:function(e,n){return"params"===n&&(e=c(e,l)),e}},t.escaped=t.escapeParameters,this.addStrategy=function(e,n){return t[e]=n,this},this.removeStrategy=function(e){return delete t[e],this},this.useStrategy=function(e){return o=!0,a=e,this},this.$get=["$injector","$log",function(i,r){var l={},c=function(e,n,a,o){return angular.forEach(o,function(o){if(angular.isFunction(o))e=o(e,n,a);else if(angular.isFunction(t[o]))e=t[o](e,n,a);else{if(!angular.isString(t[o]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+o+"'");if(!l[t[o]])try{l[t[o]]=i.get(t[o])}catch(s){throw l[t[o]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+o+"'")}e=l[t[o]](e,n,a)}}),e},u=function(){o||s||(r.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),s=!0)};return i.has("$sanitize")&&(e=i.get("$sanitize")),i.has("$sce")&&(n=i.get("$sce")),{useStrategy:function(e){return function(n){e.useStrategy(n)}}(this),sanitize:function(e,n,t,o){if(a||u(),t||null===t||(t=a),!t)return e;o||(o="service");var s=angular.isArray(t)?t:[t];return c(e,n,o,s)}}}];var i=function(e){var n=angular.element("<div></div>");return n.text(e),n.html()},r=function(n){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(n)},l=function(e){if(!n)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return n.trustAsHtml(e)},c=function(e,n,t){if(angular.isDate(e))return e;if(angular.isObject(e)){var a=angular.isArray(e)?[]:{};if(t){if(t.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else t=[];return t.push(e),angular.forEach(e,function(e,o){angular.isFunction(e)||(a[o]=c(e,n,t))}),t.splice(-1,1),a}return angular.isNumber(e)?e:n(e)}}function t(e,n,t,a){"use strict";var o,s,i,r,l,c,u,d,p,m,g,f,h,v,y,b,C={},S=[],$=e,w=[],k="translate-cloak",A=!1,I=!1,U=".",R=!1,T=!1,E=0,N=!0,L="default",_={"default":function(e){return(e||"").split("-").join("_")},java:function(e){var n=(e||"").split("-").join("_"),t=n.split("_");return t.length>1?t[0].toLowerCase()+"_"+t[1].toUpperCase():n},bcp47:function(e){var n=(e||"").split("_").join("-"),t=n.split("-");return t.length>1?t[0].toLowerCase()+"-"+t[1].toUpperCase():n},"iso639-1":function(e){var n=(e||"").split("_").join("-"),t=n.split("-");return t[0].toLowerCase()}},x="2.13.1",P=function(){if(angular.isFunction(a.getLocale))return a.getLocale();var e,t,o=n.$get().navigator,s=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(o.languages))for(e=0;e<o.languages.length;e++)if(t=o.languages[e],t&&t.length)return t;for(e=0;e<s.length;e++)if(t=o[s[e]],t&&t.length)return t;return null};P.displayName="angular-translate/service: getFirstBrowserLanguage";var O=function(){var e=P()||"";return _[L]&&(e=_[L](e)),e};O.displayName="angular-translate/service: getLocale";var M=function(e,n){for(var t=0,a=e.length;t<a;t++)if(e[t]===n)return t;return-1},F=function(){return this.toString().replace(/^\s+|\s+$/g,"")},j=function(e){if(e){for(var n=[],t=angular.lowercase(e),a=0,o=S.length;a<o;a++)n.push(angular.lowercase(S[a]));if(M(n,t)>-1)return e;if(s){var i;for(var r in s)if(s.hasOwnProperty(r)){var l=!1,c=Object.prototype.hasOwnProperty.call(s,r)&&angular.lowercase(r)===angular.lowercase(e);if("*"===r.slice(-1)&&(l=r.slice(0,-1)===e.slice(0,r.length-1)),(c||l)&&(i=s[r],M(n,angular.lowercase(i))>-1))return i}}var u=e.split("_");return u.length>1&&M(n,angular.lowercase(u[0]))>-1?u[0]:void 0}},D=function(e,n){if(!e&&!n)return C;if(e&&!n){if(angular.isString(e))return C[e]}else angular.isObject(C[e])||(C[e]={}),angular.extend(C[e],V(n));return this};this.translations=D,this.cloakClassName=function(e){return e?(k=e,this):k},this.nestedObjectDelimeter=function(e){return e?(U=e,this):U};var V=function(e,n,t,a){var o,s,i,r;n||(n=[]),t||(t={});for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r=e[o],angular.isObject(r)?V(r,n.concat(o),t,o):(s=n.length?""+n.join(U)+U+o:o,n.length&&o===a&&(i=""+n.join(U),t[i]="@:"+s),t[s]=r));return t};V.displayName="flatObject",this.addInterpolation=function(e){return w.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return m=e,this},this.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},this.preferredLanguage=function(e){return e?(G(e),this):o};var G=function(e){return e&&(o=e),o};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(h=e,this):h},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return B(e),this};var B=function(e){return e?(angular.isString(e)?(r=!0,i=[e]):angular.isArray(e)&&(r=!1,i=e),angular.isString(o)&&M(i,o)<0&&i.push(o),this):r?i[0]:i};this.use=function(e){if(e){if(!C[e]&&!g)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return l=e,this}return l},this.resolveClientLocale=function(){return O()};var q=function(e){return e?($=e,this):d?d+$:$};this.storageKey=q,this.useUrlLoader=function(e,n){return this.useLoader("$translateUrlLoader",angular.extend({url:e},n))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,n){return g=e,f=n||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return u=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return p=e,this},this.usePostCompiling=function(e){return A=!!e,this},this.forceAsyncReload=function(e){return I=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},L=e.standard,this},this.determinePreferredLanguage=function(e){var n=e&&angular.isFunction(e)?e():O();return o=S.length?j(n)||n:n,
this},this.registerAvailableLanguageKeys=function(e,n){return e?(S=e,n&&(s=n),this):S},this.useLoaderCache=function(e){return e===!1?y=void 0:e===!0?y=!0:"undefined"==typeof e?y="$translationCache":e&&(y=e),this},this.directivePriority=function(e){return void 0===e?E:(E=e,this)},this.statefulFilter=function(e){return void 0===e?N:(N=e,this)},this.postProcess=function(e){return b=e?e:void 0,this},this.keepContent=function(e){return T=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,n,t,a){var s,d,L,_=n.get(m||"$translateDefaultInterpolation"),P=!1,z={},H={},K=function(e,n,t,r,c){!l&&o&&(l=o);var p=c&&c!==l?j(c)||c:l;if(c&&ue(c),angular.isArray(e)){var m=function(e){for(var o={},s=[],i=function(e){var s=a.defer(),i=function(n){o[e]=n,s.resolve([e,n])};return K(e,n,t,r,c).then(i,i),s.promise},l=0,u=e.length;l<u;l++)s.push(i(e[l]));return a.all(s).then(function(){return o})};return m(e)}var g=a.defer();e&&(e=F.apply(e));var f=function(){var e=o?H[o]:H[p];if(d=0,u&&!e){var n=s.get($);if(e=H[n],i&&i.length){var t=M(i,n);d=0===t?1:0,M(i,o)<0&&i.push(o)}}return e}();if(f){var h=function(){c||(p=l),ie(e,n,t,r,p).then(g.resolve,g.reject)};h.displayName="promiseResolved",f["finally"](h)}else ie(e,n,t,r,p).then(g.resolve,g.reject);return g.promise},W=function(e){return h&&(e=[h,e].join(" ")),v&&(e=[e,v].join(" ")),e},Y=function(e){l=e,u&&s.put(K.storageKey(),l),t.$emit("$translateChangeSuccess",{language:e}),_.setLocale(l);var n=function(e,n){z[n].setLocale(l)};n.displayName="eachInterpolatorLocaleSetter",angular.forEach(z,n),t.$emit("$translateChangeEnd",{language:e})},J=function(e){if(!e)throw"No language key specified for loading.";var o=a.defer();t.$emit("$translateLoadingStart",{language:e}),P=!0;var s=y;"string"==typeof s&&(s=n.get(s));var i=angular.extend({},f,{key:e,$http:angular.extend({},{cache:s},f.$http)}),r=function(n){var a={};t.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(n)?angular.forEach(n,function(e){angular.extend(a,V(e))}):angular.extend(a,V(n)),P=!1,o.resolve({key:e,table:a}),t.$emit("$translateLoadingEnd",{language:e})};r.displayName="onLoaderSuccess";var l=function(e){t.$emit("$translateLoadingError",{language:e}),o.reject(e),t.$emit("$translateLoadingEnd",{language:e})};return l.displayName="onLoaderError",n.get(g)(i).then(r,l),o.promise};if(u&&(s=n.get(u),!s.get||!s.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if(w.length){var X=function(e){var t=n.get(e);t.setLocale(o||l),z[t.getInterpolationIdentifier()]=t};X.displayName="interpolationFactoryAdder",angular.forEach(w,X)}var Z=function(e){var n=a.defer();if(Object.prototype.hasOwnProperty.call(C,e))n.resolve(C[e]);else if(H[e]){var t=function(e){D(e.key,e.table),n.resolve(e.table)};t.displayName="translationTableResolver",H[e].then(t,n.reject)}else n.reject();return n.promise},Q=function(e,n,t,o){var s=a.defer(),i=function(a){if(Object.prototype.hasOwnProperty.call(a,n)){o.setLocale(e);var i=a[n];if("@:"===i.substr(0,2))Q(e,i.substr(2),t,o).then(s.resolve,s.reject);else{var r=o.interpolate(a[n],t,"service");r=ce(n,a[n],r,t,e),s.resolve(r)}o.setLocale(l)}else s.reject()};return i.displayName="fallbackTranslationResolver",Z(e).then(i,s.reject),s.promise},ee=function(e,n,t,a,o){var s,i=C[e];if(i&&Object.prototype.hasOwnProperty.call(i,n)){if(a.setLocale(e),s=a.interpolate(i[n],t,"filter",o),s=ce(n,i[n],s,t,e,o),!angular.isString(s)&&angular.isFunction(s.$$unwrapTrustedValue)){var r=s.$$unwrapTrustedValue();if("@:"===r.substr(0,2))return ee(e,r.substr(2),t,a,o)}else if("@:"===s.substr(0,2))return ee(e,s.substr(2),t,a,o);a.setLocale(l)}return s},ne=function(e,t,a,o){return p?n.get(p)(e,l,t,a,o):e},te=function(e,n,t,o,s){var r=a.defer();if(e<i.length){var l=i[e];Q(l,n,t,o).then(function(e){r.resolve(e)},function(){return te(e+1,n,t,o,s).then(r.resolve,r.reject)})}else if(s)r.resolve(s);else{var c=ne(n,t,s);p&&c?r.resolve(c):r.reject(W(n))}return r.promise},ae=function(e,n,t,a,o){var s;if(e<i.length){var r=i[e];s=ee(r,n,t,a,o),s||""===s||(s=ae(e+1,n,t,a))}return s},oe=function(e,n,t,a){return te(L>0?L:d,e,n,t,a)},se=function(e,n,t,a){return ae(L>0?L:d,e,n,t,a)},ie=function(e,n,t,o,s){var r=a.defer(),l=s?C[s]:C,c=t?z[t]:_;if(l&&Object.prototype.hasOwnProperty.call(l,e)){var u=l[e];if("@:"===u.substr(0,2))K(u.substr(2),n,t,o,s).then(r.resolve,r.reject);else{var d=c.interpolate(u,n,"service");d=ce(e,u,d,n,s),r.resolve(d)}}else{var m;p&&!P&&(m=ne(e,n,o)),s&&i&&i.length?oe(e,n,c,o).then(function(e){r.resolve(e)},function(e){r.reject(W(e))}):p&&!P&&m?o?r.resolve(o):r.resolve(m):o?r.resolve(o):r.reject(W(e))}return r.promise},re=function(e,n,t,a,o){var s,r=a?C[a]:C,l=_;if(z&&Object.prototype.hasOwnProperty.call(z,t)&&(l=z[t]),r&&Object.prototype.hasOwnProperty.call(r,e)){var c=r[e];"@:"===c.substr(0,2)?s=re(c.substr(2),n,t,a,o):(s=l.interpolate(c,n,"filter",o),s=ce(e,c,s,n,a,o))}else{var u;p&&!P&&(u=ne(e,n,o)),a&&i&&i.length?(d=0,s=se(e,n,l,o)):s=p&&!P&&u?u:W(e)}return s},le=function(e){c===e&&(c=void 0),H[e]=void 0},ce=function(e,t,a,o,s,i){var r=b;return r&&("string"==typeof r&&(r=n.get(r)),r)?r(e,t,a,o,s,i):a},ue=function(e){C[e]||!g||H[e]||(H[e]=J(e).then(function(e){return D(e.key,e.table),e}))};K.preferredLanguage=function(e){return e&&G(e),o},K.cloakClassName=function(){return k},K.nestedObjectDelimeter=function(){return U},K.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(B(e),g&&i&&i.length)for(var n=0,t=i.length;n<t;n++)H[i[n]]||(H[i[n]]=J(i[n]));K.use(K.use())}return r?i[0]:i},K.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var n=M(i,e);n>-1&&(L=n)}else L=0},K.proposedLanguage=function(){return c},K.storage=function(){return s},K.negotiateLocale=j,K.use=function(e){if(!e)return l;var n=a.defer();t.$emit("$translateChangeStart",{language:e});var o=j(e);return S.length>0&&!o?a.reject(e):(o&&(e=o),c=e,!I&&C[e]||!g||H[e]?H[e]?H[e].then(function(e){return c===e.key&&Y(e.key),n.resolve(e.key),e},function(e){return!l&&i&&i.length>0&&i[0]!==e?K.use(i[0]).then(n.resolve,n.reject):n.reject(e)}):(n.resolve(e),Y(e)):(H[e]=J(e).then(function(t){return D(t.key,t.table),n.resolve(t.key),c===e&&Y(t.key),t},function(e){return t.$emit("$translateChangeError",{language:e}),n.reject(e),t.$emit("$translateChangeEnd",{language:e}),a.reject(e)}),H[e]["finally"](function(){le(e)})),n.promise)},K.resolveClientLocale=function(){return O()},K.storageKey=function(){return q()},K.isPostCompilingEnabled=function(){return A},K.isForceAsyncReloadEnabled=function(){return I},K.isKeepContent=function(){return T},K.refresh=function(e){function n(){s.resolve(),t.$emit("$translateRefreshEnd",{language:e})}function o(){s.reject(),t.$emit("$translateRefreshEnd",{language:e})}if(!g)throw new Error("Couldn't refresh translation table, no loader registered!");var s=a.defer();if(t.$emit("$translateRefreshStart",{language:e}),e)if(C[e]){var r=function(t){return D(t.key,t.table),e===l&&Y(l),n(),t};r.displayName="refreshPostProcessor",J(e).then(r,o)}else o();else{var c=[],u={};if(i&&i.length)for(var d=0,p=i.length;d<p;d++)c.push(J(i[d])),u[i[d]]=!0;l&&!u[l]&&c.push(J(l));var m=function(e){C={},angular.forEach(e,function(e){D(e.key,e.table)}),l&&Y(l),n()};m.displayName="refreshPostProcessor",a.all(c).then(m,o)}return s.promise},K.instant=function(e,n,t,a,s){var r=a&&a!==l?j(a)||a:l;if(null===e||angular.isUndefined(e))return e;if(a&&ue(a),angular.isArray(e)){for(var c={},u=0,d=e.length;u<d;u++)c[e[u]]=K.instant(e[u],n,t,a,s);return c}if(angular.isString(e)&&e.length<1)return e;e&&(e=F.apply(e));var m,g=[];o&&g.push(o),r&&g.push(r),i&&i.length&&(g=g.concat(i));for(var f=0,y=g.length;f<y;f++){var b=g[f];if(C[b]&&"undefined"!=typeof C[b][e]&&(m=re(e,n,t,r,s)),"undefined"!=typeof m)break}if(!m&&""!==m)if(h||v)m=W(e);else{m=_.interpolate(e,n,"filter",s);var S;p&&!P&&(S=ne(e,n,s)),p&&!P&&S&&(m=S)}return m},K.versionInfo=function(){return x},K.loaderCache=function(){return y},K.directivePriority=function(){return E},K.statefulFilter=function(){return N},K.isReady=function(){return R};var de=a.defer();de.promise.then(function(){R=!0}),K.onReady=function(e){var n=a.defer();return angular.isFunction(e)&&n.promise.then(e),R?n.resolve():de.promise.then(n.resolve),n.promise},K.getAvailableLanguageKeys=function(){return S.length>0?S:null},K.getTranslationTable=function(e){return e=e||K.use(),e&&C[e]?angular.copy(C[e]):null};var pe=t.$on("$translateReady",function(){de.resolve(),pe(),pe=null}),me=t.$on("$translateChangeEnd",function(){de.resolve(),me(),me=null});if(g){if(angular.equals(C,{})&&K.use()&&K.use(K.use()),i&&i.length)for(var ge=function(e){return D(e.key,e.table),t.$emit("$translateChangeEnd",{language:e.key}),e},fe=0,he=i.length;fe<he;fe++){var ve=i[fe];!I&&C[ve]||(H[ve]=J(ve).then(ge))}}else t.$emit("$translateReady",{language:K.use()});return K}]}function a(e,n){"use strict";var t,a={},o="default";return a.setLocale=function(e){t=e},a.getInterpolationIdentifier=function(){return o},a.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},a.interpolate=function(t,a,o,s){a=a||{},a=n.sanitize(a,"params",s,o);var i;return angular.isNumber(t)?i=""+t:angular.isString(t)?(i=e(t)(a),i=n.sanitize(i,"text",s,o)):i="",i},a}function o(e,n,t,a,o){"use strict";var i=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(r,l){var c=l.translateValues?l.translateValues:void 0,u=l.translateInterpolation?l.translateInterpolation:void 0,d=r[0].outerHTML.match(/translate-value-+/i),p="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",m="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(r,g,f){r.interpolateParams={},r.preText="",r.postText="",r.translateNamespace=s(r);var h={},v=function(e,n,t){if(n.translateValues&&angular.extend(e,a(n.translateValues)(r.$parent)),d)for(var o in t)if(Object.prototype.hasOwnProperty.call(n,o)&&"translateValue"===o.substr(0,14)&&"translateValues"!==o){var s=angular.lowercase(o.substr(14,1))+o.substr(15);e[s]=t[o]}},y=function(e){if(angular.isFunction(y._unwatchOld)&&(y._unwatchOld(),y._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var t=i.apply(g.text()),a=t.match(p);if(angular.isArray(a)){r.preText=a[1],r.postText=a[3],h.translate=n(a[2])(r.$parent);var o=t.match(m);angular.isArray(o)&&o[2]&&o[2].length&&(y._unwatchOld=r.$watch(o[2],function(e){h.translate=e,k()}))}else h.translate=t?t:void 0}else h.translate=e;k()},b=function(e){f.$observe(e,function(n){h[e]=n,k()})};v(r.interpolateParams,f,l);var C=!0;f.$observe("translate",function(e){"undefined"==typeof e?y(""):""===e&&C||(h.translate=e,k()),C=!1});for(var S in f)f.hasOwnProperty(S)&&"translateAttr"===S.substr(0,13)&&S.length>13&&b(S);if(f.$observe("translateDefault",function(e){r.defaultText=e,k()}),c&&f.$observe("translateValues",function(e){e&&r.$parent.$watch(function(){angular.extend(r.interpolateParams,a(e)(r.$parent))})}),d){var $=function(e){f.$observe(e,function(n){var t=angular.lowercase(e.substr(14,1))+e.substr(15);r.interpolateParams[t]=n})};for(var w in f)Object.prototype.hasOwnProperty.call(f,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&$(w)}var k=function(){for(var e in h)h.hasOwnProperty(e)&&void 0!==h[e]&&A(e,h[e],r,r.interpolateParams,r.defaultText,r.translateNamespace)},A=function(n,t,a,o,s,i){t?(i&&"."===t.charAt(0)&&(t=i+t),e(t,o,u,s,a.translateLanguage).then(function(e){I(e,a,!0,n)},function(e){I(e,a,!1,n)})):I(t,a,!1,n)},I=function(n,a,o,s){if(o||"undefined"!=typeof a.defaultText&&(n=a.defaultText),"translate"===s){(o||!o&&!e.isKeepContent()&&"undefined"==typeof f.translateKeepContent)&&g.empty().append(a.preText+n+a.postText);var i=e.isPostCompilingEnabled(),r="undefined"!=typeof l.translateCompile,c=r&&"false"!==l.translateCompile;(i&&!r||c)&&t(g.contents())(a)}else{var u=f.$attr[s];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),g.attr(u,n)}};(c||d||f.translateDefault)&&r.$watch("interpolateParams",k,!0),r.$on("translateLanguageChanged",k);var U=o.$on("$translateChangeSuccess",k);g.text().length?y(f.translate?f.translate:""):f.translate&&y(f.translate),k(),r.$on("$destroy",U)}}}}function s(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?s(e.$parent):void 0}function i(e,n){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(t,a,o){var s,i,l={},c=function(){angular.forEach(s,function(n,s){n&&(l[s]=!0,t.translateNamespace&&"."===n.charAt(0)&&(n=t.translateNamespace+n),e(n,i,o.translateInterpolation,void 0,t.translateLanguage).then(function(e){a.attr(s,e)},function(e){a.attr(s,e)}))}),angular.forEach(l,function(e,n){s[n]||(a.removeAttr(n),delete l[n])})};r(t,o.translateAttr,function(e){s=e},c),r(t,o.translateValues,function(e){i=e},c),o.translateValues&&t.$watch(o.translateValues,c,!0),t.$on("translateLanguageChanged",c);var u=n.$on("$translateChangeSuccess",c);c(),t.$on("$destroy",u)}}}function r(e,n,t,a){"use strict";n&&("::"===n.substr(0,2)?n=n.substr(2):e.$watch(n,function(e){t(e),a()},!0),t(e.$eval(n)))}function l(e,n){"use strict";return{compile:function(t){var a=function(){t.addClass(e.cloakClassName())},o=function(){t.removeClass(e.cloakClassName())};return e.onReady(function(){o()}),a(),function(t,s,i){i.translateCloak&&i.translateCloak.length&&(i.$observe("translateCloak",function(n){e(n).then(o,a)}),n.$on("$translateChangeSuccess",function(){e(i.translateCloak).then(o,a)}))}}}}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,n,t){e.translateNamespace=s(e),e.translateNamespace&&"."===t.translateNamespace.charAt(0)?e.translateNamespace+=t.translateNamespace:e.translateNamespace=t.translateNamespace}}}}}function s(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?s(e.$parent):void 0}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,n,t){t.$observe("translateLanguage",function(n){e.translateLanguage=n}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function d(e,n){"use strict";var t=function(t,a,o,s){return angular.isObject(a)||(a=e(a)(this)),n.instant(t,a,o,s)};return n.statefulFilter()&&(t.$stateful=!0),t}function p(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],a.$inject=["$interpolate","$translateSanitization"],o.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],i.$inject=["$translate","$rootScope"],l.$inject=["$translate","$rootScope"],d.$inject=["$parse","$translate"],p.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",n),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",a),a.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",o),o.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",i),i.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",l),l.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",c),c.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",u),u.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",d),d.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",p),p.displayName="$translationCache","pascalprecht.translate"}),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof exports?module.exports=n():n()}(this,function(){function e(e,n){"use strict";return function(t){if(!(t&&(angular.isArray(t.files)||angular.isString(t.prefix)&&angular.isString(t.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");t.files||(t.files=[{prefix:t.prefix,suffix:t.suffix}]);for(var a=function(a){if(!a||!angular.isString(a.prefix)||!angular.isString(a.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var o=[a.prefix,t.key,a.suffix].join("");return angular.isObject(t.fileMap)&&t.fileMap[o]&&(o=t.fileMap[o]),n(angular.extend({url:o,method:"GET",params:""},t.$http)).then(function(e){return e.data},function(){return e.reject(t.key)})},o=[],s=t.files.length,i=0;i<s;i++)o.push(a({prefix:t.files[i].prefix,key:t.key,suffix:t.files[i].suffix}));return e.all(o).then(function(e){for(var n=e.length,t={},a=0;a<n;a++)for(var o in e[a])t[o]=e[a][o];return t})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,n){function t(e,a){n(angular.extend({url:[e.prefix,e.key.toLowerCase(),e.suffix].join(""),method:"GET",params:""},e.$http)).then(function(e){a.resolve(e.data)},function(){if(e.key.indexOf("_")>=0){var n=e.key.substr(0,e.key.lastIndexOf("_")),o=angular.extend({},e,{key:n});t(o,a)}else a.resolve("{}")})}return function(n){if(!n||!angular.isString(n.prefix)||!angular.isString(n.suffix))throw new Error('Couldn"t load static files, no prefix or suffix specified!');var a=e.defer();return t(n,a),a.promise}}]),angular.module("risevision.common.i18n",["pascalprecht.translate","risevision.common.i18n.config"]).config(["$translateProvider","LOCALES_PREFIX","LOCALES_SUFIX",function(e,n,t){e.useStaticFilesLoader({prefix:n,suffix:t}),e.determinePreferredLanguage().fallbackLanguage("en").useSanitizeValueStrategy(null)}]);