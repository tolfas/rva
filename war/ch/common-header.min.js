!function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons-menu.html",'<ul>\n  <li>\n    <div class="menu-box pull-right">\n      <a href="https://store.risevision.com/" target="_blank" link-cid>\n        <svg-icon p="riseStore"></svg-icon>\n        <span>Store</span>\n      </a>\n    </div>\n    \n    <div class="menu-box pull-right">\n      <a href="https://rva.risevision.com/#PRESENTATIONS" target="_blank" link-cid>\n        <svg-icon p="riseEditor"></svg-icon>\n        <span>Editor</span>\n      </a>\n    </div>\n    \n  </li>\n  <li>\n    <div class="menu-box pull-left">\n      <a href="https://storage.risevision.com/" target="_blank" link-cid>\n        <svg-icon p="riseStorage"></svg-icon>\n        <span>Storage</span>\n      </a>\n    </div>\n    \n    <div class="menu-box pull-left">\n      <a href="https://rva.risevision.com/#DISPLAYS" target="_blank" link-cid>\n        <svg-icon p="riseDisplays"></svg-icon>\n        <span>Displays</span>\n      </a>\n    </div>\n    \n  </li>\n  <li>\n    <div class="menu-box pull-left">\n      <a href="https://rva.risevision.com/#SCHEDULES" target="_blank" link-cid>\n        <svg-icon p="riseSchedules"></svg-icon>\n        <span>Schedules</span>\n      </a>\n    </div>\n    \n    <div class="menu-box pull-right">\n      <a href="https://support.risevision.com/#/" target="_blank" link-cid>\n        <svg-icon p="riseSupport"></svg-icon>\n        <span>Support</span>\n      </a>\n    </div>\n  </li>\n  <li>\n    <div class="menu-box pull-left">\n      <a href="https://community.risevision.com/rise_vision_inc" target="_blank">\n        <svg-icon p="riseCommunity"></svg-icon>\n        <span>Community</span>\n      </a>\n    </div>\n    <div class="menu-box pull-right">\n      <a href="https://help.risevision.com/" target="_blank" link-cid>\n        <svg-icon p="riseDocumentation"></svg-icon>\n        <span>Documentation</span>\n      </a>\n    </div>\n  </li>\n  <li>\n    <div class="menu-box pull-left">\n      <a href="https://developer.risevision.com/" target="_blank" link-cid>\n        <svg-icon p="riseDevelopers"></svg-icon>\n        <span>Developer</span>\n      </a>\n    </div>\n    <div class="menu-box pull-right">\n      <a href="https://www.risevision.com/about-us/#" target="_blank" link-cid>\n        <svg-icon p="riseLogo"></svg-icon>\n        <span>About</span>\n      </a>\n    </div>\n  </li>\n</ul>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons.html",'<li dropdown class="dropdown hidden-xs">\n  <a href="" dropdown-toggle class="dropdown-toggle"><i class="fa fa-th"></i></a>\n  <div class="dropdown-menu app-navigation" role="menu">\n    <ng-include \n      replace-include\n      src="\'app-nav-buttons-menu.html\'">\n    </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li class="visible-xs-inline-block" >\n  <a href="" class="company-buttons-icon-mobile"\n  action-sheet="\'app-nav-buttons-menu.html\'"\n  action-sheet-class="app-navigation">\n    <i class="fa fa-th"></i>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons-menu.html",'<company-buttons\n  ng-show="isRiseVisionUser"\n  ng-controller="CompanyButtonsCtrl"\n></company-buttons>\n\n<ul>\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="userSettings()" class="user-settings-button action">\n      <i class="fa fa-user"></i>\n      <span class="item-name">User Settings</span>\n    </a>\n  </li>\n\n  <li class="dropdown-footer text-right" ng-show="isLoggedIn">\n    <button class="sign-out-button btn btn-sm btn-default" ng-click="logout()">Sign Out <i class="fa fa-sign-out"></i>\n  </li>\n</ul>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons.html",'<!-- Desktop and tablet -->\n<li\n  ng-show="isLoggedIn && !isRiseVisionUser && !undetermined && !loading">\n  <button type="button" href="" ng-click="register()"\n    class="register-user-menu-button action top-auth-button">\n    Create Account\n  </a>\n</li>\n<li\n  dropdown\n  class="dropdown user-profile-dropdown desktop-menu-item"\n  ng-class="{\'hidden-xs\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="dropdown-toggle">\n      <div class="user-id pull-left add-right">\n        <span class="username">{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n    <div class="dropdown-menu" role="menu">\n      <ng-include\n        src="\'auth-buttons-menu.html\'"\n        replace-include\n      ></ng-include>\n    </div>\n</li>\n<!-- Mobile -->\n<li\n  dropdown\n  class="dropdown user-profile-dropdown mobile-menu-item"\n  ng-class="{\'visible-xs-inline-block\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="visible-xs dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'"\n      action-sheet-class="user-profile-dropdown">\n      <div class="user-id">\n        <span style="max-width:90px">{{username}}</span>\n        <span style="max-width:90px"><strong>{{companyName}}</strong></span>\n      </div>\n    </a>\n</li>\n<!-- If User NOT Authenticated -->\n<li ng-show="!undetermined && isLoggedIn === false" ng-controller="SignUpButtonCtrl">\n  <button type="button" ng-click="openSignUpModal()"\n  class="btn-primary btn add-right">\n  <i class="fa fa-google"></i> Sign Up Free</button>\n</li>\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="sign-in top-auth-button" ng-click="login(\'registrationComplete\')">\n    Sign In\n  </button>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("authorization-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n  		<i class="fa fa-times"></i>\n  	</button>\n</div>\n<div class="modal-body authorization-modal"\n  rv-spinner="spinnerOptions"\n  rv-spinner-key="authenticate-button"\n  rv-spinner-start-active="0"\n>\n  <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg" class="profile-img">\n  <p>Please authorize your Google Account to register with Rise Vision.</p>\n\n  <button type="button" class="btn btn-success btn-fixed-width btn-block authorize-button" ng-click="authenticate(true)">\n    Authorize <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("close-frame-button.html",'<li class="close-frame">\n  <a href="" class="close-frame-button" ng-click="closeIFrame()">\n    <i class="fa fa-times"></i>\n  </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("common-header.html",'<!-- Common Header Navbar -->\n<nav class="navbar navbar-default navbar-static-top"\n	ng-class="{\'double-margin\': isSubcompanySelected}" role="navigation">\n	<div class="container">\n\n		<div class="navbar-header" style="width: 100%;">\n			<a class="navbar-brand visible-md visible-lg"\n			  href="http://www.risevision.com/" target="{{newTabHome ? \'_blank\' : \'_self\'}}" ng-if="!inRVAFrame">\n				<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n			</a>\n			<a class="navbar-brand hidden-md hidden-lg text-center"\n				href="" off-canvas-toggle>\n				<i class="fa fa-bars"></i>\n			</a>\n			<!-- If User Authenticated -->\n			<!-- Action Nav -->\n			<ul class="nav navbar-nav navbar-right actions-nav pull-right">\n				<!-- Notifications -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="SystemMessagesButtonCtrl"\n					src="\'system-messages-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-controller="ShoppingCartButtonCtrl"\n					src="\'shoppingcart-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-if="inRVAFrame"\n					ng-controller="CloseFrameButtonCtrl"\n					src="\'close-frame-button.html\'"\n				></ng-include>\n				<!-- Current App -->\n				<ng-include\n					ng-if="!inRVAFrame"\n					replace-include\n					src="\'app-nav-buttons.html\'"\n				></ng-include>\n				<!-- END Current App -->\n				<!-- Auth -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="AuthButtonsCtr"\n					src="\'auth-buttons.html\'"\n				></ng-include>\n				<li ng-if="inRVAFrame"\n				  ng-controller="AuthButtonsCtr"></li>\n			</ul>\n			<!-- END Action Nav -->\n\n			<!-- Nav Links -->\n			<div class="navbar-collapse navbar-left hidden-xs hidden-sm">\n				<ul class="nav navbar-nav">\n					<li ng-repeat="opt in navOptions">\n						<a ng-href="{{opt.link}}" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n					</li>\n					<li ng-if="!inRVAFrame && !hideHelpMenu">\n						<a href="http://www.risevision.com/help/" target="_blank">\n							Help\n						</a>\n					</li>\n				</ul>\n			</div>\n			<!-- END Nav Links -->\n		</div>\n\n		<ng-include\n		replace-include\n		ng-controller="TestCompanyBannerCtrl"\n		src="\'test-company-banner.html\'"></ng-include>\n		\n		<ng-include\n		replace-include\n		ng-controller="SubcompanyBannerCtrl"\n		src="\'subcompany-banner.html\'"></ng-include>\n	</div>\n</nav>\n\n<ng-include\n	replace-include\n	ng-controller="GlobalAlertsCtrl"\n	src="\'global-alerts.html\'"></ng-include>\n\n<!-- END Common Header Navbar -->\n\n<!-- Off Canvas Version of the Nav -->\n<nav class="off-canvas-nav" off-canvas-nav>\n  <ul class="nav nav-pills nav-stacked">\n  	<li off-canvas-toggle>\n  		<i class="fa fa-times fa-2x pull-right"></i>\n  		<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n  	</li>\n    <li ng-repeat="opt in navOptions">\n			<a ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n		</li>\n		<li ng-if="!hideHelpMenu">\n			<a target="_blank" href="http://www.risevision.com/help">Help</a>\n		</li>\n  </ul>\n</nav>\n<iframe name="logoutFrame" id="logoutFrame" style=\'display:none\'></iframe>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons-menu.html",'<ul>\n  <li class="dropdown-header" ng-show="!isSubcompanySelected">\n    <p>{{username}}</p>\n    <p><strong>{{selectedCompanyName}}</strong>\n      <span class="text-muted" ng-show="isRiseVisionUser && !isSubcompanySelected">|</span>\n      <a href="" ng-click="switchCompany()" ng-show="isRiseVisionUser && !isSubcompanySelected">Select Sub-Company</a>\n    </p>\n  </li>\n\n  <li class="dropdown-header sub-company-header" ng-show="isSubcompanySelected">\n    <p>You are in Sub-Company <strong>{{selectedCompanyName}}</strong>\n    <span class="text-muted">|</span>\n     <a href="" ng-click="switchCompany()" ng-show="isRiseVisionUser">Change</a></p>\n    <p><a href="" ng-click="resetCompany()">Switch to My Company</a></p>\n  </li>\n\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button">\n      <i class="fa fa-plus"></i>\n      <span class="item-name">Add Sub-Company</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="companySettings()" class="action company-settings-menu-button">\n      <i class="fa fa-building"></i>\n      <span class="item-name">Company Settings</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button">\n      <i class="fa fa-users"></i>\n      <span class="item-name">Company Users</span>\n    </a>\n  </li>\n</ul>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}">\n  <label for="company-settings-name">\n    Name *\n  </label>\n  <input required id="company-settings-name" type="text" class="form-control"\n    ng-model="company.name" name="name" />\n  <p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine"\n    class="help-block validation-error-message-name">Company name is required.</p>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-street" class="control-label">\n        Street\n      </label>\n      <input id="company-settings-street" type="text" class="form-control" ng-model="company.street" />\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-unit" class="control-label">\n        Unit\n      </label>\n      <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit" />\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-3">      \n    <div class="form-group">\n      <label for="company-settings-city" class="control-label">\n        City\n      </label>\n      <input id="company-settings-city" type="text" class="form-control" ng-model="company.city" />\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-country" class="control-label">\n        Country\n      </label>\n      <select id="company-settings-country" class="form-control selectpicker"\n        ng-model="company.country" ng-options="c.code as c.name for c in countries">\n        <option value="">&lt; Select Country &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-state" class="control-label">\n        State/Province/Region\n      </label>\n      <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'" />\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'">\n        <option value="">&lt; Select Province &gt;</option>\n      </select>\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'">\n        <option value="">&lt; Select State &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-zip" class="control-label">\n        Zip/Postal Code\n      </label>\n      <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode" />\n    </div>\n  </div>\n</div>\n<div class="form-group">\n  <label for="company-settings-phone" class="control-label">\n    Phone\n  </label>\n  <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"/>\n</div>\n<div class="form-group">\n  <label for="company-settings-timezone" class="control-label">Time Zone</label>\n  <select class="form-control" ng-model="company.timeZoneOffset" integer-parser>\n    <option value="">&lt; Select Time Zone &gt;</option>\n    <option value="{{c[1]}}" ng-repeat="c in timezones">{{c[0]}}</option>\n  </select>\n</div>\n<div class="form-group">\n  <label for="company-settings-monitoring">\n    Send Monitoring Emails To\n  </label>\n  <input id="company-settings-monitoring"\n    type="text" class="form-control" ng-list=", "\n     ng-model="company.notificationEmails" placeholder="e.g. john.doe@company.com, jane.doe@company.com"/>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-selector-modal.html",'\n<form role="form">\n	<div class="modal-header">\n		<button type="button" class="close" data-dismiss="modal"\n		  aria-hidden="true" ng-click="closeModal()">\n			<i class="fa fa-times"></i>\n		</button>\n		<h2 id="switch-company" class="modal-title">\n			Select Sub-Company\n		</h2>\n	</div>\n	<div class="modal-body">\n	  <!-- Search -->\n		<search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n		<!-- List of Companies -->\n		<div class="list-group scrollable-list half-top"\n		  scrolling-list="loadCompanies()"\n		  rv-spinner rv-spinner-key="company-selector-modal-list"\n			rv-spinner-start-active="1"\n		>\n			<div class="list-group-item"  ng-repeat="company in companies.list" ng-click="setCompany(company)">\n				<p class="list-group-item-text"><strong>{{company.name}}</strong><br/><small class="text-muted">{{company | fullAddress}}</small>\n				</p>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button type="button" class="btn btn-default btn-fixed-width" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel\n			<i class="fa fa-white fa-times icon-right"></i>\n		</button>\n	</div>\n</form>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-settings-modal.html",'<div rv-spinner\n  rv-spinner-key="company-settings-modal"\n  rv-spinner-start-active="1">\n\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-settings-label" class="modal-title">Company Settings</h2>\n</div>\n<div class="modal-body company-settings-modal">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <label>\n        Authentication Key\n      </label>\n      <a class="action-link ps-reset-auth-key" href="" ng-click="resetAuthKey()">Reset</a>\n      <div clss="ps-auth-key">\n        {{company.authKey}}\n      </div>\n    </div>\n    <div class="form-group">\n      <label>\n        Claim ID\n      </label>\n      <a class="action-link ps-reset-claim-id" href="" ng-click="resetClaimId()">Reset</a>\n      <div class="ps-claim-id">\n        {{company.claimId}}\n      </div>\n    </div>\n    <div class="form-group" ng-hide="true">\n      <label>\n        Sub-Company Home Page Presentation\n      </label>\n      <a class="action-link" href="" ng-click="showSelector()">Select</a>\n      <a class="action-link" href="">Default</a>\n      <div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div>\n      <div class="presentation-selector" ng-show="isSelectorVisible">\n        <div class="panel panel-default">\n          <ul class="list-unstyled selector-header">\n            <li ng-class="{active : selected == \'list\'}">\n              <a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a>\n            </li>\n            <li ng-class="{active : selected == \'search\'}">\n              <a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a>\n            </li>\n            <li class="close-button">\n              <button type="button" class="close" aria-hidden="true" ng-click="closeSelector()">\n                <i class="fa fa-times"></i>\n              </button>\n            </li>\n          </ul>\n          <div class="panel-body">\n            <div class="presentation-list" ng-show="selected == \'list\'">\n              <div class="input-group search">\n                <input type="text" class="form-control" placeholder="Search Presentations">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-search fa-white"></i>\n                  </button>\n                </span>\n              </div>\n              <div class="list-group scrollable-list">\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">\n                  Demo Presentation\n                </a>\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">\n                  My First Presentation\n                </a>\n              </div>\n            </div>\n            <div class="presentation-search" ng-show="selected == \'search\'">\n              <form role="form">\n                <div class="form-group">\n                  <input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID" />\n                </div>\n                <div class="form-group">\n                  <a href="" ng-click="setPresentation($event)">Retrieve Presentation</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-community-url">\n          Sub-Company Community URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-community-url" type="url" class="form-control" />\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-support-url">\n          Sub-Company Support URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-support-url" type="url" class="form-control" />\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isSeller" />\n          Registered Seller\n        </label>\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isTest" />\n          Test Company\n        </label>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-status">\n          Status\n        </label>\n        <select id="company-settings-status" class="form-control selectpicker">\n          <option value="active">Active</option>\n          <option value="inactive">Inactive</option>\n        </select>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <p class="visible-xs text-right"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></p>\n    <button type="button" class="btn btn-danger btn-fixed-width pull-left delete-company-button"\n      ng-show="!isDeletingCompany" ng-click="deleteCompany()">\n      Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">\n      Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n    </button>\n    <div class="pull-right">\n      <span class="hidden-xs"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></span>\n      <button type="button"\n        class="btn btn-primary btn-fixed-width" ng-click="save()"\n        ng-disabled="forms.companyForm.$invalid">Save\n        <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button"\n        class="btn btn-default btn-fixed-width close-company-settings-button" data-dismiss="modal" ng-click="closeModal()">Cancel\n        <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n</div> <!--spinner -->\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-users-modal.html",'<div rv-spinner\n  rv-spinner-key="company-users-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal"\n    aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-users-label" class="modal-title">Company Users</h2>\n</div>\n<div class="modal-body company-users-modal">\n  <!-- CSV Button -->\n  <div class="row action-bar add-bottom" ng-if="false">\n    <button class="btn btn-secondary" ng-csv="users"\n      filename="users.csv">Download to CSV</button>\n  </div>\n  <!-- Search -->\n  <div class="input-group company-search add-bottom">\n    <input id="csSearch" type="text" class="form-control"\n      placeholder="Search Users"\n      ng-model="search.searchString"\n      ng-enter="doSearch()">\n      <span class="input-group-addon primary-bg" ng-click="doSearch()">\n        <i class="fa fa-search"></i>\n      </span>\n  </div>\n  <!-- List of Users -->\n  <div class="list-group scrollable-list company-users-list"\n    rv-spinner\n    rv-spinner-key="company-users-list"\n    rv-spinner-start-active="1">\n    <div class="list-group-item  company-users-list-item"\n      ng-repeat="user in users | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)">\n      <p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-success add-company-user-button"\n    ng-click="addUser()">Add User\n    <i class="fa fa-white fa-plus icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default close-company-users-button"\n    data-dismiss="modal" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div> <!-- spinner -->\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("global-alerts.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="alert alert-danger" role="alert" ng-repeat="msg in errors">\n        <span ng-bind-html="msg"></span>\n        <button type="button" class="close pull-right"\n          ng-click="dismiss(\'errors\', $index);">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("move-company-modal.html",'<div rv-spinner\n  rv-spinner-key="move-company-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="move-company-label" class="modal-title">Move Company</h2>\n</div>\n<div class="modal-body move-company-modal">\n  <form role="form">\n    <div class="form-group">\n      <label for="auth-key">\n        Enter the Authentication Key of the Company that you want to move.\n      </label>\n      <div class="row">\n        <div class="col-sm-6">\n          <input id="auth-key" type="text" class="form-control"\n          ng-model="company.authKey" />\n        </div>\n        <div class="col-sm-6">\n          <a href="" class="btn btn-secondary retrieve-company-details-button"\n          ng-disabled="!company.authKey"\n          ng-click="getCompany()">Retrieve Company Details</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div ng-show="company.name" class="company-details-info">\n    <h3>Details of the Company You Want to Move</h3>\n    <div>\n      {{company.name}}<br>\n      {{company.address}}\n      {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}\n    </div>\n    <h3>Details of the Company You Are Moving the Above Company Under</h3>\n    <div class="to-company">\n      {{selectedCompany.name}}<br>\n      {{selectedCompany.address}}<br>\n      {{selectedCompany.city}}, {{selectedCompany.province}},\n      {{selectedCompany.country}} {{selectedCompany.postalCode}}\n    </div>\n  </div>\n  <div ng-show="errors.length > 0">\n    <div class="alert alert-danger" ng-repeat="error in errors">\n      {{error}}\n    </div>\n  </div>\n  <div ng-show="messages.length > 0">\n    <div class="alert alert-success" ng-repeat="message in messages">\n      {{message}}\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success move-company-button"\n    ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width close-move-company-button" data-dismiss="modal" ng-click="closeModal()">\n    {{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("registration-modal.html",'<div rv-spinner\nrv-spinner-key="registration-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 class="modal-title">Welcome To Rise Vision</h2>\n</div>\n<div class="modal-body registration-modal">\n  <p>We require an email address that we can reliably reach you at\n  for system notices and other critical information. We promise,\n   only system notices, we won\'t send you anything else unless you\n  sign up for the newsletter below, and we won\'t share your email address\n  with anyone else.</p>\n\n  <form novalidate role="form" name="forms.registrationForm">\n    <!-- First Name -->\n    <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine }">\n      <label for="firstName">First Name</label>\n      <input type="text" class="form-control firstName"\n      name="firstName"\n      id="firstName" required\n      ng-model="profile.firstName">\n      <p ng-show="forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine"\n        class="help-block validation-error-message-first-name">Enter First Name.</p>\n    </div>\n    <!-- Last Name -->\n    <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine }">\n      <label for="lastName">Last Name</label>\n      <input type="text" class="form-control lastName"\n      name="lastName"\n      id="lastName" required\n      ng-model="profile.lastName">\n      <p ng-show="forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine"\n        class="help-block validation-error-message-last-name">Enter Last Name.</p>\n    </div>\n    <!-- Email -->\n    <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine }">\n      <label for="email">Email</label>\n      <input type="email" class="form-control email"\n      name="email"\n      id="email" required\n      ng-model="profile.email">\n      <p ng-show="forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine"\n        class="help-block validation-error-message-email">Enter a valid email.</p>\n    </div>\n    <!-- Terms of Service and Privacy -->\n    <div class="checkbox form-group" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }">\n      <label>\n      <input type="checkbox" name="accepted"\n        ng-model="profile.accepted"\n        class="accept-terms-checkbox" required />\n      I accept the terms of <a href="http://www.risevision.com/terms-service-privacy/" target="_blank">Service and Privacy</a>\n      <p ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine"\n        class="help-block validation-error-message-accepted">You must accept terms and condtions.</p>\n      </label>\n    </div>\n    <!-- Newsletter -->\n    <div class="checkbox form-group">\n      <label>\n        <input type="checkbox" class="sign-up-newsletter-checkbox" ng-model="profile.mailSyncEnabled"> Sign up for our newsletter\n      </label>\n    </div>\n    <div class="form-group">\n      <button ng-click="save()"\n        type="button"\n        class="btn btn-success btn-fixed-width registration-save-button"\n        ng-disabled="registering">\n        Save <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" class="btn btn-default btn-fixed-width registration-cancel-button"\n      ng-disabled="registering"\n      ng-click="closeModal()">\n        Cancel <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </form>\n</div>\n</div>\n')
}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("shoppingcart-button.html",'<li class="shopping-cart" ng-show="!hideShoppingCart && isRiseVisionUser">\n<a href="{{shoppingCartUrl}}" class="shopping-cart-button">\n  <i class="fa fa-shopping-cart"></i>\n  <span id="cartBadge" class="label label-primary" ng-show="cart.items.length">\n    {{cart.items.length | surpressZero}}</span>\n</a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signout-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sign-out-label" class="modal-title">Sign Out</h2>\n</div>\n<div class="modal-body sign-out-modal">\n  <form role="form">\n    <p>\n      Signing out does not sign you out of your Google Account.\n    </p>\n    <p>\n      If you are on a shared computer you should sign out of your Google Account.\n    </p>\n    <p>\n      <button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out\n        <i class="fa fa-sign-out fa-lg icon-right"></i>\n      </button>\n    </p>\n      <button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account\n        <i class="fa fa-google-plus-square fa-lg icon-right"></i>\n      </button>\n    <p>\n    </p>\n  </form>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signup-modal.html",'<div class="modal-body text-center">\n  <div class="signup-modal">\n    <div class="logo add-bottom">\n      <img style="width:120px" src="//s3.amazonaws.com/rise-common/images/logo-small.png" alt="Rise Vision">\n    </div>\n    <h2 class="modal-title">Digital Signage Content Management</h2>\n    <p class="text-muted">All you need is a Google Account. No credit card. No personal information. No risk.</p>\n\n    <a class="add-top btn btn-hg btn-primary" ng-click="login(\'registrationComplete\')">Get Started with Google <i class="fa fa-google fa-lg icon-right"></i></a>\n    <p class="text-muted remove-bottom add-top">Don\'t have a Google Account? <a href="https://accounts.google.com/signup" target="_blank">Get One Here</a></p>\n    <p class="text-muted">Already a Rise Vision User? <a ng-click="$event.preventDefault(); login(\'registrationComplete\');" ng-href="#">Sign In</a></p>\n  </div><!--signup-modal-->\n</div><!--modal-body-->\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame"\n  class="common-header-alert sub-company-alert">\n  You\'re in Sub-Company {{selectedCompanyName}}&nbsp;\n  <a href="" ng-click="switchToMyCompany()" class="link-button">Switch to My Company</a>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-modal.html",'<div rv-spinner\n  rv-spinner-key="add-subcompany-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2>\n</div>\n<div class="modal-body select-subcompany-modal pt-add-subcompany-modal">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button"\n        ng-click="moveCompany()">Move a Company Under Your Company</a>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success btn-fixed-width add-subcompany-save-button"\n    ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel\n    <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button-menu.html",'<ul>\n  <li class="dropdown-header dropdown-title system-message">\n    Notifications\n  </li>\n  <li class="divider"></li>\n  <li class="system-message"\n    ng-repeat="message in messages"\n    ng-bind-html="renderHtml(message.text)">\n  </li>\n</ul>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button.html",'<!-- Desktop and tablet -->\n<li dropdown class="dropdown system-messages hidden-xs"\nng-show="isRiseVisionUser && messages.length > 0">\n  <a href="" dropdown-toggle class="dropdown-toggle system-messages-button">\n    <i class="fa fa-bell"></i>\n    <span class="label label-danger system-messages-badge">{{messages.length | surpressZero}}</span>\n  </a>\n  <div class="dropdown-menu system-messages system-message-list" role="menu">\n    <ng-include\n      src="\'system-messages-button-menu.html\'"\n    ></ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li\n  class="system-messages"\n  ng-show="isRiseVisionUser  && messages.length > 0"\n  ng-class="{\'visible-xs-inline-block\': isRiseVisionUser && messages.length > 0}">\n    <a href=""\n      class="system-messages-button"\n      action-sheet="\'system-messages-button-menu.html\'"\n      action-sheet-class="system-message-list">\n        <i class="fa fa-bell"></i>\n        <span class="label label-danger system-messages-badge">{{messages.length}}</span>\n    </a>\n</li>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("test-company-banner.html",'<div ng-show="isTestCompanySelected"\n  class="sub-company-alert test-company-alert">\n  This is a Test Company\n</div>\n')}])}(),function(){try{app=angular.module("risevision.common.header.templates")}catch(e){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions"\nrv-spinner-key="user-settings-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">\n  <span ng-if="!isAdd">User Settings</span>\n  <span ng-if="isAdd">Add User</span>\n  </h2>\n</div>\n<div class="modal-body user-settings-modal">\n  <form role="form" novalidate name="forms.userSettingsForm">\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine }"\n    >\n      <label>\n        Username *\n      </label>\n      <div ng-if="!isAdd">{{user.username}}</div>\n      <input id="user-settings-username"\n        type="email" required name="username"\n        class="form-control"\n        ng-if="isAdd"\n        ng-model="user.username"\n        />\n        <p ng-show="forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine"\n          class="help-block validation-error-message-email">User name must be a valid email address.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine }">\n      <label for="user-settings-first-name">\n        First Name *\n      </label>\n      <input id="user-settings-first-name"\n        type="text" required name="firstName"\n        class="form-control"\n        ng-model="user.firstName"\n        />\n        <p ng-show="forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine"\n          class="help-block validation-error-message-firstName">First Name is required.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine }">\n      <label for="user-settings-last-name">\n        Last Name *\n      </label>\n      <input id="user-settings-last-name"\n        type="text" required name="lastName"\n        class="form-control"\n        ng-model="user.lastName"\n        />\n        <p ng-show="forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine"\n          class="help-block validation-error-message-lastName">Last Name is required.</p>\n    </div>\n    <div class="form-group">\n      <label for="user-settings-phone">\n        Phone\n      </label>\n      <input\n        id="user-settings-phone"\n        type="tel"\n        class="form-control"\n        ng-model="user.telephone"\n         />\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine }">\n      <label for="user-settings-email">\n        Email *\n      </label>\n      <input\n        id="user-settings-email"\n        type="email" required name="email"\n        class="form-control"\n        ng-model="user.email"\n        />\n        <p ng-show="forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine"\n          class="help-block validation-error-message-email">A valid email address is required.</p>\n    </div>\n    <div class="form-group">\n      <label>\n        Roles\n      </label>\n      <div class="checkbox" ng-repeat="role in availableRoles"\n        ng-show="editRoleVisible(role)">\n        <label>\n          <input type="checkbox"\n            id="user-settings-{{role.key}}"\n            checklist-model="user.roles"\n            ng-disabled="!editRoleAllowed(role)"\n            checklist-value="role.key"> {{role.name}}\n        </label>\n      </div>\n    </div>\n    <div class="form-group" ng-if="user.lastLogin">\n      <label>\n        Last Login\n      </label>\n      <div>{{user.lastLogin | date:\'d-MMM-yyyy h:mm a\'}}</div>\n    </div>\n    <div class="form-group" ng-if="!editingYourself && !isAdd">\n      <label for="user-settings-status">\n        Status\n      </label>\n      <select id="user-settings-status"\n        class="form-control selectpicker" ng-model="user.status">\n        <option value="1">Active</option>\n        <option value="0">Inactive</option>\n      </select>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <p class="text-right"><last-modified change-date="user.changeDate" changed-by="user.changedBy"></last-modified></p>\n  <button type="button" class="btn btn-danger btn-fixed-width pull-left"\n    ng-if="!isAdd" ng-click="deleteUser()">\n    Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n  </button>\n  <div class="pull-right">\n    <button type="button"\n      class="btn btn-primary btn-fixed-width"\n      data-dismiss="modal"\n      ng-click="save()" id="save-button">\n      Save <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width" ng-click="closeModal()">\n      Cancel <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</div>\n')}])}(),angular.module("risevision.common.header",["risevision.common.userstate","risevision.common.account","risevision.common.gapi","risevision.core.cache","risevision.core.company","risevision.common.company","risevision.common.localstorage","risevision.common.header.templates","risevision.common.loading","risevision.ui-flow","risevision.common.systemmessages","risevision.core.systemmessages","risevision.core.countries","risevision.core.oauth2","risevision.common.geodata","risevision.store.data-gadgets","risevision.common.util","risevision.core.userprofile","risevision.common.registration","risevision.common.shoppingcart","checklist-model","ui.bootstrap","ngSanitize","ngCsv","ngTouch","risevision.common.components.last-modified","risevision.common.components.search-filter","risevision.common.components.scrolling-list","risevision.common.components.analytics","risevision.common.svg"]).factory("bindToScopeWithWatch",[function(){return function(e,n,t){t.$watch(function(){return e.call()},function(e){t[n]=e})}}]).directive("commonHeader",["$modal","$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch","$document",function(e,n,t,o,i,a,s,r,l,c,u,m){return{restrict:"E",template:r.get("common-header.html"),scope:!1,link:function(e,t,o){e.navCollapsed=!0,e.inRVAFrame=l.inRVAFrame(),e[o.navOptions]||(e.navOptions=[{title:"Home",link:"#/"},{title:"Store",link:""},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),e.hideShoppingCart="0"!==o.hideShoppingCart&&"false"!==o.hideShoppingCart,e.hideHelpMenu="0"!==o.hideHelpMenu&&"false"!==o.hideHelpMenu,n.redirectToRoot="0"!==o.redirectToRoot&&"false"!==o.redirectToRoot,n.newTabHome="0"!==o.newTabHome&&"false"!==o.newTabHome,u(l.isRiseVisionUser,"isRiseVisionUser",e),n.$on("$stateChangeSuccess",function(){e.inRVAFrame&&c.search("inRVA",e.inRVAFrame)});var i=m[0].createElement("meta");i.id="viewport",i.name="viewport",i.content="width=device-width, initial-scale=1, user-scalable=no",m[0].getElementsByTagName("head")[0].appendChild(i)}}}]).run(["$rootScope","userState","selectedCompanyUrlHandler",function(e,n,t){e.$watch(function(){return n.getSelectedCompanyId()},function(e){e&&t.updateUrl()}),e.$on("$stateChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",t.updateSelectedCompanyFromUrl)}]).run(["segmentAnalytics","SEGMENT_API_KEY","ENABLE_INTERCOM_MESSAGING","analyticsEvents",function(e,n,t,o){o.initialize(),e.load(n,t)}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}),angular.module("risevision.common.header").directive("integerParser",[function(){return{require:"ngModel",link:function(e,n,t,o){o.$parsers.unshift(function(e){return parseInt(e,10)||0})}}}]),angular.module("risevision.common.header").directive("companyButtons",["$templateCache",function(e){return{restrict:"E",scope:!1,replace:!0,template:e.get("company-buttons-menu.html"),link:function(){}}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,n){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),n.$on("risevision.common.globalError",function(n,t){e.errors.push(t)}),e.dismiss=function(n,t){e[n].splice(t,1)}}]),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch",function(e,n,t,o,i,a,s,r,l,c){window.$loading=i,e.inRVAFrame=o.inRVAFrame(),e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.register=function(){a.remove("surpressRegistration"),r.invalidateStatus("registrationComplete")},e.$on("risevision.user.signedOut",function(){a.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){a.remove("surpressRegistration")}),e.$watch(function(){return r.isStatusUndetermined()},function(n){e.undetermined=n,e.loading=n}),e.$watch(function(){return r.getStatus()},function(i,a){i&&(s.debug("status changed from",a,"to",i),"registeredAsRiseVisionUser"===i?(!o.registrationModalInstance&&o.isLoggedIn()&&(o.registrationModalInstance=n.open({template:t.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static",resolve:{account:["getUserProfile","getAccount",function(e,n){return e(o.getUsername()).then(null,function(e){return e&&"User has not yet accepted the Terms of Service"===e.message?n():null}).catch(function(){return null})}]}})),o.registrationModalInstance.result.finally(function(){o.registrationModalInstance=null,r.invalidateStatus()})):"signedInWithGoogle"===i&&e.login())}),e.$watch(function(){return o.isLoggedIn()},function(n){e.isLoggedIn=n,n===!0&&(e.userPicture=o.getUserPicture())}),e.$watch(function(){return o.getUserCompanyName()},function(){e.companyName=o.getUserCompanyName()}),e.$watch(function(){return o.getUsername()},function(){e.username=o.getUsername()}),c(o.isRiseVisionUser,"isRiseVisionUser",e),e.login=function(e){i.startGlobal("auth-buttons-login"),o.authenticate(!0).then().finally(function(){i.stopGlobal("auth-buttons-login"),r.invalidateStatus(e)})},e.logout=function(){e.confirmSignOut()},e.confirmSignOut=function(e){var o=n.open({template:t.get("signout-modal.html"),controller:"SignOutModalCtrl",size:e});o.result.finally(function(){r.invalidateStatus("registrationComplete")})},e.userSettings=function(e){n.open({template:t.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return o.getUsername()},add:function(){return!1}}})},i.startGlobal("auth-buttons-silent"),l().then().finally(function(){o.authenticate(!1).then().finally(function(){i.stopGlobal("auth-buttons-silent"),r.isStatusUndetermined()||r.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("SignUpModalCtrl",["$scope","userState","uiFlowManager","$loading",function(e,n,t,o){e.login=function(e){o.startGlobal("auth-buttons-login"),n.authenticate(!0).then().finally(function(){o.stopGlobal("auth-buttons-login"),t.invalidateStatus(e)})}}]),angular.module("risevision.common.header").controller("SignUpButtonCtrl",["$scope","$modal",function(e,n){e.openSignUpModal=function(){n.open({templateUrl:"signup-modal.html",controller:"SignUpModalCtrl"})}}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCoreCountries",function(e,n,t,o,i){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.isSubcompanySelected()},function(){e.isSubcompanySelected=o.isSubcompanySelected()}),e.$watch(function(){return o.getSelectedCompanyName()},function(n){n&&(e.selectedCompanyName=o.getSelectedCompanyName())}),e.$watch(function(){return o.isRiseVisionUser()},function(n){e.isRiseVisionUser=n,n===!0&&(e.isUserAdmin=o.isUserAdmin(),e.isPurchaser=o.isPurchaser())}),e.$watch(function(){return o.isRiseAdmin()},function(n){e.isRiseVisionAdmin=n}),e.addSubCompany=function(){n.open({template:t.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:"lg",resolve:{countries:function(){return i()}}})},e.companySettings=function(){n.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:"lg",resolve:{companyId:function(){return o.getSelectedCompanyId()},countries:function(){return i()}}})},e.companyUsers=function(e){n.open({template:t.get("company-users-modal.html"),controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return o.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=n.open({template:t.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return o.getSelectedCompanyId()}}});e.result.then(o.switchCompany)},e.moveCompany=function(e){n.open({template:t.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").filter("surpressZero",function(){return function(e){return e?e:""}}).controller("ShoppingCartButtonCtrl",["$scope","shoppingCart","userState","$log","STORE_URL",function(e,n,t,o,i){e.shoppingCartUrl=i+"shopping-cart",e.cart={},e.cart.items=n.getItems(),e.$watch(function(){return t.isRiseVisionUser()},function(t){e.isRiseVisionUser=t,n.get()})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,n,t){e.closeIFrame=function(){n.debug("gadgetsService.closeIFrame"),t.closeIFrame()}}]),angular.module("risevision.common.header").controller("SystemMessagesButtonCtrl",["$scope","userState","$log","$sce","getCoreSystemMessages","systemMessages",function(e,n,t,o,i,a){e.messages=a,e.$watch(function(){return n.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.renderHtml=function(e){return o.trustAsHtml(e)},a.registerRetriever(function(){return i(n.getSelectedCompanyId())}),e.$watch(function(){return n.getSelectedCompanyId()},function(n){null!==n?a.resetAndGetMessages().then(e.apply):a.clear()})}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$scope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError","agreeToTermsAndUpdateUser","account","segmentAnalytics",function(e,n,t,o,i,a,s,r,l,c,u,m,d){var p=!m,g=m?m:s.getCopyOfProfile()||{};a.remove("surpressRegistration"),e.profile=r(g,"email","mailSyncEnabled","firstName","lastName"),e.registering=!1,e.profile.accepted=angular.isDefined(g.termsAcceptanceDate)&&null!==g.termsAcceptanceDate,angular.isDefined(e.profile.mailSyncEnabled)||(e.profile.mailSyncEnabled=!1),e.closeModal=function(){a.put("surpressRegistration",!0),n.dismiss("cancel")};var f=e.$watch(function(){return l.isStatusUndetermined()},function(e){e===!0?t.start("registration-modal"):e===!1&&("registrationComplete"===l.getStatus()&&(n.close("success"),f()),t.stop("registration-modal"))});e.save=function(){if(e.forms.registrationForm.accepted.$pristine=!1,e.forms.registrationForm.firstName.$pristine=!1,e.forms.registrationForm.lastName.$pristine=!1,e.forms.registrationForm.email.$pristine=!1,!e.forms.registrationForm.$invalid){e.registering=!0,t.start("registration-modal");var a;a=p?o(s.getUsername(),e.profile):u(s.getUsername(),e.profile),a.then(function(){s.refreshProfile().then().finally(function(){d.track("User Registered",{companyId:s.getUserCompanyId(),companyName:s.getUserCompanyName(),isNewCompany:p}),n.close("success"),t.stop("registration-modal")})},function(e){alert("Error: "+c(e)),i.error(e)}).finally(function(){e.registering=!1,s.refreshProfile()})}},e.forms={}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,n,t,o,i,a){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?a.start("move-company-modal"):a.stop("move-company-modal")}),e.selectedCompany=i.getCopyOfSelectedCompany(),e.closeModal=function(){n.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,t(e.company.authKey,i.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(n){e.errors.push("Error: "+JSON.stringify(n))}).finally(function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,o(e.company.authKey).then(function(n){angular.extend(e.company,n)},function(n){e.errors.push("Failed to retrieve company. "+n.message)}).finally(function(){e.loading=!1})},e.$watch("moveSuccess",function(n){e.dismissButtonText=n?"Close":"Cancel"})}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","countries","REGIONS_CA","REGIONS_US","TIMEZONES","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","deleteCompany","segmentAnalytics",function(e,n,t,o,i,a,s,r,l,c,u,m,d,p,g,f){function h(n){e.isRiseStoreAdmin?n.sellerId=n.isSeller?"yes":null:(n.sellerId=void 0,n.isTest=void 0)}e.company={id:o},e.countries=i,e.regionsCA=a,e.regionsUS=s,e.timezones=r,e.isRiseStoreAdmin=p.isRiseStoreAdmin(),e.$watch("loading",function(e){e?m.start("company-settings-modal"):m.stop("company-settings-modal")}),e.loading=!1,e.forms={},o&&(e.loading=!0,l(o).then(function(n){e.company=n,e.company.isSeller=n&&n.sellerId?!0:!1},function(e){alert("An error has occurred. "+d(e))}).finally(function(){e.loading=!1})),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0;var o=angular.copy(e.company);h(o),t(e.company.id,o).then(function(){f.track("Company Updated",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.updateCompanySettings(e.company),n.close("success")}).catch(function(e){alert("Error(s): "+d(e))}).finally(function(){e.loading=!1})},e.deleteCompany=function(){confirm("Are you sure you want to delete this company?")&&(e.loading=!0,g(e.company.id).then(function(){f.track("Company Deleted",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.getUserCompanyId()===e.company.id?p.signOut():p.getSelectedCompanyId()===e.company.id&&p.resetCompany(),n.close("success")}).catch(function(e){alert("Error(s): "+d(e))}).finally(function(){e.loading=!1}))},e.resetAuthKey=function(){u.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(m.start("company-settings-modal"),c(e.company.id,"authKey").then(function(n){e.company.authKey=n.item,alert("Successfully changed Authentication Key.")},function(e){alert("Error: "+d(e))}).finally(function(){m.stop("company-settings-modal")}))},e.resetClaimId=function(){u.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(m.start("company-settings-modal"),c(e.company.id,"claimId").then(function(n){e.company.claimId=n.item,alert("Successfully changed Claim ID.")},function(e){alert("Error: "+d(e))}).finally(function(){m.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","countries","REGIONS_CA","REGIONS_US","TIMEZONES","userState","$loading","humanReadableError","segmentAnalytics",function(e,n,t,o,i,a,s,r,l,c,u,m,d){e.company={},e.countries=a,e.regionsCA=s,e.regionsUS=r,e.timezones=l,e.forms={},e.$watch("loading",function(e){e?u.start("add-subcompany-modal"):u.stop("add-subcompany-modal")}),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,i(c.getSelectedCompanyId(),e.company).then(function(e){d.track("Company Created",{companyId:e.id,companyName:e.name}),n.close("success")},function(e){alert("Error: "+m(e))}).finally(function(){e.loading=!1})},e.moveCompany=function(e){t.open({template:o.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$modalInstance","companyService","companyId","BaseList","$loading",function(e,n,t,o,i,a){var s=40;e.companies=new i(s),e.search={query:""},e.filterConfig={placeholder:"Search Companies"},e.$watch("loading",function(e){e?(a.start("company-selector-modal"),a.start("company-selector-modal-list")):(a.stop("company-selector-modal"),a.stop("company-selector-modal-list"))}),e.closeModal=function(){n.dismiss("cancel")},e.loadCompanies=function(){e.companies.endOfList||(e.loading=!0,t.getCompanies(o,e.search.query,e.companies.cursor,s,null).then(function(n){n&&n.items&&e.companies.add(n.items,n.cursor)}).finally(function(){e.loading=!1}))},0===e.companies.list.length&&e.loadCompanies(),e.doSearch=function(){e.companies.clear(),e.loadCompanies()},e.setCompany=function(e){n.close(e.id)}}]),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,n,t,o){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(){e.isSubcompanySelected=o.isSubcompanySelected(),e.selectedCompanyName=o.getSelectedCompanyName()}),e.switchToMyCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("TestCompanyBannerCtrl",["$scope","userState",function(e,n){e.$watch(function(){return n.isTestCompanySelected()},function(n){e.isTestCompanySelected=n})}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(n){return e[n]}}]).controller("CompanyUsersModalCtrl",["$scope","$modalInstance","$modal","$templateCache","company","getUsers","$loading",function(e,n,t,o,i,a,s){e.$watch("loading",function(e){e?(s.start("company-users-modal"),s.start("company-users-list")):(s.stop("company-users-modal"),s.stop("company-users-list"))}),e.sort={field:"username",descending:!1},e.search={searchString:""},e.changeSorting=function(n){var t=e.sort;t.field===n?t.descending=!t.descending:(t.field=n,t.descending=!1)};var r=function(){e.loading=!0,a({companyId:i.id,search:e.search.searchString}).then(function(n){e.users=n}).finally(function(){e.loading=!1})};r(),e.addUser=function(e){var n=t.open({template:o.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:e,resolve:{companyId:function(){return i.id}}});n.result.finally(r)},e.editUser=function(e,n){var i=t.open({template:o.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return e},add:function(){return!1}}});i.result.finally(r)},e.closeModal=function(){n.dismiss("cancel")},e.doSearch=function(){e.users=[],r()}}]),angular.module("risevision.common.header").controller("AddUserModalCtrl",["$scope","addUser","$modalInstance","companyId","userState","userRoleMap","humanReadableError","$loading","segmentAnalytics",function(e,n,t,o,i,a,s,r,l){e.isAdd=!0,e.availableRoles=[],angular.forEach(a,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.$watch("loading",function(e){e?r.start("user-settings-modal"):r.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.username.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,n(o,e.user.username,e.user).then(function(){l.track("User Created",{userId:e.user.username,companyId:o}),t.close("success")},function(e){alert("Error"+s(e))}).finally(function(){e.loading=!1}))},e.closeModal=function(){t.dismiss("cancel")},e.editRoleAllowed=function(e){return i.isRiseAdmin()?!0:i.isUserAdmin()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.editRoleVisible=function(e){return i.isRiseAdmin()?!0:i.isUserAdmin()||i.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]),angular.module("risevision.common.header").controller("UserSettingsModalCtrl",["$scope","$modalInstance","updateUser","getUserProfile","deleteUser","addUser","username","userRoleMap","$log","$loading","userState","uiFlowManager","humanReadableError","$rootScope","segmentAnalytics",function(e,n,t,o,i,a,s,r,l,c,u,m,d,p,g){e.user={},e.$watch("loading",function(e){e?c.start("user-settings-modal"):c.stop("user-settings-modal")
}),e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.isUserAdmin=u.isUserAdmin(),e.username=s,e.loading=!0,o(s).then(function(n){e.user=n,e.editingYourself=u.checkUsername(n.username)}).finally(function(){e.loading=!1}),e.closeModal=function(){n.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&i(e.username).then(function(){g.track("User Deleted",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(s)}),u.checkUsername(s)&&u.signOut().then().finally(function(){m.invalidateStatus("registrationComplete")})}).finally(function(){n.dismiss("deleted")})},e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,t(s,e.user).then(function(t){u.checkUsername(s)&&u.updateUserProfile(t.item),g.track("User Updated",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(s)}),n.close("success")},function(e){l.debug(e),alert("Error: "+d(e))}).finally(function(){e.loading=!1}))},e.editRoleAllowed=function(n){return u.isRiseAdmin()?!0:u.isUserAdmin()?"sa"===n.key||"ba"===n.key?!1:"ua"===n.key&&u.checkUsername(e.user.username)?!1:!0:!1},e.editRoleVisible=function(e){return u.isRiseAdmin()?!0:u.isUserAdmin()||u.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userState",function(e,n,t,o){e.closeModal=function(){n.dismiss("cancel")},e.signOut=function(e){o.signOut(e).then(function(){t.debug("user signed out")},function(e){t.error("sign out failed",e)}).finally(function(){n.dismiss("success")})}}]),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var n={visible:!1,enabled:!1};return n.enabled=angular.element(e).width()<=1200?!0:!1,n.toggle=function(e){e&&e.stopPropagation(),(n.enabled||n.visible)&&(n.visible=!n.visible,n.visible?n.nav.addClass("is-off-canvas-opened"):n.nav.removeClass("is-off-canvas-opened"))},n.registerNav=function(e){n.nav=e,n.nav.addClass("off-canvas--container")},window.onresize=function(){n.enabled=angular.element(e).width()<=1200?!0:!1},n}]).directive("offCanvasContent",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){var i;n.bind(o,{start:function(e){i=e},end:function(n){n.x-i.x>0&&e.toggle()}})}}}]).directive("offCanvasNav",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){o.addClass("off-canvas--nav"),e.registerNav(o);var i;n.bind(o,{start:function(e){i=e},end:function(n){n.x-i.x<0&&e.toggle()}}),o.bind("tap",e.toggle),o.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile","$timeout",function(e,n,t){return{restrict:"A",link:function(o,i,a){var s=e.find("body").eq(0),r=!1,l=document.getElementById("action-sheet-backdrop");angular.isObject(l)?l=angular.element(l):(l=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),s.append(l)),o.templateUrl=o.$eval(a.actionSheet),o.title=o.$eval(a.title);var c=angular.element('<div class="action-sheet is-action-sheet-closed"><ng-include src="templateUrl"></ng-include></div>'),u=n(c)(o);s.append(u);var m=function(){r=!r,r?(u.toggleClass("is-action-sheet-closed"),t(function(){u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened")})):(u.toggleClass("is-action-sheet-opened"),l.toggleClass("is-action-sheet-opened"),t(function(){u.toggleClass("is-action-sheet-closed")},500)),r?(l.bind("tap",m),l.bind("click",m)):(l.unbind("tap"),l.unbind("click"))};a.actionSheetClass&&a.actionSheetClass.split(" ").forEach(function(e){u.addClass(e)}),i.bind("tap",m),i.bind("click",m),c.bind("tap",m),c.bind("click",m)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),function(e){"use strict";e.module("risevision.common.util",[]).value("humanReadableError",function(e){var n;return n=e.message?e.message:e.error?e.error.message?e.error.message:e.error:e,JSON.stringify(n)}).factory("dateIsInRange",[function(){return function(e,n,t){var o,i,a=!0;try{n&&(o=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),i=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),a=e>=i),a&&t&&(o=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),i=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),a=i>=e)}catch(s){a=!1}return a}}]).factory("objectHelper",[function(){var n={};return n.follow=function(e){var n=function(){};return n.prototype=e,new n},n.clearObj=function(e){for(var n in e)delete e[n]},n.clearAndCopy=function(t,o){n.clearObj(o),e.extend(o,t)},n}]).factory("getBaseDomain",["$log","$location",function(e,n){var t=function(e){return/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)?!0:!1};return function(){var o;if(!o){var i=n.host();if(t(i))o=i;else{var a=i.split(".");o=a.length>1?"appspot"===a[a.length-2]?a.slice(a.length-3).join("."):a.slice(a.length-2).join("."):i}e.debug("baseDomain",o)}return o}}])}(angular),angular.module("risevision.common.geodata",[]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]).value("TIMEZONES",[["(GMT -12:00) International Dateline West","-720"],["(GMT -11:00) Midway Island, Samoa","-660"],["(GMT -10:00) Hawaii","-600"],["(GMT -09:00) Alaska","-540"],["(GMT -08:00) Pacific Time (US & Canada], Tijuana","-480"],["(GMT -07:00) Mountain Time (US & Canada)","-420"],["(GMT -06:00) Central Time (US & Canada)","-360"],["(GMT -05:00) Eastern Time (US & Canada)","-300"],["(GMT -04:00) Atlantic Time (Canada)","-240"],["(GMT -03:30) NewfoundLand Time (Canada)","-210"],["(GMT -03:00) Buenos Aires, Georgetown","-180"],["(GMT -02:00) Mid-Atlantic","-120"],["(GMT -01:00) Cape Verde Is.","-60"],["(GMT  00:00) Dublin, Edinburgh, Lisbon, London","0"],["(GMT +01:00) Amsterdam, Berlin, Bern, Rome, Paris, Stockholm, Vienna","60"],["(GMT +02:00) Athens, Bucharest, Istanbul, Minsk","120"],["(GMT +03:00) Moscow, St. Petersburg, Volgograd","180"],["(GMT +03:30) Tehran","210"],["(GMT +04:00) Abu Dhabi, Muscat","240"],["(GMT +04:30) Kabul","270"],["(GMT +05:00) Islamabad, Karachi, Tashkent","300"],["(GMT +05:30) Calcutta, Chennai, Mumbai,New Delhi","330"],["(GMT +05:45) Kathmandu","345"],["(GMT +06:00) Astana,Almaty, Dhaka, Novosibirsk","360"],["(GMT +06:30) Rangoon (Yangon, Burma)","390"],["(GMT +07:00) Bangkok, Hanoi, Jakarta","420"],["(GMT +08:00) Beijing, Chongqing, Hong Kong, Urumqi","480"],["(GMT +09:00) Osaka, Sapporo, Tokyo","540"],["(GMT +09:30) Adelaide, Darwin","570"],["(GMT +10:00) Canberra, Melbourne, Sydney, Vladvostok","600"],["(GMT +11:00) Magadan, Solomon Is., New Caledonia","660"],["(GMT +12:00) Auckland, Fiji, Kamchatka, Marshall Is.","720"],["(GMT +13:00) Nuku'alofa","780"]]),function(e){"use strict";e.module("risevision.common.rvtokenstore",["risevision.common.util","LocalStorageModule","ngBiscuit"]).service("rvTokenStore",["$log","$location","cookieStore","getBaseDomain",function(e,n,t,o){var i=function(){return t.get("rv-token")},a=function(e){var n=o();"localhost"===n?t.put("rv-token",e,{path:"/"}):t.put("rv-token",e,{domain:n,path:"/"})},s=function(){var e=o();"localhost"===e?t.remove("rv-token",{path:"/"}):t.remove("rv-token",{domain:e,path:"/"})},r={read:i,write:a,clear:s};return r}])}(angular),function(e){"use strict";var n=function(e){return"/"===e[0]&&(e=e.slice(1)),e},t=function(e){var n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n};e.module("risevision.common.userstate",["risevision.common.companystate","risevision.common.util","risevision.common.gapi","risevision.common.localstorage","risevision.common.config","risevision.core.cache","risevision.core.oauth2","risevision.core.util","risevision.core.userprofile","risevision.common.loading","risevision.ui-flow","risevision.common.rvtokenstore"]).value("DEFAULT_PROFILE_PICTURE","http://api.randomuser.me/portraits/med/men/33.jpg").value("OAUTH2_SCOPES","https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile").value("GOOGLE_OAUTH2_URL","https://accounts.google.com/o/oauth2/auth").run(["$location","$window","userState","$log",function(e,o,i,a){var s=e.path(),r=t(n(s));if(a.debug("URL params",r),i._restoreState(),r.access_token&&(a.debug("Setting token",r.access_token),i._setUserToken(r.access_token)),r.state){var l=JSON.parse(decodeURIComponent(r.state));l.p||l.s?(i._persistState(),o.location.replace(l.p+l.s+l.u)):e.$$html5?e.path(""):o.location.hash=l.u}}]).factory("userState",["$q","$log","$location","CLIENT_ID","gapiLoader","OAUTH2_SCOPES","userInfoCache","getOAuthUserInfo","getUserProfile","companyState","objectHelper","$rootScope","$interval","$loading","$window","GOOGLE_OAUTH2_URL","localStorageService","$document","uiFlowManager","getBaseDomain","rvTokenStore",function(n,t,o,i,a,s,r,l,c,u,m,d,p,g,f,h,v,y,b,C,S){var $,w={profile:{},user:{},roleMap:{},userToken:S.read(),inRVAFrame:e.isDefined(o.search().inRVA)},A=null,k=function(){var e=S.read();e!==w.userToken?f.location.reload():w.userToken&&F(!0).finally(function(){w.userToken||(t.debug("Authentication failed. Reloading..."),f.location.reload())})},I=function(){var e,n,o=y[0];"undefined"!=typeof o.hidden?(n="visibilitychange",e="visibilityState"):"undefined"!=typeof o.mozHidden?(n="mozvisibilitychange",e="mozVisibilityState"):"undefined"!=typeof o.msHidden?(n="msvisibilitychange",e="msVisibilityState"):"undefined"!=typeof o.webkitHidden&&(n="webkitvisibilitychange",e="webkitVisibilityState"),o.addEventListener(n,function(){t.debug("visibility: "+o[e]),"visible"===o[e]&&k()})};I();var U=function(){return w.user?w.user.userId:null},N=function(){w.userToken=U(),S.write(w.userToken)},M=function(){t.debug("Clearing user token..."),R(),w.userToken=null,S.clear()},T=function(){p.cancel(A),A=p(function(){p.cancel(A),F(!0)},33e5)},R=function(){p.cancel(A),A=null},E=function(){$=null,m.clearObj(w.user),m.clearObj(w.profile),w.roleMap={},u.resetCompanyState(),t.debug("User state has been reset.")},L=function(){var e=n.defer();return c(w.user.username,!0).then(function(e){return q.updateUserProfile(e),u.init()}).then(function(){e.resolve()},e.reject),e.promise},x=function(e){var r=n.defer(),l={client_id:i,scope:s,cookie_policy:o.protocol()+"://"+C()};return e?l.immediate=!0:l.prompt="select_account",a().then(function(e){e.auth.authorize(l,function(e){t.debug("authResult",e),e&&!e.error?(T(),r.resolve(e)):(M(),r.reject(e.error||"failed to authorize user"))})}).then(null,r.reject),r.promise},F=function(e){var t,o=n.defer();return x(e).then(function(e){return t=e,l()}).then(function(n){w.user.username&&w.profile.username&&w.user.username===n.email?o.resolve(t):(m.clearAndCopy({userId:n.id,username:n.email,picture:n.picture},w.user),N(),L().finally(function(){o.resolve(t),d.$broadcast("risevision.user.authorized"),e||d.$broadcast("risevision.user.userSignedIn")}))}).then(null,function(e){m.clearObj(w.user),o.reject(e)}),o.promise},_=function(e){if(e){var t,o,a,r;d.redirectToRoot===!1?t=f.location.href.substr(0,f.location.href.indexOf("#"))||f.location.href:(t=f.location.origin+"/",o=f.location.pathname?f.location.pathname.substring(1):"",a=f.location.search),r=encodeURIComponent(encodeURIComponent(JSON.stringify({p:o,u:f.location.hash,s:a}))),v.set("risevision.common.userState",w),b.persist(),f.location.href=h+"?response_type=token&scope="+encodeURIComponent(s)+"&client_id="+i+"&redirect_uri="+encodeURIComponent(t)+"&prompt=select_account&state="+r;var l=n.defer();return l.promise}return O(e)},O=function(o){var i;if(o&&(E(),r.removeAll()),$)return $.promise;$=n.defer(),i=$,t.debug("authentication called");var a=function(){var n=e.isDefined(w.userToken)&&null!==w.userToken;if(t.debug("userAuthed",n),o||n===!0)F(!o).then(function(e){e&&!e.error?i.resolve():(M(),t.debug("Authentication Error: "+e.error),i.reject("Authentication Error: "+e.error))}).then(null,function(e){M(),i.reject(e)}).finally(function(){g.stopGlobal("risevision.user.authenticate")});else{var a="user is not authenticated";t.debug(a),i.reject(a),m.clearObj(w.user),g.stopGlobal("risevision.user.authenticate")}};return a(),o&&g.startGlobal("risevision.user.authenticate"),i.promise},P=function(e){var o=n.defer();return r.removeAll(),a().then(function(n){e&&(f.logoutFrame.location="https://accounts.google.com/Logout"),n.auth.signOut(),M(),E(),m.clearObj(w.user),d.$broadcast("risevision.user.signedOut"),t.debug("User is signed out."),o.resolve()},function(){o.reject()}),o.promise},D=function(){return w.user.username?!0:!1},j=function(){return null!==w.profile.username&&void 0!==w.profile.username},G=function(n){return e.isDefined(w.roleMap[n])},V=function(){return f.gapi?f.gapi.auth.getToken():null},B=function(){var n=v.get("risevision.common.userState");n&&(e.extend(w,n),v.remove("risevision.common.userState"),t.debug("userState restored with",n))},q={getUsername:function(){return w.user&&w.user.username||null},getUserEmail:function(){return w.profile.email},getCopyOfProfile:function(n){return n?e.extend({},w.profile):m.follow(w.profile)},getUserPicture:function(){return w.user.picture},hasRole:G,inRVAFrame:function(){return w.inRVAFrame},isRiseAdmin:function(){return G("sa")},isRiseStoreAdmin:function(){return G("ba")},isUserAdmin:function(){return G("ua")},isPurchaser:function(){return G("pu")},isSeller:u.isSeller,isRiseVisionUser:j,isLoggedIn:D,getAccessToken:V,checkUsername:function(e){return!(!e||!q.getUsername()||e.toUpperCase()!==q.getUsername().toUpperCase())},updateUserProfile:function(n){q.checkUsername(n.username)&&(m.clearAndCopy(e.extend({username:w.user.username},n),w.profile),w.roleMap={},w.profile.roles&&w.profile.roles.forEach(function(e){w.roleMap[e]=!0}),d.$broadcast("risevision.user.updated"))},authenticate:w.inRVAFrame?O:_,signOut:P,refreshProfile:L,getUserCompanyId:u.getUserCompanyId,getUserCompanyName:u.getUserCompanyName,getSelectedCompanyId:u.getSelectedCompanyId,getSelectedCompanyName:u.getSelectedCompanyName,getSelectedCompanyCountry:u.getSelectedCompanyCountry,getCopyOfUserCompany:u.getCopyOfUserCompany,getCopyOfSelectedCompany:u.getCopyOfSelectedCompany,isSubcompanySelected:u.isSubcompanySelected,isTestCompanySelected:u.isTestCompanySelected,updateCompanySettings:u.updateCompanySettings,updateUserCompanySettings:u.updateUserCompanySettings,resetCompany:u.resetCompany,switchCompany:u.switchCompany,_restoreState:B,_setUserToken:function(e){w.userToken=e},_persistState:function(){v.set("risevision.common.userState",w)}};return q}])}(angular),function(e){"use strict";e.module("risevision.common.companystate",["risevision.core.company","risevision.common.util"]).factory("companyState",["$location","getCompany","objectHelper","$rootScope","$log","$q",function(n,t,o,i,a,s){var r,l={userCompany:{},selectedCompany:{}},c=function(){o.clearObj(l.selectedCompany),o.clearObj(l.userCompany),a.debug("Company state has been reset.")};n.search().cid&&(a.debug("cid",n.search().cid,"saved for later processing."),r=n.search().cid);var u=function(){var e=s.defer();return t().then(function(e){var n=d.getSelectedCompanyId()?d.getSelectedCompanyId():r;return o.clearAndCopy(e,l.userCompany),m(n)}).then(null,function(){d.resetCompany()}).finally(function(){r=null,e.resolve(null)}),e.promise},m=function(e){var n=s.defer();return e&&e!==l.userCompany.id?t(e).then(function(e){o.clearAndCopy(e,l.selectedCompany),n.resolve(),i.$broadcast("risevision.company.selectedCompanyChanged")}).then(null,function(e){a.error("Failed to load selected company.",e),n.reject(e)}):(d.resetCompany(),n.resolve()),n.promise},d={init:u,switchCompany:m,updateCompanySettings:function(e){e&&e.id===d.getSelectedCompanyId()&&o.clearAndCopy(e,l.selectedCompany),e&&e.id===d.getUserCompanyId()&&o.clearAndCopy(e,l.userCompany),i.$broadcast("risevision.company.updated",{companyId:e.id})},resetCompany:function(){o.clearAndCopy(l.userCompany,l.selectedCompany),i.$broadcast("risevision.company.selectedCompanyChanged")},resetCompanyState:c,getUserCompanyId:function(){return l.userCompany&&l.userCompany.id||null},getUserCompanyName:function(){return l.userCompany&&l.userCompany.name||null},getSelectedCompanyId:function(){return l.selectedCompany&&l.selectedCompany.id||null},getSelectedCompanyName:function(){return l.selectedCompany&&l.selectedCompany.name||null},getSelectedCompanyCountry:function(){return l.selectedCompany&&l.selectedCompany.country||null},getCopyOfUserCompany:function(n){return n?e.extend({},l.userCompany):o.follow(l.userCompany)},getCopyOfSelectedCompany:function(n){return n?e.extend({},l.selectedCompany):o.follow(l.selectedCompany)},isSubcompanySelected:function(){return l.selectedCompany&&l.selectedCompany.id!==(l.userCompany&&l.userCompany.id)},isTestCompanySelected:function(){return l.selectedCompany&&l.selectedCompany.isTest===!0},isSeller:function(){return l.selectedCompany&&l.selectedCompany.sellerId?!0:!1}};return d}])}(angular),function(e){"use strict";e.module("risevision.ui-flow",["LocalStorageModule"]).constant("uiStatusDependencies",{_dependencies:{},_retries:{},addDependencies:function(n){e.extend(this._dependencies,n)},setMaximumRetryCount:function(e,n){if(1>n)throw"Retry count for "+e+" must be equal to or greater than 1.";void 0===this._retries[e]&&(this._retries[e]=n)}}).factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope","localStorageService",function(n,t,o,i,a,s){var r,l,c,u=null,m=i._dependencies,d=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},p=function(e){var t;try{t=o.get(e)}catch(i){n.debug("Generating dummy status",e),t=d()}return t},g=function(o){var i;n.debug("Attempting to reach status",o,"...");var a=m[o];if(a){a instanceof Array||(a=[a]);var s=t.defer(),r=s;e.forEach(a,function(e){var a=t.defer();s.promise.then(a.resolve,function(){g(e).then(function(){m[e]&&n.debug("Deps for status",e,"satisfied."),p(o)().then(function(){n.debug("Status",o,"satisfied."),a.resolve(!0)},function(){n.debug("Status",o,"not satisfied."),a.reject(o)})},function(t){m[e]?(n.debug("Failed to reach status",e," because its dependencies are not satisfied. Last rejected dep: ",t),a.reject(t)):a.reject(e)})}),i=s=a}),r.reject()}else i=t.defer(),p(o)().then(function(){n.debug("Termination status",o,"satisfied."),i.resolve(!0)},function(){n.debug("Termination status",o,"not satisfied."),i.reject(o)});return i.promise},f=!0,h=function(o){if(!o&&!l){var a=t.defer();return a.resolve(),a.promise}return!l&&f&&(l=o,u=e.copy(i._retries),c=t.defer(),f=!1),l&&(c=t.defer(),g(l).then(function(e){l&&(r=l),c.resolve(e),l=null,f=!0},function(e){r=e,void 0!==u[e]&&(0===u[e]?(n.debug("Maximum allowed retries for status",e,"reached. Validation will cancel."),b()):u[e]--),f=!0,c.reject(e)})),c&&c.promise},v=function(e){return r="pendingCheck",h(e)},y=function(){s.set("risevision.ui-flow.state",{goalStatus:l,retriesLeft:u})},b=function(){r="",l="",u=null,f=!0,a.$broadcast("risevision.uiStatus.validationCancelled"),n.debug("UI status validation cancelled.")};if(s.get("risevision.ui-flow.state")){var C=s.get("risevision.ui-flow.state");C&&C.goalStatus&&(l=C.goalStatus,n.debug("uiFlowManager.goalStatus restored to",C.goalStatus,C.retriesLeft),u=C.retriesLeft,c=t.defer(),f=!1),s.remove("risevision.ui-flow.state")}var S={invalidateStatus:v,cancelValidation:b,getStatus:function(){return r},isStatusUndetermined:function(){return"pendingCheck"===r},persist:y};return S}])}(angular),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.userprofile","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,n,t,o){return function(){t.debug("agreeToTerms called.");var i=e.defer();return n().then(function(e){var n=e.account.agreeToTerms();n.execute(function(e){t.debug("agreeToTerms resp",e),o.removeAll(),e.error?i.reject(e.error):i.resolve()})}),i.promise}}]).factory("agreeToTermsAndUpdateUser",["$q","$log","agreeToTerms","updateUser",function(e,n,t,o){return function(i,a){n.debug("registerAccount called.",i,a);var s=e.defer();return t().then().finally(function(){o(i,a).then(function(e){e.result?s.resolve():s.reject()},s.reject).finally("registerAccount ended")}),s.promise}}]).factory("registerAccount",["$q","$log","addAccount","updateUser",function(e,n,t,o){return function(i,a){n.debug("registerAccount called.",i,a);var s=e.defer();return t().then().finally(function(){o(i,a).then(function(e){e.result?s.resolve():s.reject()},s.reject).finally("registerAccount ended")}),s.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("addAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.add();n.execute(function(e){t.debug("addAccount resp",e),e.result?o.resolve():o.reject("addAccount")})}),o.promise}}]).factory("getAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("getAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.get();n.execute(function(e){t.debug("getAccount resp",e),e.item?o.resolve(e.item):o.reject("getAccount")})}),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.registration",["risevision.common.userstate","risevision.ui-flow","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registerdAsRiseVisionUser:"signedInWithGoogle",registeredAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registeredAsRiseVisionUser"]}),e.setMaximumRetryCount("signedInWithGoogle",1)}]).factory("signedInWithGoogle",["$q","getOAuthUserInfo","userState",function(e,n,t){return function(){var n=e.defer();return t.isLoggedIn()?n.resolve():n.reject("signedInWithGoogle"),n.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,n,t){return function(){var n=e.defer();return t().then(function(){n.reject("notLoggedIn")},n.resolve),n.promise}}]).factory("registeredAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(n,t,o,i,a){return function(){var s=n.defer();return t(a.getUsername()).then(function(n){e.isDefined(n.email)&&e.isDefined(n.mailSyncEnabled)?s.resolve(n):o.get("surpressRegistration")?s.resolve({}):s.reject("registeredAsRiseVisionUser")},function(e){o.get("surpressRegistration")?s.resolve({}):(i.debug("registeredAsRiseVisionUser rejected",e),s.reject("registeredAsRiseVisionUser"))}),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.cache",[]).value("rvStorage",sessionStorage).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var n=Array.prototype,t=n.slice,o=n.concat,i=function(e,n,t){if(void 0===n)return e;switch(null===t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,i){return e.call(n,t,o,i)};case 4:return function(t,o,i,a){return e.call(n,t,o,i,a)}}return function(){return e.apply(n,arguments)}};return function(n,a,s){var r,l={};if(null===n)return l;if(e.isFunction(a)){a=i(a,s);for(r in n){var c=n[r];a(c,r,n)&&(l[r]=c)}}else{var u=o.apply([],t.call(arguments,1));n=new Object(n);for(var m=0,d=u.length;d>m;m++)r=u[m],r in n&&(l[r]=n[r])}return l}})}(angular),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log",function(e,n,t,o){var i,a={};return function(s,r){var l;if(s===i&&!r&&null!==a[s])return a[s].promise;if(i=s,a[s]=l=t.defer(),s){var c={};s&&(c.username=s),o.debug("getUserProfile called",c),t.all([e(),n()]).then(function(e){var n=e[1];n.user.get(c).execute(function(e){e.error||!e.result?l.reject(e):(o.debug("getUser resp",e),l.resolve(e.item))})},l.reject)}else l.reject("getUserProfile failed: username param is required."),o.debug("getUserProfile failed: username param is required.");return l.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","getUserProfile","pick",function(e,n,t,o,i){return function(a,s){var r=e.defer();return s=i(s,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status"),t.debug("updateUser called",a,s),n().then(function(e){var n=e.user.patch({username:a,data:s});n.execute(function(e){t.debug("updateUser resp",e),e.error?r.reject(e):e.result?o(a,!0).then(function(){r.resolve(e)}):r.reject("updateUser")})},r.reject),r.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick",function(e,n,t,o){return function(i,a,s){var r=e.defer();return n().then(function(e){s=o(s,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status");var n=e.user.add({username:a,companyId:i,data:s});n.execute(function(e){t.debug("addUser resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,n,t){return function(o){var i=e.defer();return n().then(function(e){var n=e.user.delete({username:o});n.execute(function(e){t.debug("deleteUser resp",e),e.result?i.resolve(e):i.reject("deleteUser")})}),i.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,n,t){return function(o){t.debug("getUsers",o);var i=e.defer();return n().then(function(e){var n=e.user.list(o);n.execute(function(e){t.debug("getUsers resp",e),e.result?i.resolve(e.items):i.reject("getUsers")})},i.reject),i.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","notificationEmails","mailSyncEnabled","sellerId","isTest","shipToUseCompanyAddress","shipToName","shipToStreet","shipToUnit","shipToCity","shipToProvince","shipToPostalCode","shipToCountry"]).constant("COMPANY_SEARCH_FIELDS",["name","id","street","unit","city","province","country","postalCode","telephone","fax","shipToName","shipToStreet","shipToCity","shipToPostalCode"]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,n,t,o){return function(i,a){var s=e.defer();return n().then(function(e){var n=o.apply(this,[a].concat(t)),r=e.company.add({parentId:i,data:n});r.execute(function(e){e.result?s.resolve(e.item):s.reject(e)},s.reject)}),s.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("getCompany called",o);var i=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var a=e.company.get(n);a.execute(function(e){t.debug("getCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("lookupCompany called",o);var i=n.defer();return e().then(function(e){var n=e.company.lookup({authKey:o});n.execute(function(e){t.debug("lookupCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o,i){var a=n.defer();return e().then(function(e){var n=e.company.move({authKey:o,newParentId:i});n.execute(function(e){t.debug("moveCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,n,t,o,i){return function(a,s){var r=e.defer();return s=o.apply(this,[s].concat(i)),n.debug("updateCompany called",a,s),t().then(function(e){var t=e.company.patch({id:a,data:s});t.execute(function(e){n.debug("updateCompany resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,n,t){return function(o,i){var a=e.defer();return n.debug("regenerateField called",o,i),t().then(function(e){var t=e.company.regenerateField({id:o,fieldName:i});t.execute(function(e){n.debug("regenerateField resp",e),e.error?a.reject(e.message):a.resolve(e)},function(e){a.reject("call failed "+e)})}),a.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("deleteCompany called",o);var i=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var a=e.company.delete(n);a.execute(function(e){t.debug("deleteCompany resp",e),e.result?i.resolve(e.item):i.reject(e)})}),i.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany","COMPANY_SEARCH_FIELDS",function(e,n,t,o,i){var a=function(e,n){var t="";for(var o in e)t+="OR "+e[o]+":~'"+n+"' ";return t=t?t.substring(3):"",t.trim()};this.getCompanies=function(o,s,r,l,c){var u=n.defer(),m=s?a(i,s):"",d={companyId:o,search:m,cursor:r,count:l,sort:c};return t.debug("getCompanies called with",d),e().then(function(e){var n=e.company.list(d);n.execute(function(e){t.debug("getCompanies resp",e),u.resolve(e)})}),u.promise},this.loadSelectedCompany=function(e,t){var i=n.defer();return e&&e!==t.id?o(e).then(function(e){i.resolve(0===e.code&&e.item?e.item:t)}):i.resolve(t),i.promise},this.validateAddressSimple=function(e,n){var t=[];if(n)if(n.firstName||t.push("Missing First Name"),n.lastName||t.push("Missing Last Name"),n.email){var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;o.test(n.email)||t.push("Invalid Email")}else t.push("Missing Email");return e.street||t.push("Missing Address (Line 1)"),e.city||t.push("Missing City"),e.country||t.push("Missing Country"),e.province||t.push("Missing State / Province"),e.postalCode||t.push("Missing Zip / Postal Code"),t}}]).filter("fullAddress",function(){return function(e){var n=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return n&&(n=n.substr(0,n.length-2)),n}})}(angular),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,n,t,o){return function(){var i,a=n.defer();
return(i=t.get("oauth2UserInfo"))?i.error?a.reject(i.error):a.resolve(i):e().then(function(e){e.userinfo.get().execute(function(e){o.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(t.remove("oauth2UserInfo"),a.reject(e.error)):(t.put("oauth2UserInfo",e),a.resolve(e)):(t.remove("oauth2UserInfo"),a.reject())})},a.reject),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.systemmessages",["risevision.common.gapi"]).factory("getCoreSystemMessages",["gapiLoader","$q","$log",function(e,n,t){return function(o){var i=n.defer();return e().then(function(e){var n=e.client.core.systemmessage.list({companyId:o});n.execute(function(e){var n=e;n instanceof Array||!n.items||(n=n.items),t.debug("getCoreSystemMessage resp",n),i.resolve(n)})}),i.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.countries",["risevision.common.gapi"]).factory("getCoreCountries",["coreAPILoader","$q","$log","$filter",function(e,n,t,o){var i;return function(){return i?i.promise:(i=n.defer(),e().then(function(e){return e.country.list()}).then(function(e){var n=e.result?e.result.items:[];n instanceof Array&&(n=o("orderBy")(n,"name")),i.resolve(n)}).then(null,function(e){t.debug("getCoreCountries failed",e),i.reject(e),i=null}),i.promise)}}]).factory("COUNTRIES",["getCoreCountries",function(e){var n=[];return e().then(function(e){Array.prototype.push.apply(n,e)}),n}])}(angular),angular.module("risevision.common.fastpass",[]).factory("loadFastpass",["$q","$http","$document","$timeout","GSFP_URL","$log",function(e,n,t,o,i,a){var s=function(n){var o=e.defer(),i=t[0].createElement("script");return i.onload=i.onreadystatechange=function(e){o.resolve(e)},i.onerror=function(e){o.reject(e)},i.src=n,t[0].body.appendChild(i),o.promise};return function(t,o){var r=e.defer();a.debug("loadFastpass called",t,o);var l=function(e){a.error("loadFastpass rejected",e),r.reject("loadFastpass rejected "+e)};return n.get(i+"/geturl?userEmail="+o+"&userName="+t).then(function(e){s(e.data).then(function(e){a.debug("loadFastpass result",e),r.resolve(!0)},l).catch(l)},r.reject),r.promise}}]),angular.module("risevision.common.header").directive("fastpass",["loadFastpass","userState",function(e,n){return{restrict:"AE",scope:{},link:function(t){t.$watch(function(){return n.getUserEmail()},function(t){t&&e(n.getUsername(),n.getUserEmail())})}}}]),angular.module("risevision.common.header").directive("linkCid",["userState",function(e){return{link:function(n,t,o){var i=function(e){var n,t=o.href.indexOf("cid=");n=t>-1?o.href.substring(0,t+4)+e:o.href+(-1===o.href.indexOf("?")?"?":"&")+"cid="+e,o.$set("href",n)};n.$watch(function(){return e.getSelectedCompanyId()},function(e,n){e&&e!==n&&i(e)})}}}]),function(e){"use strict";e.module("risevision.common.company",[]).service("selectedCompanyUrlHandler",["$location","userState",function(e,n){this.updateUrl=function(){var t=n.getSelectedCompanyId();t&&e.search().cid!==t&&e.search("cid",t)},this.updateSelectedCompanyFromUrl=function(){var t=e.search().cid;t&&n.getUserCompanyId()&&t!==n.getSelectedCompanyId()?n.switchCompany(t):!t&&n.getSelectedCompanyId()&&(e.search("cid",n.getSelectedCompanyId()),e.replace())}}])}(angular),function(e){"use strict";e.module("risevision.common.shoppingcart",["risevision.common.gapi","risevision.common.userstate"]).factory("shoppingCart",["rvStorage","storeAPILoader","$log","$q","userState",function(n,t,o,i,a){var s=[],r={items:s,useBillToAddress:!1,shipToAttention:""},l=function(){var e=i.defer();return a.isLoggedIn()?t().then(function(n){var t={id:a.getUsername()},i=n.cart.get(t);i.execute(function(n){n.error?(o.warn("Error loading cart items. Error: "+n.error),e.resolve()):(m(),d(n.items),r.useBillToAddress=n.useBillToAddress,r.shipToAttention=n.shipToAttention?n.shipToAttention:"",e.resolve())})}):(m(),e.resolve()),e.promise},c=function(){var e=i.defer();return a.isLoggedIn()&&t().then(function(n){try{var t={data:{jsonItems:g(s),shipToAttention:r.shipToAttention,useBillToAddress:r.useBillToAddress}},i=n.cart.put(t);i.execute(function(n){n.error?(o.warn("Error persisting cart items. Error: "+n.error),e.resolve()):e.resolve()})}catch(a){e.resolve(),o.error("[persistToStorage] - Unimplemented API method "+a.message)}}),e.promise},u=function(){r.useBillToAddress=!1,r.shipToAttention="",m()},m=function(){for(;s.length>0;)s.pop()},d=function(e){if(e)for(var n=0;n<e.length;n++)s.push(e[n])},p=function(e){for(var n,t=[],o=0;o<e.length;o++)n={productId:e[o].productId,qty:e[o].qty,accountingId:e[o].selected.accountingId},t.push(n);return t},g=function(e){var n=p(e);return JSON.stringify(n)},f=null,h=null,v={get:function(){if(null!==f&&a.checkUsername(h))return f;h=a.getUsername(),u(),f=i.defer();var e=f;return l().then(function(){e.resolve(r)}),e},clear:function(){m(),c(),o.debug("Shopping cart cleared.")},getItems:function(){return s},setItems:function(e){return o.debug("Setting cart items",e),e!==s&&(m(),d(e)),c()},getShipToAttention:function(){return r.shipToAttention},getUseBillToAddress:function(){return r.useBillToAddress},setAddressFields:function(e,n){return r.shipToAttention=e,r.useBillToAddress=n,c()},getItemCount:function(){return null!==s?s.length:0},removeItem:function(e){if(e){for(var n=0;n<s.length;n++)if(s[n].productId===e.productId){s.splice(n,1);break}c()}},adjustItemQuantity:function(e,n){e&&$.isNumeric(n)&&n>0&&c()},addItem:function(n,t,o){if(a.isRiseVisionUser()){var i=this.findItem(n);(!i||"Subscription"!==n.paymentTerms&&"Metered"!==n.paymentTerms)&&n&&$.isNumeric(t)&&n.orderedPricing.length>o&&(i?i.qty=parseInt(i.qty)+parseInt(t):(i=e.copy(n),i.qty=t,s.push(i)),i.selected=n.orderedPricing[o],c())}},findItem:function(e){if(e)for(var n=0;n<s.length;n++)if(e.productId===s[n].productId)return s[n];return null},itemExists:function(e){return a.isRiseVisionUser()&&e&&null!==this.findItem(e)?!0:!1}};return v}])}(angular),function(e){"use strict";e.module("risevision.common.currency",["risevision.common.gapi"]).factory("currencyService",["$q","storeAPILoader","$log",function(e,n,t){var o=null,i={defaultItem:null},a=function(e){this.country=e.country,this.currencyCode=e.currencyCode,this.description=e.description,this.bankAccountCode=e.bankAccountCode,this.bankAccountDescription=e.bankAccountDescription,this.getName=function(){return this.currencyCode.toUpperCase()},this.pickPrice=function(e,n){switch(this.currencyCode.toUpperCase()){case"CAD":return n;default:return e}}};return i.getByCountry=function(e){if(e)for(var n=0;n<this.items.length;n++)if(this.items[n].country&&this.items[n].country.toUpperCase()===e.toUpperCase())return this.items[n];return this.defaultItem},i.setItems=function(e){this.items=[];for(var n=0;n<e.length;n++){var t=new a(e[n]);this.items.push(t),t.country||(this.defaultItem=t)}},function(){return null!==o?o.promise:(o=e.defer(),t.debug("currencyService called"),n().then(function(e){var n=e.currency.list();n.execute(function(e){t.debug("currencyService resp",e),e.error?(t.error("currencyService error: ",e.error),o.reject(e.error)):(i.setItems(e.items),o.resolve(i))})}),o.promise)}}])}(angular),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.config").value("ENABLE_INTERCOM_MESSAGING",!1).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("STORE_URL","https://store.risevision.com").value("STORE_ENDPOINT_URL","https://store-dot-rvaserver2.appspot.com/_ah/api").value("GSFP_URL","https://gsfp-dot-rvaserver2.appspot.com/fp")}(angular);try{angular.module("risevision.common.config")}catch(err){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("CLIENT_ID","614513768474.apps.googleusercontent.com");var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).factory("gapiLoader",["$q","$window",function(e,n){var t=e.defer();return function(){var e;if("loaded"===n.gapiLoadingStatus)t.resolve(n.gapi);else if(!n.gapiLoadingStatus){n.gapiLoadingStatus="loading";var o=n.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",o),"undefined"!=typeof i&&document.getElementsByTagName("body")[0].appendChild(i),e=function(){t.resolve(n.gapi),n.removeEventListener("gapi.loaded",e,!1)},n.addEventListener("gapi.loaded",e,!1)}return t.promise}}]).factory("gapiClientLoaderGenerator",["$q","gapiLoader","$log",function(e,n,t){return function(o,i,a){return function(){var s=e.defer();return n().then(function(e){e.client[o]?s.resolve(e.client[o]):e.client.load.apply(this,[o,i].concat([function(){if(e.client[o])t.debug(o+"."+i+" Loaded"),s.resolve(e.client[o]);else{var n=o+"."+i+" Load Failed";t.error(n),s.reject(n)}},a]))}),s.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("core","v1",o)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("rise","v0",o)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().store_api_base_url?t.search().store_api_base_url+"/_ah/api":e;return n("store","v0.01",o)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("discovery","v1",o)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("monitoring","v0",o)}]),function(e){"use strict";e.module("risevision.common.localstorage",["ngStorage"]).factory("localStorageService",["$localStorage","$sessionStorage",function(e,n){var t=localStorage?localStorage:sessionStorage,o=localStorage?e:n,i={};return i.getStorage=function(){return o},i.setItemImmediate=function(e,n){t.setItem(e,n)},i.removeItemImmediate=function(e){t.removeItem(e)},i.getItem=function(e){return t.getItem(e)},i}])}(angular),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",["$log","$q",function(n,t){function o(e,t){n.debug("pushing message",e),t.push(e)}var i=[],a=[];return i.addMessages=function(n){n&&n instanceof Array&&(n=function(n){var t=[],o=new Date;return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),i=new Date(e.startDate||0);n.setDate(n.getDate()+1),o>i&&n>o&&t.push(e)}),t}(n),n.forEach(function(e){var n=!1;i.forEach(function(t){t.text===e.text&&(n=!0)}),n||o(e,i)}),i.sort(function(e,n){return!e.startDate||e.startDate>n.startDate?1:e.startDate&&e.startDate===n.startDate?0:-1}).reverse())},i.clear=function(){i.length=0,n.debug("System message cleared.")},i.registerRetriever=function(e){a.push(e)},i.resetAndGetMessages=function(){i.clear();var e=a.map(function(e){return e.call()});return t.all(e).then(function(e){e.forEach(i.addMessages)})},i}])}(angular),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var n=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise},this.sendProductCode=function(n){var t=e.defer(),o={params:n};return gadgets.rpc.call("","rscmd_saveSettings",function(){t.resolve(!0)},o),t.promise}}]),function(){"use strict";angular.module("risevision.common.components.last-modified",[]).directive("lastModified",["$templateCache",function(e){return{restrict:"E",scope:{changeDate:"=",changedBy:"="},template:e.get("last-modified/last-modified.html"),link:function(e){e.$watch("changedBy",function(n){e.changedBy=n?n:"N/A"})}}}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified").filter("username",function(){return function(e){var n=e;return e&&-1!==e.indexOf("@")&&(n=e.substring(0,e.indexOf("@"))),n}})}(),function(e){try{e=angular.module("risevision.common.components.last-modified")}catch(n){e=angular.module("risevision.common.components.last-modified",[])}e.run(["$templateCache",function(e){e.put("last-modified/last-modified.html","<span class=\"text-muted\"><small>Saved {{changeDate | date:'d-MMM-yyyy h:mm a'}} by {{changedBy | username}}</small></span>")}])}(),angular.module("risevision.common.components.search-filter",[]).directive("searchFilter",["$timeout",function(e){return{restrict:"E",scope:{filterConfig:"=",search:"=",doSearch:"="},templateUrl:"search-filter/search-filter.html",link:function(n){n.delay=function(){var n=null;return function(t,o){e.cancel(n),n=e(t,o)}}(),n.reset=function(){n.search.query&&(n.search.query="",n.doSearch())}}}}]),function(e){try{e=angular.module("risevision.common.components.search-filter")}catch(n){e=angular.module("risevision.common.components.search-filter",[])}e.run(["$templateCache",function(e){e.put("search-filter/search-filter.html",'<div class="input-group"><span class="input-group-addon" ng-click="doSearch()"><i class="fa fa-search"></i></span> <input id="{{ filterConfig.id }}" type="text" class="form-control" placeholder="{{ filterConfig.placeholder }}" ng-model="search.query" ng-enter="delay(doSearch, 0)" ng-change="delay(doSearch, 1000)"> <span class="input-group-addon" ng-click="reset()"><i class="fa fa-times"></i></span></div>')}])}(),function(e){"use strict";e.module("risevision.common.components.scrolling-list",["rvScrollEvent"]).value("BaseList",function(e){this.list=[],this.maxCount=e?e:40,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(e,n){this.cursor=n,this.endOfList=e.length<this.maxCount,this.concat(e)}})}(angular),function(e){"use strict";var n=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,t){return{scope:!1,link:function(o,i,a){var s,r,l=e(a.rvScrollEvent),c=i[0],u="scroll",m={x:0,y:0},d=function(){r=function(e){m.x=c.scrollLeft,m.y=c.scrollTop,p(e),g(),f(e,!1)},i.bind(u,r)},p=function(e){s=t.setInterval(function(){m.x===c.scrollLeft&&m.y===c.scrollTop?(t.clearInterval(s),d(),f(e,!0)):(m.x=c.scrollLeft,m.y=c.scrollTop)},n)},g=function(){i.unbind(u,r)},f=function(e,n){o.$apply(function(){l(o,{$event:e,isEndEvent:n})})};d()}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.scrolling-list").directive("scrollingList",["$parse","$compile",function(e,n){return{restrict:"A",replace:!1,terminal:!0,priority:1e3,link:function(t,o,i){var a=e(i.scrollingList);t.handleScroll=function(e,n){n&&e.target.scrollTop&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&a(t)},o.attr("rv-scroll-event","handleScroll($event, isEndEvent)"),o.removeAttr("scrolling-list"),n(o)(t)}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").factory("segmentAnalytics",["$rootScope","$window","$log","$location",function(e,n,t,o){function i(e){e&&(n.intercomSettings=n.intercomSettings||{},n.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}function a(){e.$on("$viewContentLoaded",function(){r.location!==o.path()&&(r.location=o.path(),r.pageview(r.location))})}var s,r={};n.analytics=n.analytics||[];var l=n.analytics;l.factory=function(e){function i(n,t){"track"===e&&t&&t.length>1&&t[1]&&"object"==typeof t[1]&&(t[1].url=o.host())}return function(){var o=Array.prototype.slice.call(arguments);return i(e,o),o.unshift(e),n.analytics.push(o),t.debug("Segment Tracker",o),n.analytics}},l.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var c=0;c<l.methods.length;c++){var u=l.methods[c];r[u]=l.factory(u)}return r.load=function(e,n){if(e&&!s){i(n),a();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o),s=!0}},r}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,n,t){var o={},i=function(){var e=t.getCopyOfProfile();n.identify(t.getUsername(),{email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:"",companyId:t.getUserCompanyId(),companyName:t.getUserCompanyName(),company:{id:t.getUserCompanyId(),name:t.getUserCompanyName()}})};return o.initialize=function(){e.$on("risevision.user.authorized",function(){t.getUsername()&&i()})},o}])}(angular);