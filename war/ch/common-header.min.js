!function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons-menu.html",'<ul>\n  <li class="new-app">  \n    <a href="https://apps.risevision.com/editor" target="_blank" link-cid>\n      <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image.png"></div>\n      <span>Presentations</span>\n    </a>\n  </li>\n\n  <li class="new-app">\n      <a href="https://apps.risevision.com/schedules" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/schedule-image.png"></div>\n        <span>Schedules</span>\n      </a>\n  </li>\n  \n  <li class="new-app"> \n      <a href="https://apps.risevision.com/displays" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/displays-image.png"></div>\n        <span>Displays</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://store.risevision.com/" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/store-image.png"></div>\n        <span>Store</span>\n      </a>\n  </li>\n\n  <li>\n      <a href="https://storage.risevision.com/" target="_blank" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/storage-image.png"></div>\n        <span>Storage</span>\n      </a>\n  </li>\n\n   <li>\n      <a href="https://rva.risevision.com/#PRESENTATIONS" target="_blank" class="old-app" link-cid>\n        <div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image-gray.png"></div>\n        <span>Classic Editor</span>\n      </a>\n  </li>\n\n \n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("app-nav-buttons.html",'<li dropdown class="dropdown hidden-xs">\n  <button dropdown-toggle class="dropdown-toggle btn btn-link"><i class="fa fa-lg fa-th"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n    <ng-include \n      replace-include\n      src="\'app-nav-buttons-menu.html\'">\n    </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li class="visible-xs-inline-block" >\n  <a href="" class="company-buttons-icon-mobile"\n  action-sheet="\'app-nav-buttons-menu.html\'"\n  action-sheet-class="app-navigation">\n    <i class="fa fa-th"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons-menu.html",'<company-buttons\n  ng-show="isRiseVisionUser"\n  ng-controller="CompanyButtonsCtrl"\n></company-buttons>\n\n<ul>\n  <li ng-show="isRiseVisionUser">\n    <a href="" ng-click="userSettings()" class="user-settings-button action">\n      <i class="fa fa-user"></i>\n      <span class="item-name">User Settings</span>\n    </a>\n  </li>\n\n  <span ng-if="isLoggedIn && !isRiseVisionUser" class="google-account" class="username">{{username}}</span>\n\n  <li class="dropdown-footer text-right" ng-show="isLoggedIn">\n    <button class="sign-out-button btn btn-sm btn-default" ng-click="logout()">Sign Out<i class="fa fa-sign-out icon-right"></i>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("auth-buttons.html",'<!-- Desktop and tablet -->\n<li\n  ng-show="isLoggedIn && !isRiseVisionUser && !loading">\n  <button type="button" href="" ng-click="register()"\n    class="btn btn-danger register-user-menu-button">\n    Complete Registration\n  </button>\n</li>\n<li\n  dropdown\n  class="dropdown user-profile-dropdown desktop-menu-item"\n  ng-class="{\'hidden-xs\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="dropdown-toggle">\n      <div class="user-id pull-left">\n        <span ng-class="{\'pending-registration\' : isLoggedIn && !isRiseVisionUser && !loading}" class="username">{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n      <img ng-src="{{userPicture}}"\n        class="profile-pic" width="30" height="30" alt="User" />\n    </a>\n    <div class="dropdown-menu" role="menu">\n      <ng-include\n        src="\'auth-buttons-menu.html\'"\n        replace-include\n      ></ng-include>\n    </div>\n</li>\n<!-- Mobile -->\n<li\n  dropdown\n  class="dropdown user-profile-dropdown mobile-menu-item"\n  ng-class="{\'visible-xs-inline-block\': isLoggedIn}"\n  ng-show="isLoggedIn"\n  >\n    <a href="" dropdown-toggle class="visible-xs dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'"\n      action-sheet-class="user-profile-dropdown">\n      <div class="user-id">\n        <span>{{username}}</span>\n        <span><strong>{{companyName}}</strong></span>\n      </div>\n    </a>\n</li>\n<!-- If User NOT Authenticated -->\n<li ng-show="!undetermined && isLoggedIn === false" ng-controller="SignUpButtonCtrl">\n  <button type="button" ng-click="openSignUpModal()"\n  class="btn-primary btn add-right">\n   Sign Up Free</button>\n</li>\n<li ng-show="!undetermined && isLoggedIn === false">\n  <button type="button" class="sign-in top-auth-button" ng-click="login(\'registrationComplete\')">\n    Sign In\n  </button>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("authorization-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()">\n  		<i class="fa fa-times"></i>\n  	</button>\n</div>\n<div class="modal-body authorization-modal"\n  stop-event="touchend"\n  rv-spinner="spinnerOptions"\n  rv-spinner-key="authenticate-button"\n  rv-spinner-start-active="0"\n>\n  <img src="//rise-vision.github.io/style-guide/img/avatar_2x.jpg" class="profile-img">\n  <p>Please authorize your Google Account to register with Rise Vision.</p>\n\n  <button type="button" class="btn btn-success btn-fixed-width btn-block authorize-button" ng-click="authenticate(true)">\n    Authorize <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("close-frame-button.html",'<li class="close-frame">\n  <a href="" class="close-frame-button" ng-click="closeIFrame()">\n    <i class="fa fa-times"></i>\n  </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("common-header.html",'<!-- Common Header Navbar -->\n<nav class="navbar navbar-default navbar-static-top"\n	ng-class="{\'active-banner\': isSubcompanySelected() || isTestCompanySelected()}" role="navigation">\n	<div class="container">\n		<div class="navbar-header" style="width: 100%;">\n			<a class="navbar-brand visible-md visible-lg"\n			  href="http://www.risevision.com/" target="{{newTabHome ? \'_blank\' : \'_self\'}}" ng-if="!inRVAFrame">\n				<img src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n			</a>\n			<a class="navbar-brand hidden-md hidden-lg text-center"\n				href="" off-canvas-toggle>\n				<i class="fa fa-bars"></i>\n			</a>\n			<!-- If User Authenticated -->\n			<!-- Action Nav -->\n			<ul class="nav navbar-nav navbar-right actions-nav pull-right">\n				<!-- Help Dropdown -->\n				<ng-include\n					replace-include\n					ng-controller="HelpDropdownButtonCtrl"\n					src="\'help-dropdown.html\'"\n				></ng-include>\n				<!-- END Help Dropdown -->\n				<!-- Notifications -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="SystemMessagesButtonCtrl"\n					src="\'system-messages-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-controller="ShoppingCartButtonCtrl"\n					src="\'shoppingcart-button.html\'"\n				></ng-include>\n				<!-- Shopping Cart -->\n				<ng-include\n					replace-include\n					ng-if="inRVAFrame"\n					ng-controller="CloseFrameButtonCtrl"\n					src="\'close-frame-button.html\'"\n				></ng-include>\n				<!-- Current App -->\n				<ng-include\n					ng-if="!inRVAFrame"\n					replace-include\n					src="\'app-nav-buttons.html\'"\n				></ng-include>\n				<!-- END Current App -->\n				<!-- Auth -->\n				<ng-include\n					replace-include\n					ng-if="!inRVAFrame"\n				  ng-controller="AuthButtonsCtr"\n					src="\'auth-buttons.html\'"\n				></ng-include>\n				<li ng-if="inRVAFrame"\n				  ng-controller="AuthButtonsCtr"></li>\n			</ul>\n			<!-- END Action Nav -->\n\n			<!-- Nav Links -->\n			<div class="navbar-collapse navbar-left hidden-xs hidden-sm">\n				<ul class="nav navbar-nav">\n					<li ng-repeat="opt in navOptions">\n						<a ng-href="{{opt.link}}" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a>\n					</li>\n					<li ng-if="!inRVAFrame && !hideHelpMenu">\n						<a href="http://www.risevision.com/help/" target="_blank">\n							Help\n						</a>\n					</li>\n				</ul>\n			</div>\n			<!-- END Nav Links -->\n		</div>\n\n		<ng-include\n		replace-include\n		ng-controller="TestCompanyBannerCtrl"\n		src="\'test-company-banner.html\'"></ng-include>\n		\n		<ng-include\n		replace-include\n		ng-controller="SubcompanyBannerCtrl"\n		src="\'subcompany-banner.html\'"></ng-include>\n	</div>\n</nav>\n\n<div ng-show="cookieEnabled === false" class="bg-warning add-padding text-center">\n    <small><strong>Cookies Are Disabled.</strong> Rise Vision needs to use cookies to properly function. Please enable Cookies and Third-Party Cookies on your web browser and refresh this page.</small>\n</div>\n\n<ng-include\n	replace-include\n	ng-controller="GlobalAlertsCtrl"\n	src="\'global-alerts.html\'"></ng-include>\n\n<!-- END Common Header Navbar -->\n\n<!-- Off Canvas Version of the Nav -->\n<nav class="off-canvas-nav" off-canvas-nav>\n  <ul class="nav nav-pills nav-stacked">\n  	<li off-canvas-toggle>\n  		<i class="fa fa-times fa-2x pull-right"></i>\n  		<img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision">\n  	</li>\n    <li ng-repeat="opt in navOptions">\n			<a ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a>\n		</li>\n		<li ng-if="!hideHelpMenu">\n			<a target="_blank" href="http://www.risevision.com/help">Help</a>\n		</li>\n  </ul>\n</nav>\n<iframe name="logoutFrame" id="logoutFrame" style=\'display:none\'></iframe>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-buttons-menu.html",'<ul>\n  <li class="dropdown-header" ng-show="!isSubcompanySelected">\n    <p>{{username}}</p>\n    <p><strong>{{selectedCompanyName}}</strong>\n      <span class="text-muted" ng-show="isRiseVisionUser && !isSubcompanySelected">|</span>\n      <a id="select-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser && !isSubcompanySelected">Select Sub-Company</a>\n    </p>\n  </li>\n\n  <li class="dropdown-header sub-company-header" ng-show="isSubcompanySelected">\n    <p>You are in Sub-Company <strong>{{selectedCompanyName}}</strong>\n    <span class="text-muted">|</span>\n     <a id="change-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser">Change</a></p>\n    <p><a id="reset-subcompany-button" href="" ng-click="resetCompany()">Switch to My Company</a></p>\n  </li>\n\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button">\n      <i class="fa fa-plus"></i>\n      <span class="item-name">Add Sub-Company</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" ng-click="companySettings()" class="action company-settings-menu-button">\n      <i class="fa fa-building"></i>\n      <span class="item-name">Company Settings</span>\n    </a>\n  </li>\n  <li ng-show="isUserAdmin || isRiseAdmin">\n    <a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button">\n      <i class="fa fa-users"></i>\n      <span class="item-name">Company Users</span>\n    </a>\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}">\n  <label for="company-settings-name">\n    Name *\n  </label>\n  <input required id="company-settings-name" type="text" class="form-control"\n    ng-model="company.name" name="name" />\n  <p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine"\n    class="help-block validation-error-message-name">Company name is required.</p>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-street" class="control-label">\n        Street\n      </label>\n      <input id="company-settings-street" type="text" class="form-control" ng-model="company.street" />\n    </div>\n  </div>\n  <div class="col-md-6">\n    <div class="form-group">\n      <label for="company-settings-unit" class="control-label">\n        Unit\n      </label>\n      <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit" />\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-3">      \n    <div class="form-group">\n      <label for="company-settings-city" class="control-label">\n        City\n      </label>\n      <input id="company-settings-city" type="text" class="form-control" ng-model="company.city" />\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-country" class="control-label">\n        Country\n      </label>\n      <select id="company-settings-country" class="form-control selectpicker"\n        ng-model="company.country" ng-options="c.code as c.name for c in countries" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Country &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-state" class="control-label">\n        State/Province/Region\n      </label>\n      <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'" />\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select Province &gt;</option>\n      </select>\n      <select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'" empty-select-parser>\n        <option ng-show="false" value="">&lt; Select State &gt;</option>\n      </select>\n    </div>\n  </div>\n  <div class="col-md-3">\n    <div class="form-group">\n      <label for="company-settings-zip" class="control-label">\n        Zip/Postal Code\n      </label>\n      <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode" />\n    </div>\n  </div>\n</div>\n<div class="form-group">\n  <label for="company-settings-phone" class="control-label">\n    Phone\n  </label>\n  <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"/>\n</div>\n<div class="form-group">\n  <label for="company-settings-timezone" class="control-label">Time Zone</label>\n  <select class="form-control" ng-model="company.timeZoneOffset" integer-parser>\n    <option ng-show="false" value="">&lt; Select Time Zone &gt;</option>\n    <option value="{{c[1]}}" ng-repeat="c in timezones">{{c[0]}}</option>\n  </select>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-selector-modal.html",'\n<form role="form">\n	<div class="modal-header">\n		<button type="button" class="close" data-dismiss="modal"\n		  aria-hidden="true" ng-click="closeModal()">\n			<i class="fa fa-times"></i>\n		</button>\n		<h2 id="switch-company" class="modal-title">\n			Select Sub-Company\n		</h2>\n	</div>\n	<div class="modal-body select-subcompany-modal" stop-event="touchend">\n	  <!-- Search -->\n		<search-filter filter-config="filterConfig" search="search" do-search="doSearch"></search-filter> \n\n		<!-- List of Companies -->\n		<div class="list-group scrollable-list half-top"\n		  scrolling-list="loadCompanies()"\n		  rv-spinner rv-spinner-key="company-selector-modal-list"\n			rv-spinner-start-active="1"\n		>\n			<div class="list-group-item"  ng-repeat="company in companies.list" ng-click="setCompany(company)">\n				<p class="list-group-item-text"><strong>{{company.name}}</strong><br/><small class="text-muted">{{company | fullAddress}}</small>\n				</p>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button type="button" class="btn btn-default btn-fixed-width" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel\n			<i class="fa fa-white fa-times icon-right"></i>\n		</button>\n	</div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-settings-modal.html",'<div rv-spinner\n  rv-spinner-key="company-settings-modal"\n  rv-spinner-start-active="1">\n\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-settings-label" class="modal-title">Company Settings</h2>\n</div>\n<div class="modal-body company-settings-modal" stop-event="touchend">\n  <form id="companyForm" role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <label>\n        Authentication Key\n      </label>\n      <a class="action-link ps-reset-auth-key" href="" ng-click="resetAuthKey()">Reset</a>\n      <div class="ps-auth-key">\n        {{company.authKey}}\n      </div>\n    </div>\n    <div class="form-group">\n      <label>\n        Claim ID\n      </label>\n      <a class="action-link ps-reset-claim-id" href="" ng-click="resetClaimId()">Reset</a>\n      <div class="ps-claim-id">\n        {{company.claimId}}\n      </div>\n    </div>\n    <div class="form-group" ng-hide="true">\n      <label>\n        Sub-Company Home Page Presentation\n      </label>\n      <a class="action-link" href="" ng-click="showSelector()">Select</a>\n      <a class="action-link" href="">Default</a>\n      <div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div>\n      <div class="presentation-selector" ng-show="isSelectorVisible">\n        <div class="panel panel-default">\n          <ul class="list-unstyled selector-header">\n            <li ng-class="{active : selected == \'list\'}">\n              <a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a>\n            </li>\n            <li ng-class="{active : selected == \'search\'}">\n              <a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a>\n            </li>\n            <li class="close-button">\n              <button type="button" class="close" aria-hidden="true" ng-click="closeSelector()">\n                <i class="fa fa-times"></i>\n              </button>\n            </li>\n          </ul>\n          <div class="panel-body">\n            <div class="presentation-list" ng-show="selected == \'list\'">\n              <div class="input-group search">\n                <input type="text" class="form-control" placeholder="Search Presentations">\n                <span class="input-group-btn">\n                  <button class="btn btn-primary" type="submit">\n                    <i class="fa fa-search fa-white"></i>\n                  </button>\n                </span>\n              </div>\n              <div class="list-group scrollable-list">\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">\n                  Demo Presentation\n                </a>\n                <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">\n                  My First Presentation\n                </a>\n              </div>\n            </div>\n            <div class="presentation-search" ng-show="selected == \'search\'">\n              <form role="form">\n                <div class="form-group">\n                  <input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID" />\n                </div>\n                <div class="form-group">\n                  <a href="" ng-click="setPresentation($event)">Retrieve Presentation</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-community-url">\n          Sub-Company Community URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-community-url" type="url" class="form-control" />\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-support-url">\n          Sub-Company Support URL\n        </label>\n        <a class="action-link" href="">Default</a>\n        <input id="company-settings-support-url" type="url" class="form-control" />\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isSeller" />\n          Registered Seller\n        </label>\n      </div>\n      <div class="checkbox" ng-if="isRiseStoreAdmin">\n        <label>\n          <input type="checkbox" ng-model="company.isTest" />\n          Test Company\n        </label>\n      </div>\n      <div class="form-group" ng-hide="true">\n        <label for="company-settings-status">\n          Status\n        </label>\n        <select id="company-settings-status" class="form-control selectpicker">\n          <option value="active">Active</option>\n          <option value="inactive">Inactive</option>\n        </select>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <p class="visible-xs text-right"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></p>\n    <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n      ng-show="!isDeletingCompany" ng-click="deleteCompany()">\n      Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">\n      Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i>\n    </button>\n    <div class="pull-right">\n      <span class="hidden-xs"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></span>\n      <button type="button" id="save-button"\n        class="btn btn-primary btn-fixed-width" ng-click="save()"\n        ng-disabled="forms.companyForm.$invalid">Save\n        <i class="fa fa-white fa-check icon-right"></i>\n      </button>\n      <button type="button" id="close-button"\n        class="btn btn-default btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Cancel\n        <i class="fa fa-white fa-times icon-right"></i>\n      </button>\n    </div>\n  </div>\n</div>\n</div> <!--spinner -->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("company-users-modal.html",'<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal"\n    aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="company-users-label" class="modal-title">Company Users</h2>\n</div>\n<div class="modal-body company-users-modal" stop-event="touchend">\n  <!-- CSV Button -->\n  <div class="row action-bar add-bottom" ng-if="false">\n    <button class="btn btn-secondary" ng-csv="users"\n      filename="users.csv">Download to CSV</button>\n  </div>\n  <!-- Search -->\n  <div class="input-group company-search add-bottom">\n    <input id="csSearch" type="text" class="form-control"\n      placeholder="Search Users"\n      ng-model="search.searchString"\n      ng-enter="doSearch()">\n      <span class="input-group-addon primary-bg" ng-click="doSearch()">\n        <i class="fa fa-search"></i>\n      </span>\n  </div>\n  <!-- List of Users -->\n  <div class="list-group scrollable-list company-users-list"\n    rv-spinner\n    rv-spinner-key="company-users-list"\n    rv-spinner-start-active="1">\n    <div class="list-group-item  company-users-list-item"\n      ng-repeat="user in users | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)">\n      <p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p>\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-success add-company-user-button"\n    ng-click="addUser()">Add User\n    <i class="fa fa-white fa-plus icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default close-company-users-button"\n    data-dismiss="modal" ng-click="closeModal()">\n    Cancel <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("global-alerts.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="alert alert-danger" role="alert" ng-repeat="msg in errors">\n        <span ng-bind-html="msg"></span>\n        <button type="button" class="close pull-right"\n          ng-click="dismiss(\'errors\', $index);">\n          <i class="fa fa-times"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown-menu.html",'<ul>\n  <li><a id="askCommunityButton" href="https://community.risevision.com/rise_vision_inc" target="_blank">Ask the Community</a></li>\n  <li>\n      <a ng-if="isLoggedIn === false" ng-controller="SignUpButtonCtrl" id="prioritySupportButton" href="" ng-click="openSignUpModal()">Priority Support <span class="text-green">Fastest</span></a>\n      <a ng-if="isLoggedIn === true" id="prioritySupportButton" href="" ng-click="openPrioritySupport()">Priority Support <span class="text-green">Fastest</span></a>\n  </li>\n  <li><a id="sendUsANoteButton" href="" ng-click="openSendUsANote()">Send Us a Note</a></li>\n  <li><a id="signUpForTrainingButton" href="https://store.risevision.com/product/30/rise-training" target="_blank">Sign Up for Training</a></li>\n  <li><a id="documentationButton" href="https://help.risevision.com/user" target="_blank">Documentation</a></li>\n</ul>\n\n\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-dropdown.html",'<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" dropdown class="dropdown hidden-xs">\n  <button id="helpDropdownButton" dropdown-toggle class="dropdown-toggle btn btn-primary"><span class="hidden-sm hidden-xs hidden-md">Need Help</span><i class="fa fa-question icon-white"></i></button>\n  <div class="dropdown-menu app-navigation" role="menu">\n      <ng-include\n              replace-include\n              src="\'help-dropdown-menu.html\'">\n      </ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li ng-show="!isLoggedIn || (isLoggedIn && isRiseVisionUser)" class="visible-xs-inline-block" >\n    <button class="dropdown-toggle btn btn-primary"\n       action-sheet="\'help-dropdown-menu.html\'"\n       action-sheet-class="app-navigation">\n        <i class="fa fa-question icon-white"></i>\n    </button>\n</li>\n\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-priority-support-modal.html",'<div id="prioritySupportModal">\n    <div class="modal-header">\n        <button id="prioritySupportModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title">Priority Support</h2>\n    </div>\n    <div class="modal-body" stop-event="touchend">\n\n        <div class="add-bottom blank-state">\n            <div class="product-graphic" ng-show="[\'trial-available\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n                <img itemprop="image" class="img-responsive" src="https://s3.amazonaws.com/Store-Products/Rise-Vision/support_image.png">\n            </div>\n\n            <div ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0">\n\n                <p class="lead">\n                <strong>Need help fast?</strong>\n                Check out Priority Support and have a response in <strong>10 minutes</strong>. We are online 8-5 CST Monday through Friday.\n                </p>\n\n                <div ng-show="subscriptionStatus.statusCode === \'on-trial\'" class="subscription-status trial">\n                    <span  ng-bind-html="\'subscription-status.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n                    <a class="btn btn-primary add-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'trial-expired\'" class="subscription-status expired">\n                    <span translate="subscription-status.expanded-expired"></span>\n                    <a class="btn btn-primary add-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'cancelled\'" class="subscription-status cancelled">\n                    <span translate="subscription-status.expanded-cancelled"></span>\n                    <a class="btn btn-primary add-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n                <div ng-show="subscriptionStatus.statusCode === \'suspended\'" class="subscription-status suspended">\n                    <span translate="subscription-status.expanded-suspended"></span>\n                    <a class="btn btn-primary add-left" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n            </div><!--content-box-body-->\n\n            <div class="content-box-body" ng-show="[\'trial-available\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n                <div class="product-intro">\n                    <h1>Priority Support</h1>\n                    <p class="lead">Get the help you need in 10 minutes or less, 8-5 CST Monday through Friday, or let us remotely connect, diagnose and correct display problems all without the need for you to intervene!</p>\n                    <p class="lead">$75 per Company per Month.</p>\n                    <button ng-show="subscriptionStatus.statusCode === \'trial-available\'" type="button" class="btn btn-hg btn-primary" ng-click="startTrial()">Start Your Free Trial</button>\n                    <a ng-show="[\'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-hg btn-primary" href="{{supportProductUrl}}" ng-click="dismiss()" target="_blank">\n                        <span>Subscribe Now!</span>\n                    </a>\n                </div>\n            </div>\n        </div><!--blank-state-->\n    </div>\n</div>');
}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("help-send-us-a-note-modal.html",'<div id="sendUsANoteModal">\n    <div class="modal-header">\n        <button id="sendUsANoteModalCloseButton" ng-click="dismiss()" type="button" class="close">\n            <i class="fa fa-times"></i>\n        </button>\n        <h2 class="modal-title"></h2>\n    </div>\n    <div class="modal-body text-center" stop-event="touchend">\n        <p class="lead"><strong>Something else in mind?</strong> Send us a note and we will typically get back to you next business day.</p>\n        <button class="btn btn-primary btn-lg" ng-click="sendUsANote()">\n            Send Us a Note\n        </button>\n\n        <div class="content-box add-top remove-bottom">\n          <div class="content-box-body">\n            <p class="lead add-left add-right">\n                <strong>Need help fast?</strong>\n                Check out Priority Support and have a response in <strong>10 minutes</strong>. We are online 8-5 CST Monday through Friday.\n            </p>\n            <button ng-if="subscriptionStatus.statusCode === \'trial-available\'" class="btn btn-primary btn-lg" ng-click="startTrial()">\n                Start Your Free Trial\n            </button>\n\n            <a ng-if="!subscriptionStatus.statusCode || [\'not-subscribed\', \'trial-expired\', \'cancelled\', \'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-primary btn-lg" href="{{supportProductUrl}}" ng-click="dismiss();" target="_blank">\n                Subscribe Now\n            </a>\n            <button ng-if="[\'on-trial\', \'subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0" class="btn btn-primary btn-lg" ng-click="prioritySupport()">\n                Use Priority Support\n            </button>\n      </div><!--content-box-body-->\n    </div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("move-company-modal.html",'<div rv-spinner\n  rv-spinner-key="move-company-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="move-company-label" class="modal-title">Move Company</h2>\n</div>\n<div class="modal-body move-company-modal" stop-event="touchend">\n  <form role="form">\n    <div class="form-group">\n      <label for="auth-key">\n        Enter the Authentication Key of the Company that you want to move.\n      </label>\n      <div class="row">\n        <div class="col-sm-6">\n          <input id="auth-key" type="text" class="form-control"\n          ng-model="company.authKey" />\n        </div>\n        <div class="col-sm-6">\n          <a href="" class="btn btn-secondary retrieve-company-details-button"\n          ng-disabled="!company.authKey"\n          ng-click="getCompany()">Retrieve Company Details</a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div ng-show="company.name" class="company-details-info">\n    <h3>Details of the Company You Want to Move</h3>\n    <div>\n      {{company.name}}<br>\n      {{company.address}}\n      {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}\n    </div>\n    <h3>Details of the Company You Are Moving the Above Company Under</h3>\n    <div class="to-company">\n      {{selectedCompany.name}}<br>\n      {{selectedCompany.address}}<br>\n      {{selectedCompany.city}}, {{selectedCompany.province}},\n      {{selectedCompany.country}} {{selectedCompany.postalCode}}\n    </div>\n  </div>\n  <div ng-show="errors.length > 0">\n    <div class="alert alert-danger" ng-repeat="error in errors">\n      {{error}}\n    </div>\n  </div>\n  <div ng-show="messages.length > 0">\n    <div class="alert alert-success" ng-repeat="message in messages">\n      {{message}}\n    </div>\n  </div>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success move-company-button"\n    ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width close-move-company-button" data-dismiss="modal" ng-click="closeModal()">\n    {{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("registration-modal.html",'<div rv-spinner\nrv-spinner-key="registration-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close registration-cancel-button" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 class="modal-title">Let\'s finish with your details</h2>\n</div>\n<div class="modal-body registration-modal" stop-event="touchend">\n  \n  <div class="row">\n    <div class="col-sm-8">\n\n      <form id="registrationForm" novalidate role="form" name="forms.registrationForm">\n        <!-- First Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine }">\n          <label for="firstName">First Name</label>\n          <input type="text" class="form-control firstName"\n          name="firstName"\n          id="firstName" required\n          ng-model="profile.firstName">\n          <p ng-show="forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine"\n            class="help-block validation-error-message-first-name">Enter First Name.</p>\n        </div>\n        <!-- Last Name -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine }">\n          <label for="lastName">Last Name</label>\n          <input type="text" class="form-control lastName"\n          name="lastName"\n          id="lastName" required\n          ng-model="profile.lastName">\n          <p ng-show="forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine"\n            class="help-block validation-error-message-last-name">Enter Last Name.</p>\n        </div>\n        <!-- Email -->\n        <div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine }">\n          <label for="email">Email <span>(We\'ll only send you system notices and other critical information)</span></label>\n          <input type="email" class="form-control email"\n          name="email"\n          id="email" required\n          ng-model="profile.email">\n          <p ng-show="forms.registrationForm.email.$invalid && !forms.registrationForm.email.$pristine"\n            class="help-block validation-error-message-email">Enter a valid email.</p>\n        </div>\n        <!-- Terms of Service and Privacy -->\n        <div class="checkbox form-group" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }">\n          <label>\n          <input type="checkbox" name="accepted"\n            ng-model="profile.accepted"\n            class="accept-terms-checkbox" required />\n          I accept the terms of <a href="http://www.risevision.com/terms-service-privacy/" target="_blank">Service and Privacy</a>\n          <p ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine"\n            class="help-block validation-error-message-accepted">You must accept terms and condtions.</p>\n          </label>\n        </div>\n        <!-- Newsletter -->\n        <div class="checkbox form-group">\n          <label>\n            <input type="checkbox" class="sign-up-newsletter-checkbox" ng-model="profile.mailSyncEnabled"> Sign up for our newsletter\n          </label>\n        </div>\n        <div class="add-top">\n          <button ng-click="save()"\n            name="create-account"\n            type="button"\n            class="btn btn-lg btn-success btn-block registration-save-button"\n            ng-disabled="registering">\n            Create Account <i class="fa fa-white fa-check icon-right"></i>\n          </button>\n          <button type="button" class="btn hidden btn-lg btn-link btn-fixed-width"\n          ng-disabled="registering"\n          ng-click="closeModal()">\n            Cancel\n          </button>\n        </div>\n      </form>\n\n    </div>\n    <div class="col-sm-4">\n      <div class="signup-counters">\n        <div class="counter">\n          <p>129</p>\n          <span>New Companies Added Yesterday</span>\n        </div>\n        <div class="counter">\n          <p>72,990</p>\n          <span>Total Companies</span>\n        </div>\n        <div class="counter">\n          <p>120</p>\n          <span>Countries with Active Displays</span>\n        </div>\n      </div>\n    </div>\n  </div>  \n\n  \n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("safe-delete-modal.html",'<form id="safeDeleteForm">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true">\n      <i class="fa fa-times"></i>\n    </button>\n    <h3 class="modal-title" translate>common.safeDelete.title</h3>\n  </div>\n  <div class="modal-body" stop-event="touchend">\n    <p translate>common.safeDelete.message</p>\n    <input id="safeDeleteInput" type="text" ng-model="inputText" class="form-control" />\n  </div>\n  <div class="modal-footer">\n    <button id="deleteForeverButton" class="btn btn-primary" ng-click="confirm()" ng-disabled="!canConfirm">\n      <span translate>common.delete-forever</span> <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button class="btn btn-default btn-fixed-width" ng-click="cancel()">\n      <span translate>common.cancel</span> <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</form>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("shoppingcart-button.html",'<li class="shopping-cart" ng-show="!hideShoppingCart && isRiseVisionUser">\n<a href="{{shoppingCartUrl}}" class="shopping-cart-button">\n  <i class="fa fa-shopping-cart"></i>\n  <span id="cartBadge" class="label label-primary" ng-show="cart.items.length">\n    {{cart.items.length | surpressZero}}</span>\n</a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signout-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sign-out-label" class="modal-title">Sign Out</h2>\n</div>\n<div class="modal-body sign-out-modal" stop-event="touchend">\n  <form role="form">\n    <p>\n      Signing out does not sign you out of your Google Account.\n    </p>\n    <p>\n      If you are on a shared computer you should sign out of your Google Account.\n    </p>\n    <p>\n      <button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out\n        <i class="fa fa-sign-out fa-lg icon-right"></i>\n      </button>\n    </p>\n      <button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account\n        <i class="fa fa-google-plus-square fa-lg icon-right"></i>\n      </button>\n    <p>\n    </p>\n  </form>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("signup-modal.html",'<div class="modal-body text-center" stop-event="touchend">\n  <div class="signup-modal">\n    <div class="logo add-bottom hidden">\n      <img style="width:120px" src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" alt="Rise Vision">\n    </div>\n    <h1 class="modal-title add-top remove-bottom">New to Rise Vision?</h1>\n    <p class="text-muted">CREATE A FREE ACCOUNT</p>\n\n    <a class="add-top btn btn-hg btn-google-auth" id="google-registration-button" ng-click="login(\'registrationComplete\')"><strong>Sign Up with Google</strong> <i class="fa fa-google fa-lg icon-right"></i></a>\n    <p class="text-muted remove-bottom half-top"><a href="https://accounts.google.com/signup" target="_blank">I don\'t have a Google Account</a></p>\n    <p class="text-muted hidden">Already a Rise Vision User? <a ng-click="$event.preventDefault(); login(\'registrationComplete\');" ng-href="#">Sign In</a></p>\n\n    <div class="signup-offer">\n      <p>Get <strong>Unlimited Access To All Features</strong> Including Our Most Popular Widgets</p>\n      <ul class="list-unstyled widgets-offer">\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/web.png"><span>Web <br>Page</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/spreadsheet.png"><span>Google Spreadsheet</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/calendar.png"><span>Google Calendar</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/rss.png"><span>RSS <br>Feed</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/news.png"><span>News <br>Headlines</span></li>\n        <li><img src="https://s3.amazonaws.com/Rise-Images/Experimental/video.png"><span>Video <br>Folder</span></li>\n      </ul>\n    </div>\n  </div><!--signup-modal-->  \n</div><!--modal-body-->\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame"\n  class="common-header-alert sub-company-alert">\n  You\'re in Sub-Company {{selectedCompanyName}}&nbsp;\n  <a href="" ng-click="switchToMyCompany()" class="link-button">Switch to My Company</a>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("subcompany-modal.html",'<div rv-spinner\n  rv-spinner-key="add-subcompany-modal"\n  rv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" ng-click="closeModal()" aria-hidden="true">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2>\n</div>\n<div class="modal-body add-subcompany-modal" stop-event="touchend">\n  <form role="form" name="forms.companyForm">\n    <div ng-include="\'company-fields.html\'"></div>\n    <div class="form-group">\n      <a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button"\n        ng-click="moveCompany()">Move a Company Under Your Company</a>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <button type="button"\n    class="btn btn-success btn-fixed-width add-subcompany-save-button"\n    ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save\n    <i class="fa fa-white fa-check icon-right"></i>\n  </button>\n  <button type="button" class="btn btn-default btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel\n    <i class="fa fa-white fa-times icon-right"></i>\n  </button>\n</div>\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button-menu.html",'<ul>\n  <li class="dropdown-header dropdown-title system-message">\n    Notifications\n  </li>\n  <li class="divider"></li>\n  <li class="system-message"\n    ng-repeat="message in messages"\n    ng-bind-html="renderHtml(message.text)">\n  </li>\n</ul>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("system-messages-button.html",'<!-- Desktop and tablet -->\n<li dropdown class="dropdown system-messages hidden-xs"\nng-show="isRiseVisionUser && messages.length > 0">\n  <a href="" dropdown-toggle class="dropdown-toggle system-messages-button">\n    <i class="fa fa-bell"></i>\n    <span class="label label-danger system-messages-badge">{{messages.length | surpressZero}}</span>\n  </a>\n  <div class="dropdown-menu system-messages system-message-list" role="menu">\n    <ng-include\n      src="\'system-messages-button-menu.html\'"\n    ></ng-include>\n  </div>\n</li>\n\n<!-- Mobile -->\n<li\n  class="system-messages"\n  ng-show="isRiseVisionUser  && messages.length > 0"\n  ng-class="{\'visible-xs-inline-block\': isRiseVisionUser && messages.length > 0}">\n    <a href=""\n      class="system-messages-button"\n      action-sheet="\'system-messages-button-menu.html\'"\n      action-sheet-class="system-message-list">\n        <i class="fa fa-bell"></i>\n        <span class="label label-danger system-messages-badge">{{messages.length}}</span>\n    </a>\n</li>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("test-company-banner.html",'<div ng-show="isTestCompanySelected"\n  class="sub-company-alert test-company-alert">\n  This is a Test Company\n</div>\n')}])}(),function(e){try{app=angular.module("risevision.common.header.templates")}catch(n){app=angular.module("risevision.common.header.templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions"\nrv-spinner-key="user-settings-modal"\nrv-spinner-start-active="1">\n<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">\n    <i class="fa fa-times"></i>\n  </button>\n  <h2 id="user-settings-label" class="modal-title">\n  <span ng-if="!isAdd">User Settings</span>\n  <span ng-if="isAdd">Add User</span>\n  </h2>\n</div>\n<div class="modal-body user-settings-modal" stop-event="touchend">\n  <form id="userSettingsForm" role="form" novalidate name="forms.userSettingsForm">\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine }"\n    >\n      <label>\n        Username *\n      </label>\n      <div ng-if="!isAdd">{{user.username}}</div>\n      <input id="user-settings-username"\n        type="email" required name="username"\n        class="form-control"\n        ng-if="isAdd"\n        ng-model="user.username"\n        />\n        <p ng-show="forms.userSettingsForm.username.$invalid && !forms.userSettingsForm.username.$pristine"\n          class="help-block validation-error-message-email">User name must be a valid email address.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine }">\n      <label for="user-settings-first-name">\n        First Name *\n      </label>\n      <input id="user-settings-first-name"\n        type="text" required name="firstName"\n        class="form-control"\n        ng-model="user.firstName"\n        />\n        <p ng-show="forms.userSettingsForm.firstName.$invalid && !forms.userSettingsForm.firstName.$pristine"\n          class="help-block validation-error-message-firstName">First Name is required.</p>\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine }">\n      <label for="user-settings-last-name">\n        Last Name *\n      </label>\n      <input id="user-settings-last-name"\n        type="text" required name="lastName"\n        class="form-control"\n        ng-model="user.lastName"\n        />\n        <p ng-show="forms.userSettingsForm.lastName.$invalid && !forms.userSettingsForm.lastName.$pristine"\n          class="help-block validation-error-message-lastName">Last Name is required.</p>\n    </div>\n    <div class="form-group">\n      <label for="user-settings-phone">\n        Phone\n      </label>\n      <input\n        id="user-settings-phone"\n        type="tel"\n        name="phone"\n        class="form-control"\n        ng-model="user.telephone"\n         />\n    </div>\n    <div class="form-group"\n      ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine }">\n      <label for="user-settings-email">\n        Email *\n      </label>\n      <input\n        id="user-settings-email"\n        type="email" required name="email"\n        class="form-control"\n        ng-model="user.email"\n        />\n        <p ng-show="forms.userSettingsForm.email.$invalid && !forms.userSettingsForm.email.$pristine"\n          class="help-block validation-error-message-email">A valid email address is required.</p>\n    </div>\n    <div class="form-group">\n      <label>\n        Roles\n      </label>\n      <div class="checkbox" ng-repeat="role in availableRoles"\n        ng-show="editRoleVisible(role)">\n        <label>\n          <input type="checkbox"\n            id="user-settings-{{role.key}}"\n            checklist-model="user.roles"\n            ng-disabled="!editRoleAllowed(role)"\n            checklist-value="role.key"> {{role.name}}\n        </label>\n      </div>\n    </div>\n    <div class="form-group" ng-if="user.lastLogin">\n      <label>\n        Last Login\n      </label>\n      <div>{{user.lastLogin | date:\'d-MMM-yyyy h:mm a\'}}</div>\n    </div>\n    <div class="form-group" ng-if="!editingYourself && !isAdd">\n      <label for="user-settings-status">\n        Status\n      </label>\n      <select id="user-settings-status"\n        class="form-control selectpicker" ng-model="user.status">\n        <option value="1">Active</option>\n        <option value="0">Inactive</option>\n      </select>\n    </div>\n  </form>\n</div>\n<div class="modal-footer">\n  <p class="text-right"><last-modified change-date="user.changeDate" changed-by="user.changedBy"></last-modified></p>\n  <button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left"\n    ng-if="!isAdd" ng-click="deleteUser()">\n    Delete <i class="fa fa-white fa-trash-o icon-right"></i>\n  </button>\n  <div class="pull-right">\n    <button type="button"\n      class="btn btn-primary btn-fixed-width"\n      data-dismiss="modal"\n      ng-click="save()" id="save-button">\n      Save <i class="fa fa-white fa-check icon-right"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width" ng-click="closeModal()">\n      Cancel <i class="fa fa-white fa-times icon-right"></i>\n    </button>\n  </div>\n</div>\n')}])}(),angular.module("risevision.common.header",["risevision.common.userstate","risevision.common.account","risevision.common.gapi","risevision.core.cache","risevision.core.company","risevision.common.company","risevision.common.cookie","LocalStorageModule","risevision.common.header.templates","risevision.common.header.directives","risevision.common.loading","risevision.ui-flow","risevision.common.systemmessages","risevision.core.systemmessages","risevision.core.countries","risevision.core.oauth2","risevision.common.geodata","risevision.store.data-gadgets","risevision.common.util","risevision.core.userprofile","risevision.common.registration","risevision.common.shoppingcart","checklist-model","ui.bootstrap","ngSanitize","ngCsv","ngTouch","risevision.common.components.last-modified","risevision.common.components.search-filter","risevision.common.components.scrolling-list","risevision.common.components.stop-event","risevision.common.components.analytics","risevision.common.svg","risevision.common.support"]).factory("bindToScopeWithWatch",[function(){return function(e,n,t){t.$watch(function(){return e.call()},function(e){t[n]=e})}}]).directive("commonHeader",["$modal","$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch","$document","cookieTester",function(e,n,t,o,a,s,i,r,c,l,u,d,m){return{restrict:"E",template:r.get("common-header.html"),scope:!1,link:function(e,t,o){m.checkCookies().then(function(){e.cookieEnabled=!0},function(){e.cookieEnabled=!1}),e.navCollapsed=!0,e.inRVAFrame=c.inRVAFrame(),e.isSubcompanySelected=c.isSubcompanySelected,e.isTestCompanySelected=c.isTestCompanySelected,e[o.navOptions]||(e.navOptions=[{title:"Home",link:"#/"},{title:"Store",link:""},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),e.hideShoppingCart="0"!==o.hideShoppingCart&&"false"!==o.hideShoppingCart,e.hideHelpMenu="0"!==o.hideHelpMenu&&"false"!==o.hideHelpMenu,n.redirectToRoot="0"!==o.redirectToRoot&&"false"!==o.redirectToRoot,n.newTabHome="0"!==o.newTabHome&&"false"!==o.newTabHome,u(c.isRiseVisionUser,"isRiseVisionUser",e),n.$on("$stateChangeSuccess",function(){e.inRVAFrame&&l.search("inRVA",e.inRVAFrame)});var a=d[0].createElement("meta");a.id="viewport",a.name="viewport",a.content="width=device-width, initial-scale=1, user-scalable=no",d[0].getElementsByTagName("head")[0].appendChild(a)}}}]).run(["$rootScope","userState","selectedCompanyUrlHandler",function(e,n,t){e.$watch(function(){return n.getSelectedCompanyId()},function(e){e&&t.updateUrl()}),e.$on("$stateChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",t.updateSelectedCompanyFromUrl),e.$on("$locationChangeSuccess",t.locationChangeSuccess)}]).run(["segmentAnalytics","SEGMENT_API_KEY","ENABLE_INTERCOM_MESSAGING","analyticsEvents",function(e,n,t,o){o.initialize(),e.load(n,t)}]).directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}}),angular.module("risevision.common.header.directives",[]),angular.module("risevision.common.header.directives").directive("integerParser",[function(){return{require:"ngModel",link:function(e,n,t,o){o.$parsers.unshift(function(e){return parseInt(e,10)||0})}}}]),angular.module("risevision.common.header.directives").directive("emptySelectParser",[function(){return{require:"ngModel",link:function(e,n,t,o){o.$parsers.unshift(function(e){return null===e?"":e})}}}]),angular.module("risevision.common.header.directives").directive("companyButtons",["$templateCache",function(e){return{restrict:"E",scope:!1,replace:!0,template:e.get("company-buttons-menu.html"),link:function(){}}}]),angular.module("risevision.common.header.directives").directive("requireRole",["userState",function(e){return{restrict:"A",priority:1e5,scope:!1,compile:function(n,t){var o=!0,a=t.requireRole.split(" ");for(var s in a)e.hasRole(a[s])&&(o=!1);o&&(angular.forEach(n.children(),function(e){try{e.remove()}catch(n){}}),n.remove())}}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,n){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),n.$on("risevision.common.globalError",function(n,t){e.errors.push(t)}),e.dismiss=function(n,t){e[n].splice(t,1)}}]),angular.module("risevision.common.header").controller("HelpDropdownButtonCtrl",["$scope","supportFactory","userState",function(e,n,t){e.$watch(function(){return t.isLoggedIn()},function(n){e.isLoggedIn=n}),e.$watch(function(){return t.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.openPrioritySupport=function(){n.handlePrioritySupportAction()},e.openSendUsANote=function(){n.handleSendUsANote()}}]),angular.module("risevision.common.header").controller("HelpPrioritySupportModalCtrl",["$scope","$modalInstance","subscriptionStatus","supportFactory","SUPPORT_PRODUCT_URL",function(e,n,t,o,a){e.subscriptionStatus=t,e.supportProductUrl=a,e.startTrial=function(){o.initiateTrial().then(function(){e.dismiss()})},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("HelpSendUsANoteModalCtrl",["$scope","$modalInstance","subscriptionStatus","supportFactory","SUPPORT_PRODUCT_URL",function(e,n,t,o,a){e.subscriptionStatus=t,e.supportProductUrl=a,e.sendUsANote=function(){o.openIntercomChat(),e.dismiss()},e.prioritySupport=function(){o.openIntercomChat(),e.dismiss()},e.startTrial=function(){o.initiateTrial().then(function(){e.dismiss()})},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch",function(e,n,t,o,a,s,i,r,c,l){window.$loading=a,e.inRVAFrame=o.inRVAFrame(),e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.register=function(){s.remove("surpressRegistration"),r.invalidateStatus("registrationComplete")},e.$on("risevision.user.signedOut",function(){s.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){s.remove("surpressRegistration")}),e.$watch(function(){return r.isStatusUndetermined()},function(n){e.undetermined=n,e.loading=n}),e.$watch(function(){return r.getStatus()},function(a,s){a&&(i.debug("status changed from",s,"to",a),"registeredAsRiseVisionUser"===a?(!o.registrationModalInstance&&o.isLoggedIn()&&(o.registrationModalInstance=n.open({template:t.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static",resolve:{account:["getUserProfile","getAccount",function(e,n){return e(o.getUsername()).then(null,function(e){return e&&"User has not yet accepted the Terms of Service"===e.message?n():null})["catch"](function(){return null})}]}})),o.registrationModalInstance.result["finally"](function(){o.registrationModalInstance=null,r.invalidateStatus()})):"signedInWithGoogle"===a&&e.login())}),e.$watch(function(){return o.isLoggedIn()},function(n){e.isLoggedIn=n,n===!0&&(e.userPicture=o.getUserPicture())}),e.$watch(function(){return o.getUserCompanyName()},function(){e.companyName=o.getUserCompanyName()}),e.$watch(function(){return o.getUsername()},function(){e.username=o.getUsername()}),l(o.isRiseVisionUser,"isRiseVisionUser",e),e.login=function(e){a.startGlobal("auth-buttons-login"),o.authenticate(!0).then()["finally"](function(){a.stopGlobal("auth-buttons-login"),r.invalidateStatus(e)})},e.logout=function(){e.confirmSignOut()},e.confirmSignOut=function(e){var o=n.open({template:t.get("signout-modal.html"),controller:"SignOutModalCtrl",size:e});o.result["finally"](function(){r.invalidateStatus("registrationComplete")})},e.userSettings=function(e){n.open({template:t.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return o.getUsername()},add:function(){return!1}}})},a.startGlobal("auth-buttons-silent"),
c().then()["finally"](function(){o.authenticate(!1).then()["finally"](function(){a.stopGlobal("auth-buttons-silent"),r.isStatusUndetermined()||r.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("SignUpModalCtrl",["$scope","userState","uiFlowManager","$loading",function(e,n,t,o){e.login=function(e){o.startGlobal("auth-buttons-login"),n.authenticate(!0).then()["finally"](function(){o.stopGlobal("auth-buttons-login"),t.invalidateStatus(e)})}}]),angular.module("risevision.common.header").controller("SignUpButtonCtrl",["$scope","$modal",function(e,n){e.openSignUpModal=function(){n.open({templateUrl:"signup-modal.html",controller:"SignUpModalCtrl"})}}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCoreCountries",function(e,n,t,o,a){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.isSubcompanySelected()},function(){e.isSubcompanySelected=o.isSubcompanySelected()}),e.$watch(function(){return o.getSelectedCompanyName()},function(n){n&&(e.selectedCompanyName=o.getSelectedCompanyName())}),e.$watch(function(){return o.isRiseVisionUser()},function(n){e.isRiseVisionUser=n,n===!0&&(e.isUserAdmin=o.isUserAdmin(),e.isPurchaser=o.isPurchaser())}),e.$watch(function(){return o.isRiseAdmin()},function(n){e.isRiseVisionAdmin=n}),e.addSubCompany=function(){n.open({template:t.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:"lg",resolve:{countries:function(){return a()}}})},e.companySettings=function(){n.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:"lg",resolve:{companyId:function(){return o.getSelectedCompanyId()},countries:function(){return a()}}})},e.companyUsers=function(e){n.open({template:t.get("company-users-modal.html"),controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return o.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=n.open({template:t.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return o.getSelectedCompanyId()}}});e.result.then(o.switchCompany)},e.moveCompany=function(e){n.open({template:t.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").filter("surpressZero",function(){return function(e){return e?e:""}}).controller("ShoppingCartButtonCtrl",["$scope","shoppingCart","userState","$log","STORE_URL",function(e,n,t,o,a){e.shoppingCartUrl=a+"shopping-cart",e.cart={},e.cart.items=n.getItems(),e.$watch(function(){return t.isRiseVisionUser()},function(t){e.isRiseVisionUser=t,n.get()})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,n,t){e.closeIFrame=function(){n.debug("gadgetsService.closeIFrame"),t.closeIFrame()}}]),angular.module("risevision.common.header").controller("SystemMessagesButtonCtrl",["$scope","userState","$log","$sce","getCoreSystemMessages","systemMessages",function(e,n,t,o,a,s){e.messages=s,e.$watch(function(){return n.isRiseVisionUser()},function(n){e.isRiseVisionUser=n}),e.renderHtml=function(e){return o.trustAsHtml(e)},s.registerRetriever(function(){return a(n.getSelectedCompanyId())}),e.$watch(function(){return n.getSelectedCompanyId()},function(n){null!==n?s.resetAndGetMessages().then(e.apply):s.clear()})}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$scope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError","agreeToTermsAndUpdateUser","account","segmentAnalytics",function(e,n,t,o,a,s,i,r,c,l,u,d,m){var p=!d,g=d?d:i.getCopyOfProfile()||{};s.remove("surpressRegistration"),e.profile=r(g,"email","mailSyncEnabled","firstName","lastName"),e.registering=!1,e.profile.accepted=angular.isDefined(g.termsAcceptanceDate)&&null!==g.termsAcceptanceDate,angular.isDefined(e.profile.mailSyncEnabled)||(e.profile.mailSyncEnabled=!1),e.closeModal=function(){s.put("surpressRegistration",!0),n.dismiss("cancel")};var f=e.$watch(function(){return c.isStatusUndetermined()},function(e){e===!0?t.start("registration-modal"):e===!1&&("registrationComplete"===c.getStatus()&&(n.close("success"),f()),t.stop("registration-modal"))});e.save=function(){if(e.forms.registrationForm.accepted.$pristine=!1,e.forms.registrationForm.firstName.$pristine=!1,e.forms.registrationForm.lastName.$pristine=!1,e.forms.registrationForm.email.$pristine=!1,!e.forms.registrationForm.$invalid){e.registering=!0,t.start("registration-modal");var s;s=p?o(i.getUsername(),e.profile):u(i.getUsername(),e.profile),s.then(function(){i.refreshProfile().then()["finally"](function(){m.track("User Registered",{companyId:i.getUserCompanyId(),companyName:i.getUserCompanyName(),isNewCompany:p}),n.close("success"),t.stop("registration-modal")})},function(e){alert("Error: "+l(e)),a.error(e)})["finally"](function(){e.registering=!1,i.refreshProfile()})}},e.forms={}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,n,t,o,a,s){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?s.start("move-company-modal"):s.stop("move-company-modal")}),e.selectedCompany=a.getCopyOfSelectedCompany(),e.closeModal=function(){n.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,t(e.company.authKey,a.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(n){e.errors.push("Error: "+JSON.stringify(n))})["finally"](function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,o(e.company.authKey).then(function(n){angular.extend(e.company,n)},function(n){e.errors.push("Failed to retrieve company. "+n.message)})["finally"](function(){e.loading=!1})},e.$watch("moveSuccess",function(n){n?e.dismissButtonText="Close":e.dismissButtonText="Cancel"})}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","countries","REGIONS_CA","REGIONS_US","TIMEZONES","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","deleteCompany","segmentAnalytics","$modal","$templateCache",function(e,n,t,o,a,s,i,r,c,l,u,d,m,p,g,f,h,v){function y(n){e.isRiseStoreAdmin?n.sellerId=n.isSeller?"yes":null:(delete n.sellerId,delete n.isTest)}e.company={id:o},e.countries=a,e.regionsCA=s,e.regionsUS=i,e.timezones=r,e.isRiseStoreAdmin=p.isRiseStoreAdmin(),e.$watch("loading",function(e){e?d.start("company-settings-modal"):d.stop("company-settings-modal")}),e.loading=!1,e.forms={},o&&(e.loading=!0,c(o).then(function(n){e.company=n,e.company.isSeller=n&&n.sellerId?!0:!1},function(e){alert("An error has occurred. "+m(e))})["finally"](function(){e.loading=!1})),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0;var o=angular.copy(e.company);y(o),t(e.company.id,o).then(function(){f.track("Company Updated",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.updateCompanySettings(e.company),n.close("success")})["catch"](function(e){alert("Error(s): "+m(e))})["finally"](function(){e.loading=!1})},e.deleteCompany=function(){var t=h.open({template:v.get("safe-delete-modal.html"),controller:"SafeDeleteModalCtrl"});t.result.then(function(){e.loading=!0,g(e.company.id).then(function(){f.track("Company Deleted",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.getUserCompanyId()===e.company.id?p.signOut():p.getSelectedCompanyId()===e.company.id&&p.resetCompany(),n.close("success")})["catch"](function(e){alert("Error(s): "+m(e))})["finally"](function(){e.loading=!1})})},e.resetAuthKey=function(){u.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(d.start("company-settings-modal"),l(e.company.id,"authKey").then(function(n){e.company.authKey=n.item,alert("Successfully changed Authentication Key.")},function(e){alert("Error: "+m(e))})["finally"](function(){d.stop("company-settings-modal")}))},e.resetClaimId=function(){u.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(d.start("company-settings-modal"),l(e.company.id,"claimId").then(function(n){e.company.claimId=n.item,alert("Successfully changed Claim ID.")},function(e){alert("Error: "+m(e))})["finally"](function(){d.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","countries","REGIONS_CA","REGIONS_US","TIMEZONES","userState","$loading","humanReadableError","segmentAnalytics",function(e,n,t,o,a,s,i,r,c,l,u,d,m){e.company={},e.countries=s,e.regionsCA=i,e.regionsUS=r,e.timezones=c,e.forms={},e.$watch("loading",function(e){e?u.start("add-subcompany-modal"):u.stop("add-subcompany-modal")}),e.closeModal=function(){n.dismiss("cancel")},e.save=function(){e.loading=!0,a(l.getSelectedCompanyId(),e.company).then(function(e){m.track("Company Created",{companyId:e.id,companyName:e.name}),n.close("success")},function(e){alert("Error: "+d(e))})["finally"](function(){e.loading=!1})},e.moveCompany=function(e){t.open({template:o.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$modalInstance","companyService","companyId","BaseList","$loading",function(e,n,t,o,a,s){var i=40;e.companies=new a(i),e.search={query:""},e.filterConfig={placeholder:"Search Companies"},e.$watch("loading",function(e){e?(s.start("company-selector-modal"),s.start("company-selector-modal-list")):(s.stop("company-selector-modal"),s.stop("company-selector-modal-list"))}),e.closeModal=function(){n.dismiss("cancel")},e.loadCompanies=function(){e.companies.endOfList||(e.loading=!0,t.getCompanies(o,e.search.query,e.companies.cursor,i,null).then(function(n){n&&n.items&&e.companies.add(n.items,n.cursor)})["finally"](function(){e.loading=!1}))},0===e.companies.list.length&&e.loadCompanies(),e.doSearch=function(){e.companies.clear(),e.loadCompanies()},e.setCompany=function(e){n.close(e.id)}}]),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,n,t,o){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(){e.isSubcompanySelected=o.isSubcompanySelected(),e.selectedCompanyName=o.getSelectedCompanyName()}),e.switchToMyCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("TestCompanyBannerCtrl",["$scope","userState",function(e,n){e.$watch(function(){return n.isTestCompanySelected()},function(n){e.isTestCompanySelected=n})}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(n){return e[n]}}]).controller("CompanyUsersModalCtrl",["$scope","$modalInstance","$modal","$templateCache","company","getUsers","$loading",function(e,n,t,o,a,s,i){e.$watch("loading",function(e){e?i.start("company-users-list"):i.stop("company-users-list")}),e.sort={field:"username",descending:!1},e.search={searchString:""},e.changeSorting=function(n){var t=e.sort;t.field===n?t.descending=!t.descending:(t.field=n,t.descending=!1)};var r=function(){e.loading=!0,s({companyId:a.id,search:e.search.searchString}).then(function(n){e.users=n})["finally"](function(){e.loading=!1})};r(),e.addUser=function(e){var n=t.open({template:o.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:e,resolve:{companyId:function(){return a.id}}});n.result["finally"](r)},e.editUser=function(e,n){var a=t.open({template:o.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return e},add:function(){return!1}}});a.result["finally"](r)},e.closeModal=function(){n.dismiss("cancel")},e.doSearch=function(){e.users=[],r()}}]),angular.module("risevision.common.header").controller("AddUserModalCtrl",["$scope","addUser","$modalInstance","companyId","userState","userRoleMap","humanReadableError","$loading","segmentAnalytics",function(e,n,t,o,a,s,i,r,c){e.isAdd=!0,e.availableRoles=[],angular.forEach(s,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.$watch("loading",function(e){e?r.start("user-settings-modal"):r.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.username.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,n(o,e.user.username,e.user).then(function(){c.track("User Created",{userId:e.user.username,companyId:o}),t.close("success")},function(e){alert("Error"+i(e))})["finally"](function(){e.loading=!1}))},e.closeModal=function(){t.dismiss("cancel")},e.editRoleAllowed=function(e){return a.isRiseAdmin()?!0:a.isUserAdmin()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.editRoleVisible=function(e){return a.isRiseAdmin()?!0:a.isUserAdmin()||a.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]),angular.module("risevision.common.header").controller("UserSettingsModalCtrl",["$scope","$modalInstance","updateUser","getUserProfile","deleteUser","addUser","username","userRoleMap","$log","$loading","userState","uiFlowManager","humanReadableError","$rootScope","segmentAnalytics",function(e,n,t,o,a,s,i,r,c,l,u,d,m,p,g){e.user={},e.$watch("loading",function(e){e?l.start("user-settings-modal"):l.stop("user-settings-modal")}),e.availableRoles=[],angular.forEach(r,function(n,t){e.availableRoles.push({key:t,name:n})}),e.$watch("user.status",function(n){"string"==typeof e.user.status&&(e.user.status=parseInt(n))}),e.isUserAdmin=u.isUserAdmin(),e.username=i,e.loading=!0,o(i).then(function(n){e.user=n,e.editingYourself=u.checkUsername(n.username)})["finally"](function(){e.loading=!1}),e.closeModal=function(){n.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&a(e.username).then(function(){g.track("User Deleted",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),u.checkUsername(i)&&u.signOut().then()["finally"](function(){d.invalidateStatus("registrationComplete")})})["finally"](function(){n.dismiss("deleted")})},e.save=function(){e.forms.userSettingsForm.email.$pristine=!1,e.forms.userSettingsForm.firstName.$pristine=!1,e.forms.userSettingsForm.lastName.$pristine=!1,e.forms.userSettingsForm.$invalid||(e.loading=!0,t(i,e.user).then(function(t){u.checkUsername(i)&&u.updateUserProfile(t.item),g.track("User Updated",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(i)}),n.close("success")},function(e){c.debug(e),alert("Error: "+m(e))})["finally"](function(){e.loading=!1}))},e.editRoleAllowed=function(n){return u.isRiseAdmin()?!0:u.isUserAdmin()?"sa"===n.key||"ba"===n.key?!1:"ua"===n.key&&u.checkUsername(e.user.username)?!1:!0:!1},e.editRoleVisible=function(e){return u.isRiseAdmin()?!u.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key?!0:!1:u.isUserAdmin()||u.isRiseVisionUser()?"sa"===e.key||"ba"===e.key?!1:!0:!1},e.forms={}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userState",function(e,n,t,o){e.closeModal=function(){n.dismiss("cancel")},e.signOut=function(e){o.signOut(e).then(function(){t.debug("user signed out")},function(e){t.error("sign out failed",e)})["finally"](function(){n.dismiss("success")})}}]),angular.module("risevision.common.header").controller("SafeDeleteModalCtrl",["$scope","$modalInstance",function(e,n){e.inputText=null,e.canConfirm=!1,e.$watch("inputText",function(){e.canConfirm="DELETE"===e.inputText}),e.confirm=function(){e.canConfirm&&n.close()},e.cancel=function(){n.dismiss("cancel")},e.dismiss=function(){n.dismiss()}}]),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var n={visible:!1,enabled:!1};return n.enabled=angular.element(e).width()<=1200?!0:!1,n.toggle=function(e){e&&e.stopPropagation(),(n.enabled||n.visible)&&(n.visible=!n.visible,n.visible?n.nav.addClass("is-off-canvas-opened"):n.nav.removeClass("is-off-canvas-opened"))},n.registerNav=function(e){n.nav=e,n.nav.addClass("off-canvas--container")},window.onresize=function(){n.enabled=angular.element(e).width()<=1200?!0:!1},n}]).directive("offCanvasContent",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){var a;n.bind(o,{start:function(e){a=e},end:function(n){n.x-a.x>0&&e.toggle()}})}}}]).directive("offCanvasNav",["offCanvas","$swipe",function(e,n){return{restrict:"A",link:function(t,o){o.addClass("off-canvas--nav"),e.registerNav(o);var a;n.bind(o,{start:function(e){a=e},end:function(n){n.x-a.x<0&&e.toggle()}}),o.bind("tap",e.toggle),o.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(n,t){t.bind("tap",e.toggle),t.bind("click",e.toggle)}}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile","$timeout",function(e,n,t){return{restrict:"A",link:function(o,a,s){var i=e.find("body").eq(0),r=!1,c=document.getElementById("action-sheet-backdrop");angular.isObject(c)?c=angular.element(c):(c=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),i.append(c)),o.templateUrl=o.$eval(s.actionSheet),o.title=o.$eval(s.title);var l=angular.element('<div class="action-sheet is-action-sheet-closed"><ng-include src="templateUrl"></ng-include></div>'),u=n(l)(o);i.append(u);var d=function(){r=!r,r?(u.toggleClass("is-action-sheet-closed"),t(function(){u.toggleClass("is-action-sheet-opened"),c.toggleClass("is-action-sheet-opened")})):(u.toggleClass("is-action-sheet-opened"),c.toggleClass("is-action-sheet-opened"),t(function(){u.toggleClass("is-action-sheet-closed")},500)),r?(c.bind("tap",d),c.bind("click",d)):(c.unbind("tap"),c.unbind("click"))};s.actionSheetClass&&s.actionSheetClass.split(" ").forEach(function(e){u.addClass(e)}),a.bind("tap",d),a.bind("click",d),l.bind("tap",d),l.bind("click",d)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),function(e){"use strict";e.module("risevision.common.util",[]).value("humanReadableError",function(e){var n;return n=e.message?e.message:e.error?e.error.message?e.error.message:e.error:e,JSON.stringify(n)}).factory("dateIsInRange",[function(){return function(e,n,t){var o,a,s=!0;try{n&&(o=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),a=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=e>=a),s&&t&&(o=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),a=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=a>=e)}catch(i){s=!1}return s}}]).factory("objectHelper",[function(){var n={};return n.follow=function(e){var n=function(){};return n.prototype=e,new n},n.clearObj=function(e){for(var n in e)delete e[n]},n.clearAndCopy=function(t,o){n.clearObj(o),e.extend(o,t)},n}]).factory("getBaseDomain",["$log","$location",function(e,n){var t=function(e){return/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)?!0:!1};return function(){var o;if(!o){var a=n.host();if(t(a))o=a;else{var s=a.split(".");o=s.length>1?"appspot"===s[s.length-2]?s.slice(s.length-3).join("."):s.slice(s.length-2).join("."):a}e.debug("baseDomain",o)}return o}}])}(angular),angular.module("risevision.common.geodata",[]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]).value("TIMEZONES",[["(GMT -12:00) International Dateline West","-720"],["(GMT -11:00) Midway Island, Samoa","-660"],["(GMT -10:00) Hawaii","-600"],["(GMT -09:00) Alaska","-540"],["(GMT -08:00) Pacific Time (US & Canada], Tijuana","-480"],["(GMT -07:00) Mountain Time (US & Canada)","-420"],["(GMT -06:00) Central Time (US & Canada)","-360"],["(GMT -05:00) Eastern Time (US & Canada)","-300"],["(GMT -04:00) Atlantic Time (Canada)","-240"],["(GMT -03:30) NewfoundLand Time (Canada)","-210"],["(GMT -03:00) Buenos Aires, Georgetown","-180"],["(GMT -02:00) Mid-Atlantic","-120"],["(GMT -01:00) Cape Verde Is.","-60"],["(GMT  00:00) Dublin, Edinburgh, Lisbon, London","0"],["(GMT +01:00) Amsterdam, Berlin, Bern, Rome, Paris, Stockholm, Vienna","60"],["(GMT +02:00) Athens, Bucharest, Istanbul, Minsk","120"],["(GMT +03:00) Moscow, St. Petersburg, Volgograd","180"],["(GMT +03:30) Tehran","210"],["(GMT +04:00) Abu Dhabi, Muscat","240"],["(GMT +04:30) Kabul","270"],["(GMT +05:00) Islamabad, Karachi, Tashkent","300"],["(GMT +05:30) Calcutta, Chennai, Mumbai,New Delhi","330"],["(GMT +05:45) Kathmandu","345"],["(GMT +06:00) Astana,Almaty, Dhaka, Novosibirsk","360"],["(GMT +06:30) Rangoon (Yangon, Burma)","390"],["(GMT +07:00) Bangkok, Hanoi, Jakarta","420"],["(GMT +08:00) Beijing, Chongqing, Hong Kong, Urumqi","480"],["(GMT +09:00) Osaka, Sapporo, Tokyo","540"],["(GMT +09:30) Adelaide, Darwin","570"],["(GMT +10:00) Canberra, Melbourne, Sydney, Vladvostok","600"],["(GMT +11:00) Magadan, Solomon Is., New Caledonia","660"],["(GMT +12:00) Auckland, Fiji, Kamchatka, Marshall Is.","720"],["(GMT +13:00) Nuku'alofa","780"]]),function(e){"use strict";e.module("risevision.common.rvtokenstore",["risevision.common.util","LocalStorageModule","ngBiscuit"]).service("rvTokenStore",["$log","$location","cookieStore","getBaseDomain",function(e,n,t,o){var a=function(){return t.get("rv-token")},s=function(e){var n=o();"localhost"===n?t.put("rv-token",e,{path:"/"}):t.put("rv-token",e,{domain:n,path:"/"})},i=function(){var e=o();"localhost"===e?t.remove("rv-token",{path:"/"}):t.remove("rv-token",{domain:e,path:"/"})},r={read:a,write:s,clear:i};return r}])}(angular),function(e){"use strict";var n=function(e){return"/"===e[0]&&(e=e.slice(1)),e},t=function(e){var n={};return e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n};e.module("risevision.common.userstate",["risevision.common.companystate","risevision.common.util","risevision.common.gapi","LocalStorageModule","risevision.common.config","risevision.core.cache","risevision.core.oauth2","risevision.core.util","risevision.core.userprofile","risevision.common.loading","risevision.ui-flow","risevision.common.rvtokenstore","risevision.common.logging"]).value("DEFAULT_PROFILE_PICTURE","http://api.randomuser.me/portraits/med/men/33.jpg").value("OAUTH2_SCOPES","https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile").value("GOOGLE_OAUTH2_URL","https://accounts.google.com/o/oauth2/auth").run(["$location","$window","userState","$log",function(e,o,a,s){var i=e.path(),r=t(n(i));if(s.debug("URL params",r),a._restoreState(),r.access_token&&a._setUserToken(r),r.state){var c=JSON.parse(decodeURIComponent(r.state));c.p||c.s?(a._persistState(),o.location.replace(c.p+c.s+c.u)):e.$$html5?e.path(""):o.location.hash=c.u}}]).factory("userState",["$q","$log","$location","CLIENT_ID","gapiLoader","OAUTH2_SCOPES","userInfoCache","getOAuthUserInfo","getUserProfile","companyState","objectHelper","$rootScope","$interval","$loading","$window","GOOGLE_OAUTH2_URL","localStorageService","$document","uiFlowManager","getBaseDomain","rvTokenStore","externalLogging",function(n,t,o,a,s,i,r,c,l,u,d,m,p,g,f,h,v,y,b,C,S,w){var $,k={profile:{},user:{},roleMap:{},userToken:S.read(),inRVAFrame:e.isDefined(o.search().inRVA)},A=null,I=!0,U=function(e){if(I){I=!1;try{var n=(new Date).getTime()-f.performance.timing.navigationStart;w.logEvent("page load time",e,n)}catch(o){t.debug("Error logging load time")}}},R=function(){var e=S.read();e!==k.userToken?f.location.reload():k.userToken&&O(!0)["finally"](function(){k.userToken||(t.debug("Authentication failed. Reloading..."),f.location.reload())})},T=function(){var e,n,o=y[0];"undefined"!=typeof o.hidden?(n="visibilitychange",e="visibilityState"):"undefined"!=typeof o.mozHidden?(n="mozvisibilitychange",e="mozVisibilityState"):"undefined"!=typeof o.msHidden?(n="msvisibilitychange",e="msVisibilityState"):"undefined"!=typeof o.webkitHidden&&(n="webkitvisibilitychange",e="webkitVisibilityState"),o.addEventListener(n,function(){t.debug("visibility: "+o[e]),"visible"===o[e]&&R()})};T();var E=function(){k.userToken=z.getUsername(),S.write(k.userToken)},L=function(){t.debug("Clearing user token..."),x(),k.userToken=null,S.clear()},N=function(){p.cancel(A),A=p(function(){p.cancel(A),O(!0)},33e5)},x=function(){p.cancel(A),A=null},M=function(){$=null,d.clearObj(k.user),d.clearObj(k.profile),k.roleMap={},u.resetCompanyState(),t.debug("User state has been reset.")},_=function(){var e=n.defer();return l(k.user.username,!0).then(function(e){return z.updateUserProfile(e),u.init()}).then(function(){e.resolve()},e.reject),e.promise},P=function(e){var r=n.defer(),c={client_id:a,scope:i,cookie_policy:o.protocol()+"://"+C()};return"dummy"!==k.userToken&&(c.authuser=k.userToken),e?c.immediate=!0:c.prompt="select_account",s().then(function(e){e.auth.setToken(k.params),e.auth.authorize(c,function(e){t.debug("authResult",e),e&&!e.error?(k.params&&delete k.params,N(),r.resolve(e)):(L(),r.reject(e.error||"failed to authorize user"))})}).then(null,r.reject),r.promise},O=function(e){var t,o=n.defer();return P(e).then(function(e){return t=e,c()}).then(function(n){k.user.username&&k.profile.username&&k.user.username===n.email?o.resolve(t):(d.clearAndCopy({userId:n.id,username:n.email,picture:n.picture},k.user),E(),_()["finally"](function(){o.resolve(t),m.$broadcast("risevision.user.authorized"),e||m.$broadcast("risevision.user.userSignedIn")}))}).then(null,function(e){d.clearObj(k.user),o.reject(e)}),o.promise},F=function(e){if(e){var t,o,s,r;m.redirectToRoot===!1?t=f.location.href.substr(0,f.location.href.indexOf("#"))||f.location.href:(t=f.location.origin+"/",o=f.location.pathname?f.location.pathname.substring(1):"",s=f.location.search),r=encodeURIComponent(encodeURIComponent(JSON.stringify({p:o,u:f.location.hash,s:s}))),v.set("risevision.common.userState",k),b.persist(),f.location.href=h+"?response_type=token&scope="+encodeURIComponent(i)+"&client_id="+a+"&redirect_uri="+encodeURIComponent(t)+"&prompt=select_account&state="+r;var c=n.defer();return c.promise}return D(e)},D=function(o){var a;if(o&&(M(),r.removeAll()),$)return $.promise;$=n.defer(),a=$,t.debug("authentication called");var s=function(){var n=e.isDefined(k.userToken)&&null!==k.userToken;if(t.debug("userAuthed",n),o||n===!0)O(!o).then(function(e){e&&!e.error?a.resolve():(L(),t.debug("Authentication Error: "+e.error),a.reject("Authentication Error: "+e.error))}).then(null,function(e){L(),a.reject(e)})["finally"](function(){g.stopGlobal("risevision.user.authenticate"),U("authenticated user")});else{var s="user is not authenticated";t.debug(s),a.reject(s),d.clearObj(k.user),g.stopGlobal("risevision.user.authenticate"),U("unauthenticated user")}};return s(),o&&g.startGlobal("risevision.user.authenticate"),a.promise},j=function(e){var o=n.defer();return r.removeAll(),s().then(function(n){e&&(f.logoutFrame.location="https://accounts.google.com/Logout"),n.auth.signOut(),L(),M(),d.clearObj(k.user),m.$broadcast("risevision.user.signedOut"),t.debug("User is signed out."),o.resolve()},function(){o.reject()}),o.promise},V=function(){return k.user.username?!0:!1},G=function(){return null!==k.profile.username&&void 0!==k.profile.username},q=function(n){return e.isDefined(k.roleMap[n])},B=function(){return f.gapi?f.gapi.auth.getToken():null},H=function(){var n=v.get("risevision.common.userState");n&&(e.extend(k,n),v.remove("risevision.common.userState"),t.debug("userState restored with",n))},z={getUsername:function(){return k.user&&k.user.username||null},getUserEmail:function(){return k.profile.email},getCopyOfProfile:function(n){return n?e.extend({},k.profile):d.follow(k.profile)},getUserPicture:function(){return k.user.picture},hasRole:q,inRVAFrame:function(){return k.inRVAFrame},isRiseAdmin:function(){return q("sa")},isRiseStoreAdmin:function(){return q("ba")},isUserAdmin:function(){return q("ua")},isPurchaser:function(){return q("pu")},isSeller:u.isSeller,isRiseVisionUser:G,isLoggedIn:V,getAccessToken:B,checkUsername:function(e){return(e||!1)&&(z.getUsername()||!1)&&e.toUpperCase()===z.getUsername().toUpperCase()},updateUserProfile:function(n){z.checkUsername(n.username)&&(d.clearAndCopy(e.extend({username:k.user.username},n),k.profile),k.roleMap={},k.profile.roles&&k.profile.roles.forEach(function(e){k.roleMap[e]=!0}),m.$broadcast("risevision.user.updated"))},authenticate:k.inRVAFrame?D:F,signOut:j,refreshProfile:_,getUserCompanyId:u.getUserCompanyId,getUserCompanyName:u.getUserCompanyName,getSelectedCompanyId:u.getSelectedCompanyId,getSelectedCompanyName:u.getSelectedCompanyName,getSelectedCompanyCountry:u.getSelectedCompanyCountry,getCopyOfUserCompany:u.getCopyOfUserCompany,getCopyOfSelectedCompany:u.getCopyOfSelectedCompany,isSubcompanySelected:u.isSubcompanySelected,isTestCompanySelected:u.isTestCompanySelected,updateCompanySettings:u.updateCompanySettings,updateUserCompanySettings:u.updateUserCompanySettings,resetCompany:u.resetCompany,switchCompany:u.switchCompany,_restoreState:H,_setUserToken:function(e){k.params=e,k.userToken="dummy"},_persistState:function(){v.set("risevision.common.userState",k)}};return z}])}(angular),function(e){"use strict";e.module("risevision.common.companystate",["risevision.core.company","risevision.common.util"]).factory("companyState",["$location","getCompany","objectHelper","$rootScope","$log","$q",function(n,t,o,a,s,i){var r,c={userCompany:{},selectedCompany:{}},l=function(){o.clearObj(c.selectedCompany),o.clearObj(c.userCompany),s.debug("Company state has been reset.")};n.search().cid&&(s.debug("cid",n.search().cid,"saved for later processing."),r=n.search().cid);var u=function(){var e=i.defer();return t().then(function(e){var n=m.getSelectedCompanyId()?m.getSelectedCompanyId():r;return o.clearAndCopy(e,c.userCompany),d(n)}).then(null,function(){m.resetCompany()})["finally"](function(){r=null,e.resolve(null)}),e.promise},d=function(e){var n=i.defer();return e&&e!==c.userCompany.id?t(e).then(function(e){o.clearAndCopy(e,c.selectedCompany),n.resolve(),a.$broadcast("risevision.company.selectedCompanyChanged")}).then(null,function(e){s.error("Failed to load selected company.",e),n.reject(e)}):(m.resetCompany(),n.resolve()),n.promise;
},m={init:u,switchCompany:d,updateCompanySettings:function(e){e&&e.id===m.getSelectedCompanyId()&&o.clearAndCopy(e,c.selectedCompany),e&&e.id===m.getUserCompanyId()&&o.clearAndCopy(e,c.userCompany),a.$broadcast("risevision.company.updated",{companyId:e.id})},resetCompany:function(){o.clearAndCopy(c.userCompany,c.selectedCompany),a.$broadcast("risevision.company.selectedCompanyChanged")},resetCompanyState:l,getUserCompanyId:function(){return c.userCompany&&c.userCompany.id||null},getUserCompanyName:function(){return c.userCompany&&c.userCompany.name||null},getSelectedCompanyId:function(){return c.selectedCompany&&c.selectedCompany.id||null},getSelectedCompanyName:function(){return c.selectedCompany&&c.selectedCompany.name||null},getSelectedCompanyCountry:function(){return c.selectedCompany&&c.selectedCompany.country||null},getCopyOfUserCompany:function(n){return n?e.extend({},c.userCompany):o.follow(c.userCompany)},getCopyOfSelectedCompany:function(n){return n?e.extend({},c.selectedCompany):o.follow(c.selectedCompany)},isSubcompanySelected:function(){return c.selectedCompany&&c.selectedCompany.id!==(c.userCompany&&c.userCompany.id)},isTestCompanySelected:function(){return c.selectedCompany&&c.selectedCompany.isTest===!0},isSeller:function(){return c.selectedCompany&&c.selectedCompany.sellerId?!0:!1}};return m}])}(angular),function(e){"use strict";e.module("risevision.ui-flow",["LocalStorageModule"]).constant("uiStatusDependencies",{_dependencies:{},_retries:{},addDependencies:function(n){e.extend(this._dependencies,n)},setMaximumRetryCount:function(e,n){if(1>n)throw"Retry count for "+e+" must be equal to or greater than 1.";void 0===this._retries[e]&&(this._retries[e]=n)}}).factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope","localStorageService",function(n,t,o,a,s,i){var r,c,l,u=null,d=a._dependencies,m=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},p=function(e){var t;try{t=o.get(e)}catch(a){n.debug("Generating dummy status",e),t=m()}return t},g=function(o){var a;n.debug("Attempting to reach status",o,"...");var s=d[o];if(s){s instanceof Array||(s=[s]);var i=t.defer(),r=i;e.forEach(s,function(e){var s=t.defer();i.promise.then(s.resolve,function(){g(e).then(function(){d[e]&&n.debug("Deps for status",e,"satisfied."),p(o)().then(function(){n.debug("Status",o,"satisfied."),s.resolve(!0)},function(){n.debug("Status",o,"not satisfied."),s.reject(o)})},function(t){d[e]?(n.debug("Failed to reach status",e," because its dependencies are not satisfied. Last rejected dep: ",t),s.reject(t)):s.reject(e)})}),a=i=s}),r.reject()}else a=t.defer(),p(o)().then(function(){n.debug("Termination status",o,"satisfied."),a.resolve(!0)},function(){n.debug("Termination status",o,"not satisfied."),a.reject(o)});return a.promise},f=!0,h=function(o){if(!o&&!c){var s=t.defer();return s.resolve(),s.promise}return!c&&f&&(c=o,u=e.copy(a._retries),l=t.defer(),f=!1),c&&(l=t.defer(),g(c).then(function(e){c&&(r=c),l.resolve(e),c=null,f=!0},function(e){r=e,void 0!==u[e]&&(0===u[e]?(n.debug("Maximum allowed retries for status",e,"reached. Validation will cancel."),b()):u[e]--),f=!0,l.reject(e)})),l&&l.promise},v=function(e){return r="pendingCheck",h(e)},y=function(){i.set("risevision.ui-flow.state",{goalStatus:c,retriesLeft:u})},b=function(){r="",c="",u=null,f=!0,s.$broadcast("risevision.uiStatus.validationCancelled"),n.debug("UI status validation cancelled.")};if(i.get("risevision.ui-flow.state")){var C=i.get("risevision.ui-flow.state");C&&C.goalStatus&&(c=C.goalStatus,n.debug("uiFlowManager.goalStatus restored to",C.goalStatus,C.retriesLeft),u=C.retriesLeft,l=t.defer(),f=!1),i.remove("risevision.ui-flow.state")}var S={invalidateStatus:v,cancelValidation:b,getStatus:function(){return r},isStatusUndetermined:function(){return"pendingCheck"===r},persist:y};return S}])}(angular),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.userprofile","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,n,t,o){return function(){t.debug("agreeToTerms called.");var a=e.defer();return n().then(function(e){var n=e.account.agreeToTerms();n.execute(function(e){t.debug("agreeToTerms resp",e),o.removeAll(),e.error?a.reject(e.error):a.resolve()})}),a.promise}}]).factory("agreeToTermsAndUpdateUser",["$q","$log","agreeToTerms","updateUser",function(e,n,t,o){return function(a,s){n.debug("registerAccount called.",a,s);var i=e.defer();return t().then()["finally"](function(){o(a,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("registerAccount",["$q","$log","addAccount","updateUser",function(e,n,t,o){return function(a,s){n.debug("registerAccount called.",a,s);var i=e.defer();return t().then()["finally"](function(){o(a,s).then(function(e){e.result?i.resolve():i.reject()},i.reject)["finally"]("registerAccount ended")}),i.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("addAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.add();n.execute(function(e){t.debug("addAccount resp",e),e.result?o.resolve():o.reject("addAccount")})}),o.promise}}]).factory("getAccount",["$q","riseAPILoader","$log",function(e,n,t){return function(){t.debug("getAccount called.");var o=e.defer();return n().then(function(e){var n=e.account.get();n.execute(function(e){t.debug("getAccount resp",e),e.item?o.resolve(e.item):o.reject("getAccount")})}),o.promise}}])}(angular),function(e){"use strict";e.module("risevision.common.registration",["risevision.common.userstate","risevision.ui-flow","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registerdAsRiseVisionUser:"signedInWithGoogle",registeredAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registeredAsRiseVisionUser"]}),e.setMaximumRetryCount("signedInWithGoogle",1)}]).factory("signedInWithGoogle",["$q","getOAuthUserInfo","userState",function(e,n,t){return function(){var n=e.defer();return t.isLoggedIn()?n.resolve():n.reject("signedInWithGoogle"),n.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,n,t){return function(){var n=e.defer();return t().then(function(){n.reject("notLoggedIn")},n.resolve),n.promise}}]).factory("registeredAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(n,t,o,a,s){return function(){var i=n.defer();return t(s.getUsername()).then(function(n){e.isDefined(n.email)&&e.isDefined(n.mailSyncEnabled)?i.resolve(n):o.get("surpressRegistration")?i.resolve({}):i.reject("registeredAsRiseVisionUser")},function(e){o.get("surpressRegistration")?i.resolve({}):(a.debug("registeredAsRiseVisionUser rejected",e),i.reject("registeredAsRiseVisionUser"))}),i.promise}}])}(angular),angular.module("risevision.common.support",["risevision.widget.common.subscription-status"]).factory("supportFactory",["$q","subscriptionStatusService","SUPPORT_PRODUCT_CODE","STORE_SERVER_URL","userState","$modal","$templateCache","$http","$window","segmentAnalytics",function(e,n,t,o,a,s,i,r,c,l){var u={},d="Premium",m="Trial",p="Free";u.handlePrioritySupportAction=function(){g().then(function(e){"on-trial"===e.statusCode&&v(e),u.openIntercomChat()},function(e){v(e)})};var g=function(){var n=e.defer();return h().then(function(e){!e||"not-subscribed"!==e.statusCode&&"cancelled"!==e.statusCode&&"suspended"!==e.statusCode&&"trial-expired"!==e.statusCode&&"trial-available"!==e.statusCode||(f(p),n.reject(e)),"on-trial"===e.statusCode&&(f(m),n.resolve(e)),"subscribed"===e.statusCode&&(f(d),n.resolve(e))},function(e){console.debug("Could not retrieve a subscription status",e),n.reject()}),n.promise},f=function(e){l.identify(a.getUsername(),{plan:e})},h=function(){var o=e.defer();return t&&a.getSelectedCompanyId()?n.get(t,a.getSelectedCompanyId()).then(function(e){console.debug("subscriptionStatus",e),o.resolve(e)},function(e){console.debug("Could not retrieve a subscription status",e),o.reject(e)}):o.reject(),o.promise},v=function(e){console.debug("opening support trial popup"),s.open({template:i.get("help-priority-support-modal.html"),controller:"HelpPrioritySupportModalCtrl",resolve:{subscriptionStatus:function(){return e}}})};u.openIntercomChat=function(){console.debug("opening intercom chat"),c.Intercom("showNewMessage")},u.initiateTrial=function(){var n=o+"/v1/widget/auth?pc="+t+"&cid="+a.getSelectedCompanyId(),s=e.defer();return r.get(n).then(function(){console.debug("Subscription trial star2ted"),u.handlePrioritySupportAction(),s.resolve()},function(e){console.debug("Could not call the subscription start trial",e),s.reject()}),s.promise},u.handleSendUsANote=function(){g().then(function(e){y(e)},function(e){y(e)})};var y=function(e){console.debug("opening send us a note popup"),s.open({template:i.get("help-send-us-a-note-modal.html"),controller:"HelpSendUsANoteModalCtrl",resolve:{subscriptionStatus:function(){return e}}})};return u}]),function(e){"use strict";e.module("risevision.core.cache",[]).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var n=Array.prototype,t=n.slice,o=n.concat,a=function(e,n,t){if(void 0===n)return e;switch(null===t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,o){return e.call(n,t,o)};case 3:return function(t,o,a){return e.call(n,t,o,a)};case 4:return function(t,o,a,s){return e.call(n,t,o,a,s)}}return function(){return e.apply(n,arguments)}};return function(n,s,i){var r,c={};if(null===n)return c;if(e.isFunction(s)){s=a(s,i);for(r in n){var l=n[r];s(l,r,n)&&(c[r]=l)}}else{var u=o.apply([],t.call(arguments,1));n=new Object(n);for(var d=0,m=u.length;m>d;d++)r=u[d],r in n&&(c[r]=n[r])}return c}})}(angular),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log",function(e,n,t,o){var a,s={};return function(i,r){var c;if(i===a&&!r&&null!==s[i])return s[i].promise;if(a=i,s[i]=c=t.defer(),i){var l={};i&&(l.username=i),o.debug("getUserProfile called",l),t.all([e(),n()]).then(function(e){var n=e[1];n.user.get(l).execute(function(e){e.error||!e.result?c.reject(e):(o.debug("getUser resp",e),c.resolve(e.item))})},c.reject)}else c.reject("getUserProfile failed: username param is required."),o.debug("getUserProfile failed: username param is required.");return c.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","getUserProfile","pick",function(e,n,t,o,a){return function(s,i){var r=e.defer();return i=a(i,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status"),t.debug("updateUser called",s,i),n().then(function(e){var n=e.user.patch({username:s,data:i});n.execute(function(e){t.debug("updateUser resp",e),e.error?r.reject(e):e.result?o(s,!0).then(function(){r.resolve(e)}):r.reject("updateUser")})},r.reject),r.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick",function(e,n,t,o){return function(a,s,i){var r=e.defer();return n().then(function(e){i=o(i,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status");var n=e.user.add({username:s,companyId:a,data:i});n.execute(function(e){t.debug("addUser resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,n,t){return function(o){var a=e.defer();return n().then(function(e){var n=e.user["delete"]({username:o});n.execute(function(e){t.debug("deleteUser resp",e),e.result?a.resolve(e):a.reject("deleteUser")})}),a.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,n,t){return function(o){t.debug("getUsers",o);var a=e.defer();return n().then(function(e){var n=e.user.list(o);n.execute(function(e){t.debug("getUsers resp",e),e.result?a.resolve(e.items):a.reject("getUsers")})},a.reject),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","mailSyncEnabled","sellerId","isTest","shipToUseCompanyAddress","shipToName","shipToStreet","shipToUnit","shipToCity","shipToProvince","shipToPostalCode","shipToCountry"]).constant("ALERTS_WRITABLE_FIELDS",["alertSettings"]).constant("COMPANY_SEARCH_FIELDS",["name","id","street","unit","city","province","country","postalCode","telephone","fax","shipToName","shipToStreet","shipToCity","shipToPostalCode"]).factory("company",["$q","$log","coreAPILoader","pick","ALERTS_WRITABLE_FIELDS",function(e,n,t,o,a){var s={updateAlerts:function(s,i){var r=e.defer(),c=o.apply(this,[i].concat(a)),l={id:s,data:c};return n.debug("updateAlerts called",s,c),t().then(function(e){return e.company.patch(l)}).then(function(e){n.debug("update Alerts resp",e),r.resolve(e.result)}).then(null,function(e){n.error("Failed to update Alerts.",e),r.reject(e)}),r.promise}};return s}]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,n,t,o){return function(a,s){var i=e.defer();return n().then(function(e){var n=o.apply(this,[s].concat(t)),r=e.company.add({parentId:a,data:n});r.execute(function(e){e.result?i.resolve(e.item):i.reject(e)},i.reject)}),i.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("getCompany called",o);var a=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var s=e.company.get(n);s.execute(function(e){t.debug("getCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("lookupCompany called",o);var a=n.defer();return e().then(function(e){var n=e.company.lookup({authKey:o});n.execute(function(e){t.debug("lookupCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o,a){var s=n.defer();return e().then(function(e){var n=e.company.move({authKey:o,newParentId:a});n.execute(function(e){t.debug("moveCompany resp",e),e.result?s.resolve(e.item):s.reject(e)})}),s.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,n,t,o,a){return function(s,i){var r=e.defer();return i=o.apply(this,[i].concat(a)),n.debug("updateCompany called",s,i),t().then(function(e){var t=e.company.patch({id:s,data:i});t.execute(function(e){n.debug("updateCompany resp",e),e.result?r.resolve(e):r.reject(e)})}),r.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,n,t){return function(o,a){var s=e.defer();return n.debug("regenerateField called",o,a),t().then(function(e){var t=e.company.regenerateField({id:o,fieldName:a});t.execute(function(e){n.debug("regenerateField resp",e),e.error?s.reject(e.message):s.resolve(e)},function(e){s.reject("call failed "+e)})}),s.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,n,t){return function(o){t.debug("deleteCompany called",o);var a=n.defer();return e().then(function(e){var n={};o&&(n.id=o);var s=e.company["delete"](n);s.execute(function(e){t.debug("deleteCompany resp",e),e.result?a.resolve(e.item):a.reject(e)})}),a.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany","COMPANY_SEARCH_FIELDS",function(e,n,t,o,a){var s=function(e,n){var t="";for(var o in e)t+="OR "+e[o]+":~'"+n+"' ";return t=t?t.substring(3):"",t.trim()};this.getCompanies=function(o,i,r,c,l){var u=n.defer(),d=i?s(a,i):"",m={companyId:o,search:d,cursor:r,count:c,sort:l};return t.debug("getCompanies called with",m),e().then(function(e){var n=e.company.list(m);n.execute(function(e){t.debug("getCompanies resp",e),u.resolve(e)})}),u.promise},this.loadSelectedCompany=function(e,t){var a=n.defer();return e&&e!==t.id?o(e).then(function(e){0===e.code&&e.item?a.resolve(e.item):a.resolve(t)}):a.resolve(t),a.promise}}]).filter("fullAddress",function(){return function(e){var n=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return n&&(n=n.substr(0,n.length-2)),n}})}(angular),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,n,t,o){return function(){var a,s=n.defer();return(a=t.get("oauth2UserInfo"))?a.error?s.reject(a.error):s.resolve(a):e().then(function(e){e.userinfo.get().execute(function(e){o.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(t.remove("oauth2UserInfo"),s.reject(e.error)):(t.put("oauth2UserInfo",e),s.resolve(e)):(t.remove("oauth2UserInfo"),s.reject())})},s.reject),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.systemmessages",["risevision.common.gapi"]).factory("getCoreSystemMessages",["gapiLoader","$q","$log",function(e,n,t){return function(o){var a=n.defer();return e().then(function(e){var n=e.client.core.systemmessage.list({companyId:o});n.execute(function(e){var n=e;n instanceof Array||!n.items||(n=n.items),t.debug("getCoreSystemMessage resp",n),a.resolve(n)})}),a.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.countries",["risevision.common.gapi"]).factory("getCoreCountries",["coreAPILoader","$q","$log","$filter",function(e,n,t,o){var a;return function(){return a?a.promise:(a=n.defer(),e().then(function(e){return e.country.list()}).then(function(e){var n=e.result?e.result.items:[];n instanceof Array&&(n=o("orderBy")(n,"name")),a.resolve(n)}).then(null,function(e){t.debug("getCoreCountries failed",e),a.reject(e),a=null}),a.promise)}}]).factory("COUNTRIES",["getCoreCountries",function(e){var n=[];return e().then(function(e){Array.prototype.push.apply(n,e)}),n}])}(angular),angular.module("risevision.common.fastpass",[]).factory("loadFastpass",["$q","$http","$document","$timeout","GSFP_URL","$log",function(e,n,t,o,a,s){var i=function(n){var o=e.defer(),a=t[0].createElement("script");return a.onload=a.onreadystatechange=function(e){o.resolve(e)},a.onerror=function(e){o.reject(e)},a.src=n,t[0].body.appendChild(a),o.promise};return function(t,o){var r=e.defer();s.debug("loadFastpass called",t,o);var c=function(e){s.error("loadFastpass rejected",e),r.reject("loadFastpass rejected "+e)};return n.get(a+"/geturl?userEmail="+o+"&userName="+t).then(function(e){i(e.data).then(function(e){s.debug("loadFastpass result",e),r.resolve(!0)},c)["catch"](c)},r.reject),r.promise}}]),angular.module("risevision.common.header.directives").directive("fastpass",["loadFastpass","userState",function(e,n){return{restrict:"AE",scope:{},link:function(t){t.$watch(function(){return n.getUserEmail()},function(t){t&&e(n.getUsername(),n.getUserEmail())})}}}]),angular.module("risevision.common.header.directives").directive("linkCid",["userState",function(e){return{link:function(n,t,o){var a=function(e){var n,t=o.href.indexOf("cid=");n=t>-1?o.href.substring(0,t+4)+e:o.href+(-1===o.href.indexOf("?")?"?":"&")+"cid="+e,o.$set("href",n)};n.$watch(function(){return e.getSelectedCompanyId()},function(e,n){e&&e!==n&&a(e)})}}}]),function(e){"use strict";e.module("risevision.common.company",[]).service("selectedCompanyUrlHandler",["$location","userState",function(e,n){this.updateUrl=function(){var t=n.getSelectedCompanyId();t&&e.search().cid!==t&&e.search("cid",t)},this.updateSelectedCompanyFromUrl=function(){var t=e.search().cid;if(t&&n.getUserCompanyId()&&t!==n.getSelectedCompanyId())n.switchCompany(t);else if(!t&&n.getSelectedCompanyId()){var o=e.absUrl();e.search("cid",n.getSelectedCompanyId()),o===e.destUrl&&e.replace()}},this.locationChangeSuccess=function(n,t){e.destUrl=t}}])}(angular),function(e){"use strict";e.module("risevision.common.shoppingcart",["risevision.common.gapi","risevision.common.userstate"]).factory("shoppingCart",["storeAPILoader","$log","$q","userState",function(n,t,o,a){var s=[],i={items:s,useBillToAddress:!1,shipToAttention:"",couponCode:""},r=function(){var e=o.defer();return a.isLoggedIn()?n().then(function(n){var o={id:a.getUsername()},s=n.cart.get(o);s.execute(function(n){n.error?(t.warn("Error loading cart items. Error: "+n.error),e.resolve()):(u(),d(n.items),i.useBillToAddress=n.useBillToAddress,i.shipToAttention=n.shipToAttention?n.shipToAttention:"",i.couponCode=n.couponCode,e.resolve())})}):(u(),e.resolve()),e.promise},c=function(){var e=o.defer();return a.isLoggedIn()&&n().then(function(n){try{var o={data:{jsonItems:p(s),shipToAttention:i.shipToAttention,useBillToAddress:i.useBillToAddress,couponCode:i.couponCode}},a=n.cart.put(o);a.execute(function(n){n.error?(t.warn("Error persisting cart items. Error: "+n.error),e.resolve()):e.resolve()})}catch(r){e.resolve(),t.error("[persistToStorage] - Unimplemented API method "+r.message)}}),e.promise},l=function(){i.useBillToAddress=!1,i.shipToAttention="",i.couponCode="",u()},u=function(){for(;s.length>0;)s.pop()},d=function(e){if(e)for(var n=0;n<e.length;n++)s.push(e[n])},m=function(e){for(var n,t=[],o=0;o<e.length;o++)n={productId:e[o].productId,qty:e[o].qty,accountingId:e[o].selected.accountingId},t.push(n);return t},p=function(e){var n=m(e);return JSON.stringify(n)},g=null,f=null,h={get:function(){if(null!==g&&a.checkUsername(f))return g;f=a.getUsername(),l(),g=o.defer();var e=g;return r().then(function(){e.resolve(i)}),e},clear:function(){u(),c(),t.debug("Shopping cart cleared.")},getItems:function(){return s},setItems:function(e){return t.debug("Setting cart items",e),e!==s&&(u(),d(e)),c()},getShipToAttention:function(){return i.shipToAttention},getUseBillToAddress:function(){return i.useBillToAddress},setAddressFields:function(e,n){return i.shipToAttention=e,i.useBillToAddress=n,c()},getCouponCode:function(){return i.couponCode},setCouponCode:function(e){return t.debug("Setting coupon code",e),i.couponCode=e,c()},getItemCount:function(){return null!==s?s.length:0},removeItem:function(e){if(e){for(var n=0;n<s.length;n++)if(s[n].productId===e.productId){s.splice(n,1);break}c()}},adjustItemQuantity:function(e,n){e&&$.isNumeric(n)&&n>0&&c()},addItem:function(n,t,o){if(a.isRiseVisionUser()){var i=this.findItem(n);(!i||"Subscription"!==n.paymentTerms&&"Metered"!==n.paymentTerms)&&n&&$.isNumeric(t)&&n.orderedPricing.length>o&&(i?i.qty=parseInt(i.qty)+parseInt(t):(i=e.copy(n),i.qty=t,s.push(i)),i.selected=n.orderedPricing[o],c())}},findItem:function(e){if(e)for(var n=0;n<s.length;n++)if(e.productId===s[n].productId)return s[n];return null},itemExists:function(e){return a.isRiseVisionUser()&&e&&null!==this.findItem(e)?!0:!1}};return h}])}(angular),function(e){"use strict";e.module("risevision.common.currency",["risevision.common.gapi"]).factory("currencyService",["$q","storeAPILoader","$log",function(e,n,t){var o=null,a={defaultItem:null},s=function(e){this.country=e.country,this.currencyCode=e.currencyCode,this.description=e.description,this.bankAccountCode=e.bankAccountCode,this.bankAccountDescription=e.bankAccountDescription,this.getName=function(){return this.currencyCode.toUpperCase()},this.pickPrice=function(e,n){switch(this.currencyCode.toUpperCase()){case"CAD":return n;default:return e}}};return a.getByCountry=function(e){if(e)for(var n=0;n<this.items.length;n++)if(this.items[n].country&&this.items[n].country.toUpperCase()===e.toUpperCase())return this.items[n];return this.defaultItem},a.setItems=function(e){this.items=[];for(var n=0;n<e.length;n++){var t=new s(e[n]);this.items.push(t),t.country||(this.defaultItem=t)}},function(){return null!==o?o.promise:(o=e.defer(),t.debug("currencyService called"),n().then(function(e){var n=e.currency.list();n.execute(function(e){t.debug("currencyService resp",e),e.error?(t.error("currencyService error: ",e.error),o.reject(e.error)):(a.setItems(e.items),o.resolve(a))})}),o.promise)}}])}(angular),function(e){"use strict";try{e.module("risevision.common.config")}catch(n){e.module("risevision.common.config",[])}e.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),e.module("risevision.common.config").value("ENABLE_INTERCOM_MESSAGING",!1).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("COOKIE_CHECK_URL","//storage-dot-rvaserver2.appspot.com").value("STORE_URL","https://store.risevision.com").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com").value("STORE_ENDPOINT_URL","https://store-dot-rvaserver2.appspot.com/_ah/api").value("GSFP_URL","https://gsfp-dot-rvaserver2.appspot.com/fp").value("SUPPORT_PRODUCT_CODE","4c8c2f1a481d0ad84c6b16a9c6e90e2fc2252944").value("SUPPORT_PRODUCT_ID","14").value("SUPPORT_PRODUCT_URL","https://store.risevision.com/product/14/rise-priority-support")}(angular);try{angular.module("risevision.common.config")}catch(err){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("CLIENT_ID","614513768474.apps.googleusercontent.com");var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).factory("gapiLoader",["$q","$window",function(e,n){var t=e.defer();return function(){var e;if("loaded"===n.gapiLoadingStatus)t.resolve(n.gapi);else if(!n.gapiLoadingStatus){n.gapiLoadingStatus="loading";var o=n.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",o),"undefined"!=typeof a&&document.getElementsByTagName("body")[0].appendChild(a),e=function(){t.resolve(n.gapi),n.removeEventListener("gapi.loaded",e,!1)},n.addEventListener("gapi.loaded",e,!1)}return t.promise}}]).factory("gapiClientLoaderGenerator",["$q","gapiLoader","$log",function(e,n,t){return function(o,a,s){return function(){var i=e.defer();return n().then(function(e){e.client[o]?i.resolve(e.client[o]):e.client.load.apply(this,[o,a].concat([function(){if(e.client[o])t.debug(o+"."+a+" Loaded"),i.resolve(e.client[o]);else{var n=o+"."+a+" Load Failed";t.error(n),i.reject(n)}},s]))}),i.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("core","v1",o)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("rise","v0",o)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().store_api_base_url?t.search().store_api_base_url+"/_ah/api":e;return n("store","v0.01",o)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("discovery","v1",o)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,n,t){var o=t.search().core_api_base_url?t.search().core_api_base_url+"/_ah/api":e;return n("monitoring","v0",o)}]),function(e){"use strict";e.module("risevision.common.systemmessages",[]).factory("systemMessages",["$log","$q",function(n,t){function o(e,t){n.debug("pushing message",e),t.push(e)}var a=[],s=[];return a.addMessages=function(n){n&&n instanceof Array&&(n=function(n){var t=[],o=new Date;return e.forEach(n,function(e){var n=new Date(e.endDate||"2199-12-31"),a=new Date(e.startDate||0);n.setDate(n.getDate()+1),o>a&&n>o&&t.push(e)}),t}(n),n.forEach(function(e){var n=!1;a.forEach(function(t){t.text===e.text&&(n=!0)}),n||o(e,a)}),a.sort(function(e,n){return!e.startDate||e.startDate>n.startDate?1:e.startDate&&e.startDate===n.startDate?0:-1}).reverse())},a.clear=function(){a.length=0,n.debug("System message cleared.")},a.registerRetriever=function(e){s.push(e)},a.resetAndGetMessages=function(){a.clear();var e=s.map(function(e){return e.call()});return t.all(e).then(function(e){e.forEach(a.addMessages)})},a}])}(angular),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var n=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise},this.sendProductCode=function(n){var t=e.defer(),o={params:n};return gadgets.rpc.call("","rscmd_saveSettings",function(){t.resolve(!0)},o),t.promise}}]),angular.module("risevision.common.logging",[]).constant("EXTERNAL_LOGGER_SERVICE_URL","https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Apps_Events/tables/TABLE_ID/insertAll").constant("EXTERNAL_LOGGER_REFRESH_URL","https://www.googleapis.com/oauth2/v3/token?client_id=1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com&client_secret=nlZyrcPLg6oEwO9f9Wfn29Wh&refresh_token=1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT&grant_type=refresh_token").constant("EXTERNAL_LOGGER_INSERT_SCHEMA",{kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:"",json:{event:"",event_details:"",event_value:0,host:"",ts:0}}]}).factory("externalLogging",["$http","$window","$q","$log","EXTERNAL_LOGGER_REFRESH_URL","EXTERNAL_LOGGER_INSERT_SCHEMA","EXTERNAL_LOGGER_SERVICE_URL",function(e,n,t,o,a,s,i){var r,c,l={};return l.logEvent=function(a,r,c){o.debug("BQ log",a,r,c);var u=t.defer();return l.getToken().then(function(t){var l,d=new Date,m=d.getUTCFullYear(),p=d.getUTCMonth()+1,g=d.getUTCDate(),f=JSON.parse(JSON.stringify(s));10>p&&(p="0"+p),10>g&&(g="0"+g),l=i.replace("TABLE_ID","events"+m+p+g),f.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),f.rows[0].json.event=a,r&&(f.rows[0].json.event_details=r),c&&(f.rows[0].json.event_value=c),f.rows[0].json.host=n.location.hostname,f.rows[0].json.ts=(new Date).toISOString(),e.post(l,f,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then(function(e){u.resolve(e)},function(e){o.debug("error posting to BQ",e),u.reject(e)})},function(e){o.debug("BQ token ERROR",e),u.reject(e)}),u.promise},l.getToken=function(){var n=t.defer();return r&&(new Date).getTime()-c<358e4?n.resolve(r):e.post(a).then(function(e){r=e.data.access_token,c=(new Date).getTime(),n.resolve(e.data.access_token)},function(){n.reject()}),n.promise},l}]),angular.module("risevision.common.cookie",["risevision.common.config"]).service("cookieTester",["$q","$document","$http","COOKIE_CHECK_URL",function(e,n,t,o){var a={};return a.checkCookies=function(){var n=e.defer();return e.all([a.checkLocalCookiePermission(),a.checkThirdPartyCookiePermission()]).then(function(){n.resolve()},function(){n.reject()}),n.promise},a.checkLocalCookiePermission=function(){return n[0].cookie="rv-test-local-cookie=yes",n[0].cookie.indexOf("rv-test-local-cookie")>-1?e.when(!0):e.reject(!1)},a.checkThirdPartyCookiePermission=function(){var n=e.defer();return t.get(o+"/createThirdPartyCookie",{withCredentials:!0}).then(function(){return t.get(o+"/checkThirdPartyCookie",{withCredentials:!0})}).then(function(e){"true"===e.data.check?n.resolve(!0):n.reject(!1)}).then(null,function(){n.resolve(!1)}),n.promise;
},a}]),function(){"use strict";angular.module("risevision.common.components.last-modified",[]).directive("lastModified",["$templateCache",function(e){return{restrict:"E",scope:{changeDate:"=",changedBy:"="},template:e.get("last-modified/last-modified.html"),link:function(e){e.$watch("changedBy",function(n){e.changedBy=n?n:"N/A"})}}}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified").filter("username",function(){return function(e){var n=e;return e&&-1!==e.indexOf("@")&&(n=e.substring(0,e.indexOf("@"))),n}})}(),function(e){try{e=angular.module("risevision.common.components.last-modified")}catch(n){e=angular.module("risevision.common.components.last-modified",[])}e.run(["$templateCache",function(e){e.put("last-modified/last-modified.html","<span class=\"text-muted\"><small>Saved {{changeDate | date:'d-MMM-yyyy h:mm a'}} by {{changedBy | username}}</small></span>")}])}(),angular.module("risevision.common.components.search-filter",[]).directive("searchFilter",["$timeout",function(e){return{restrict:"E",scope:{filterConfig:"=",search:"=",doSearch:"="},templateUrl:"search-filter/search-filter.html",link:function(n){n.delay=function(){var n=null;return function(t,o){e.cancel(n),n=e(t,o)}}(),n.reset=function(){n.search.query&&(n.search.query="",n.doSearch())}}}}]),function(e){try{e=angular.module("risevision.common.components.search-filter")}catch(n){e=angular.module("risevision.common.components.search-filter",[])}e.run(["$templateCache",function(e){e.put("search-filter/search-filter.html",'<div class="input-group"><span class="input-group-addon" ng-click="doSearch()"><i class="fa fa-search"></i></span> <input id="{{ filterConfig.id }}" type="text" class="form-control" placeholder="{{ filterConfig.placeholder }}" ng-model="search.query" ng-enter="delay(doSearch, 0)" ng-change="delay(doSearch, 1000)"> <span class="input-group-addon" ng-click="reset()"><i class="fa fa-times"></i></span></div>')}])}(),function(e){"use strict";e.module("risevision.common.components.scrolling-list",["rvScrollEvent"]).value("BaseList",function(e){this.list=[],this.maxCount=e?e:40,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(e,n){this.cursor=n,this.endOfList=e.length<this.maxCount,this.concat(e)}})}(angular),function(e){"use strict";var n=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,t){return{scope:!1,link:function(o,a,s){var i,r,c=e(s.rvScrollEvent),l=a[0],u="scroll",d={x:0,y:0},m=function(){r=function(e){d.x=l.scrollLeft,d.y=l.scrollTop,p(e),g(),f(e,!1)},a.bind(u,r)},p=function(e){i=t.setInterval(function(){d.x===l.scrollLeft&&d.y===l.scrollTop?(t.clearInterval(i),m(),f(e,!0)):(d.x=l.scrollLeft,d.y=l.scrollTop)},n)},g=function(){a.unbind(u,r)},f=function(e,n){o.$apply(function(){c(o,{$event:e,isEndEvent:n})})};m()}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.scrolling-list").directive("scrollingList",["$parse","$compile",function(e,n){return{restrict:"A",replace:!1,terminal:!0,priority:1e3,link:function(t,o,a){var s=e(a.scrollingList);t.handleScroll=function(e,n){n&&e.target.scrollTop&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&s(t)},o.attr("rv-scroll-event","handleScroll($event, isEndEvent)"),o.removeAttr("scrolling-list"),n(o)(t)}}}])}(angular),angular.module("risevision.common.components.stop-event",[]).directive("stopEvent",function(){return{restrict:"A",link:function(e,n,t){n.on(t.stopEvent,function(e){e.stopPropagation()})}}}),function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").factory("segmentAnalytics",["$rootScope","$window","$log","$location",function(e,n,t,o){function a(e){e&&(n.intercomSettings=n.intercomSettings||{},n.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}function s(){e.$on("$viewContentLoaded",function(){r.location!==o.path()&&(r.location=o.path(),r.pageview(r.location))})}var i,r={};n.analytics=n.analytics||[];var c=n.analytics;c.factory=function(e){function a(n,t){"track"===e&&t&&t.length>1&&t[1]&&"object"==typeof t[1]&&(t[1].url=o.host())}return function(){var o=Array.prototype.slice.call(arguments);return a(e,o),o.unshift(e),n.analytics.push(o),t.debug("Segment Tracker",o),n.analytics}},c.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var l=0;l<c.methods.length;l++){var u=c.methods[l];r[u]=c.factory(u)}return r.load=function(e,n){if(e&&!i){a(n),s();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o),i=!0}},r}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,n,t){var o={},a=function(){var e=t.getCopyOfProfile();n.identify(t.getUsername(),{email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:"",companyId:t.getUserCompanyId(),companyName:t.getUserCompanyName(),company:{id:t.getUserCompanyId(),name:t.getUserCompanyName()}})};return o.initialize=function(){e.$on("risevision.user.authorized",function(){t.getUsername()&&a()})},o}])}(angular),function(){"use strict";try{angular.module("risevision.common.config")}catch(e){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/"),angular.module("risevision.widget.common.subscription-status.config",[]).value("IN_RVA_PATH","/product/productId/?up_id=iframeId&parent=parentUrl&inRVA=true&cid=companyId").value("IN_RVA_ACCOUNT_PATH","/account?up_id=iframeId&parent=parentUrl&inRVA=true").value("PATH_URL","v1/company/companyId/product/status?pc=")}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status",["risevision.common.config","risevision.widget.common.subscription-status.config","risevision.widget.common.subscription-status.service","risevision.widget.common","risevision.common.i18n","ngSanitize"])}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("appSubscriptionStatus",["$templateCache","subscriptionStatusService","$document","$compile",function(e,n,t,o){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",productPrice:"@"},template:e.get("app-subscription-status-template.html"),link:function(e,a,s,i){function r(){e.productCode&&e.productId&&e.companyId&&n.get(e.productCode,e.companyId).then(function(n){n&&(e.subscriptionStatus=n)},function(){})}function c(){if(!u){var n=t.find("body").eq(0),a=angular.element("<div store-modal></div>");a.attr({id:"store-modal",animate:"animate","show-store-modal":"showStoreModal","company-id":"{{companyId}}","product-id":"{{productId}}"});var s=o(a)(e);n.append(s),u=!0}}function l(){if(!d){var n=t.find("body").eq(0),a=angular.element("<div store-account-modal></div>");a.attr({id:"store-account-modal",animate:"animate","show-store-account-modal":"showAccountStoreModal","company-id":"{{companyId}}","product-id":"{{productId}}"});var s=o(a)(e);n.append(s),d=!0}}var u=!1,d=!1;e.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null},e.$watch("companyId",function(){r()}),i&&e.$watch("subscriptionStatus",function(e){i.$setViewValue(e)});var m=e.$watch("showStoreModal",function(e){e&&(c(),m())}),p=e.$watch("showStoreAccountModal",function(e){e&&(l(),p())});e.$on("store-dialog-save",function(){r()})}}}]).directive("ngDisableRightClick",function(){return function(e,n){n.bind("contextmenu",function(n){e.$apply(function(){n.preventDefault()})})}})}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("storeAccountModal",["$templateCache","$location","gadgetsApi","STORE_URL","IN_RVA_ACCOUNT_PATH",function(e,n,t,o,a){return{restrict:"AE",scope:{showStoreAccountModal:"=",productId:"@",companyId:"@"},template:e.get("store-account-modal-template.html"),link:function(e,s){function i(){!e.rpcRegistered&&t&&(e.rpcRegistered=!0,t.rpc.register("rscmd_saveSettings",r),t.rpc.register("rscmd_closeSettings",c),t.rpc.setupReceiver("store-account-modal-frame"))}function r(){e.$emit("store-dialog-save"),c()}function c(){e.$apply(function(){e.showStoreAccountModal=!1})}var l=$(s);e.showStoreAccountModal=!0,e.$watch("showStoreAccountModal",function(t){if(t){i();var s=o+a.replace("productId",e.productId).replace("companyId",e.companyId).replace("iframeId","store-account-modal-frame").replace("parentUrl",encodeURIComponent(n.$$absUrl));l.find("#store-account-modal-frame").attr("src",s)}})}}}])}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("storeModal",["$templateCache","$location","gadgetsApi","STORE_URL","IN_RVA_PATH",function(e,n,t,o,a){return{restrict:"AE",scope:{showStoreModal:"=",productId:"@",companyId:"@"},template:e.get("store-modal-template.html"),link:function(e,s){function i(){!e.rpcRegistered&&t&&(e.rpcRegistered=!0,t.rpc.register("rscmd_saveSettings",r),t.rpc.register("rscmd_closeSettings",c),t.rpc.setupReceiver("store-modal-frame"))}function r(){e.$emit("store-dialog-save"),c()}function c(){e.$emit("store-dialog-close"),e.$apply(function(){e.showStoreModal=!1})}var l=$(s);e.showStoreModal=!0,e.$watch("showStoreModal",function(t){if(t){i();var s=o+a.replace("productId",e.productId).replace("companyId",e.companyId).replace("iframeId","store-modal-frame").replace("parentUrl",encodeURIComponent(n.$$absUrl));l.find("#store-modal-frame").attr("src",s)}})}}}])}(),function(){"use strict";angular.module("risevision.widget.common.subscription-status").directive("subscriptionStatus",["$templateCache","subscriptionStatusService","$document","$compile","$rootScope",function(e,n,t,o,a){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",expandedFormat:"@",showStoreModal:"=?"},template:e.get("subscription-status-template.html"),link:function(e,s,i,r){function c(){e.productCode&&e.productId&&e.companyId&&n.get(e.productCode,e.companyId).then(function(n){n&&(e.subscriptionStatus&&e.subscriptionStatus.status===n.status||a.$emit("subscription-status:changed",n),e.subscriptionStatus=n)},function(){})}function l(){if(!d){var n=t.find("body").eq(0),a=angular.element("<div store-modal></div>");a.attr({id:"store-modal",animate:"animate","show-store-modal":"showStoreModal","company-id":"{{companyId}}","product-id":"{{productId}}"});var s=o(a)(e);n.append(s),d=!0}}function u(){if(!m){var n=t.find("body").eq(0),a=angular.element("<div store-account-modal></div>");a.attr({id:"store-account-modal",animate:"animate","show-store-account-modal":"showAccountStoreModal","company-id":"{{companyId}}","product-id":"{{productId}}"});var s=o(a)(e);n.append(s),m=!0}}var d=!1,m=!1;e.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null},e.$watch("companyId",function(){c()}),a.$on("refreshSubscriptionStatus",function(n,t){(null===t||e.subscriptionStatus.statusCode===t)&&c()}),r&&e.$watch("subscriptionStatus",function(e){r.$setViewValue(e)});var p=e.$watch("showStoreModal",function(e){e&&(l(),p())}),g=e.$watch("showStoreAccountModal",function(e){e&&(u(),g())});e.$on("store-dialog-save",function(){c()}),e.$on("store-dialog-close",function(){c()})}}}]).filter("to_trusted",["$sce",function(e){return function(n){return e.trustAsHtml(n)}}])}(),angular.module("risevision.widget.common.subscription-status").filter("productTrialDaysToExpiry",["$interpolate","$translate",function(e,n){var t=null,o=null;return n(["subscription-status.expires-today","subscription-status.expires-in"],{days:"{{days}}"}).then(function(n){t=e(n["subscription-status.expires-today"]),o=e(n["subscription-status.expires-in"])}),function(e){var n="";try{var a=864e5,s=new Date(e).getTime()-(new Date).getTime(),i=Math.floor(s/a),r={days:i};n=0===i?null!==t?t(r):"":i>0?null!==o?o(r):"":null!==t?t(r):""}catch(c){n=null!==t?t(r):""}return n}}]),function(){"use strict";angular.module("risevision.widget.common.subscription-status.service",["risevision.common.config","risevision.widget.common.subscription-status.config"]).service("subscriptionStatusService",["$http","$q","STORE_SERVER_URL","PATH_URL",function(e,n,t,o){function a(e,n){return Math.floor((n.getTime()-e.getTime())/r)}var s=["On Trial","Trial Expired","Subscribed","Suspended","Cancelled","Free","Not Subscribed","Product Not Found","Company Not Found","Error"],i=["on-trial","trial-expired","subscribed","suspended","cancelled","free","not-subscribed","product-not-found","company-not-found","error"],r=864e5;this.get=function(r,c){var l=n.defer(),u=t+o.replace("companyId",c)+r;return e.get(u).then(function(e){if(e&&e.data&&e.data.length){var n=e.data[0];n.plural="";var t=s.indexOf(n.status);t>=0&&(n.statusCode=i[t]),""===n.status?(n.status="N/A",n.statusCode="na",n.subscribed=!1):n.status===s[0]||n.status===s[2]||n.status===s[5]?n.subscribed=!0:n.subscribed=!1,"not-subscribed"===n.statusCode&&n.trialPeriod&&n.trialPeriod>0&&(n.statusCode="trial-available",n.subscribed=!0),n.expiry&&"on-trial"===n.statusCode&&(n.expiry=new Date(n.expiry),n.expiry instanceof Date&&!isNaN(n.expiry.valueOf())&&(n.expiry=a(new Date,n.expiry)),0===n.expiry?n.plural="-zero":n.expiry>1&&(n.plural="-many")),l.resolve(n)}else l.reject("No response")}),l.promise}}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("app-subscription-status-template.html",'<a id="app-subscription-status" href=""\n  ng-click="showStoreModal = true" class="store-link">\n    <div class="rate">\n      <strong>${{productPrice}}</strong>\n    </div>\n    <div class="subscribe">\n      <strong ng-if="!subscriptionStatus.subscribed"><span translate="subscription-status.get-subscription"></span></strong>\n      <strong ng-if="subscriptionStatus.subscribed"><span translate="subscription-status.continue-to-app"></span></strong>\n    </div>\n</a>\n')}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("store-account-modal-template.html",'<div class="widget" ng-show="showStoreAccountModal">\n  <div class="overlay" ng-click="showStoreAccountModal = false"></div>\n  <div class="settings-center">\n    <div class="wrapper container modal-content">\n      <iframe id="store-account-modal-frame" name="store-account-modal-frame" class="modal-content full-screen-modal">\n        \n      </iframe>\n    </div>\n  </div>\n</div>')}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("store-modal-template.html",'<div class="widget" ng-show="showStoreModal">\n  <div class="overlay" ng-click="showStoreModal = false"></div>\n  <div class="settings-center">\n    <div class="wrapper container modal-content">\n      <iframe id="store-modal-frame" name="store-modal-frame" class="full-screen-modal">\n        \n      </iframe>\n    </div>\n  </div>\n</div>')}])}(),function(e){try{e=angular.module("risevision.widget.common.subscription-status")}catch(n){e=angular.module("risevision.widget.common.subscription-status",[])}e.run(["$templateCache",function(e){"use strict";e.put("subscription-status-template.html",'<div ng-show="!expandedFormat">\n  <h3 ng-disable-right-click>\n    <span ng-show="subscriptionStatus.statusCode !== \'not-subscribed\'" ng-bind-html="\'subscription-status.\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n  </h3>\n  \n  <span ng-show="subscriptionStatus.statusCode === \'trial-available\'">\n    <button class="btn btn-primary btn-xs" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.start-trial"></span>\n    </button>\n  </span>\n  <span ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <button class="btn btn-primary btn-xs" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.subscribe"></span>\n    </button>\n  </span>\n  <span ng-show="[\'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0">\n    <button class="btn btn-primary btn-xs" ng-click="showStoreAccountModal = true;">\n      <span translate="subscription-status.view-account"></span>\n    </button>\n  </span>\n</div>\n\n<div ng-show="expandedFormat">\n  <div class="subscription-status trial" ng-show="subscriptionStatus.statusCode === \'on-trial\'">\n    <span ng-bind-html="\'subscription-status.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span>\n    <button type="button" class="btn btn-primary add-left" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.subscribe-now"></span>\n    </button>\n  </div>\n  <div class="subscription-status expired" ng-show="subscriptionStatus.statusCode === \'trial-expired\'">\n    <span translate="subscription-status.expanded-expired"></span>\n    <button type="button" class="btn btn-primary add-left" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.subscribe-now"></span>\n    </button>\n  </div>\n  <div class="subscription-status cancelled" ng-show="subscriptionStatus.statusCode === \'cancelled\'">\n   <span translate="subscription-status.expanded-cancelled"></span>\n    <button type="button" class="btn btn-primary add-left" ng-click="showStoreModal = true;">\n      <span translate="subscription-status.subscribe-now"></span>\n    </button>\n  </div>\n  <div class="subscription-status suspended" ng-show="subscriptionStatus.statusCode === \'suspended\'">\n    <span translate="subscription-status.expanded-suspended"></span>\n    <button type="button" class="btn btn-primary add-left" ng-click="showStoreAccountModal = true;">\n      <span translate="subscription-status.view-invoices"></span>\n    </button>\n  </div>\n</div>\n')}])}(),angular.module("risevision.widget.common",[]),angular.module("risevision.widget.common").controller("settingsController",["$scope","settingsSaver","settingsGetter","settingsCloser",function(e,n,t,o){e.settings={params:{},additionalParams:{}},e.alerts=[],e.getAdditionalParam=function(n,t){var o=e.settings.additionalParams[n];return angular.isUndefined(o)?t:o},e.setAdditionalParam=function(n,t){e.settings.additionalParams[n]=t},e.loadAdditionalParams=function(){t.getAdditionalParams().then(function(n){e.settings.additionalParams=n,e.$broadcast("loadAdditionalParams",n)},function(e){alert(e)})},e.setAdditionalParams=function(n,t){e.settings.additionalParams[n]=t},e.saveSettings=function(){e.alerts=[],e.$broadcast("collectAdditionalParams"),n.saveSettings(e.settings).then(function(){},function(n){e.alerts=n.alerts})},e.closeSettings=function(){o.closeSettings().then(function(){},function(n){e.alerts=n.alerts})},e.settings.params=t.getParams(),e.loadAdditionalParams()}]).directive("scrollOnAlerts",function(){return{restrict:"A",scope:!1,link:function(e,n){e.$watchCollection("alerts",function(e,t){e.length>0&&0===t.length&&$("body").animate({scrollTop:n.offset().top},"fast")})}}}),angular.module("risevision.widget.common").constant("STORAGE_FILE_URL_BASE","storage.googleapis.com/risemedialibrary-").constant("STORAGE_FOLDER_URL_BASE","googleapis.com/storage/").factory("commonSettings",["$log","STORAGE_FILE_URL_BASE","STORAGE_FOLDER_URL_BASE",function(e,n,t){var o={getStorageUrlData:function(e){function o(e){return-1!==e.indexOf(n)?"file":-1!==e.indexOf(t)?"folder":null}function a(e){var n=e.split("risemedialibrary-");return n[1].slice(0,n[1].indexOf("/"))}var s,i,r,c,l={};if("file"===o(e))s=e.split(n)[1],s=decodeURIComponent(s.slice(s.indexOf("/")+1)),i=s.split("/"),l.companyId=a(e),l.fileName=i.pop(),l.folder=i.length>0?i.join("/"):"",""!==l.folder&&(l.folder+="/");else if("folder"===o(e)){r=e.split("?");for(var u=0;u<r.length;u++)if(c=r[u].split("="),"prefix"===c[0]&&"undefined"!=typeof c[1]&&""!==c[1]){l.companyId=a(e),l.folder=decodeURIComponent(c[1]),l.fileName="";break}}return l}};return o}]),angular.module("risevision.widget.common").factory("gadgetsApi",["$window",function(e){return e.gadgets}]),angular.module("risevision.widget.common").service("i18nLoader",["$window","$q",function(e,n){var t=n.defer();e.i18n.init({fallbackLng:"en",resGetPath:"locales/__ns_____lng__.json"},function(){t.resolve(e.i18n)}),this.get=function(){return t.promise}}]),angular.module("risevision.widget.common").factory("imageValidator",["$q",function(e){var n={isImage:function(n){var t=e.defer(),o=new Image;return o.onload=function(){t.resolve(!0)},o.onerror=function(){t.resolve(!1)},o.src=n,t.promise}};return n}]),angular.module("risevision.widget.common").service("settingsSaver",["$q","$log","gadgetsApi","settingsParser",function(e,n,t,o){function a(e){var n=angular.copy(e);return delete n.params.id,delete n.params.companyId,delete n.params.rsW,delete n.params.rsH,n}this.saveSettings=function(s,i){var r=e.defer(),c=[],l="";s=a(s),i&&(c=i(s)),c.length>0&&(n.debug("Validation failed.",c),r.reject({alerts:c})),s.params.hasOwnProperty("layoutURL")&&(l+=s.params.layoutURL+"?",delete s.params.layoutURL),l+=o.encodeParams(s.params);var u=o.encodeAdditionalParams(s.additionalParams);return t.rpc.call("","rscmd_saveSettings",function(e){n.debug("encoded settings",JSON.stringify(e)),n.debug("Settings saved. ",s),r.resolve(e)},{params:l,additionalParams:u}),r.promise}}]).service("settingsGetter",["$q","gadgetsApi","$log","settingsParser","$window","defaultSettings",function(e,n,t,o,a,s){this.getAdditionalParams=function(){var a=e.defer(),i=s.additionalParams||{};return n.rpc.call("","rscmd_getAdditionalParams",function(e){e=e?o.parseAdditionalParams(e):{},t.debug("getAdditionalParams returns ",e),a.resolve(angular.extend(i,e))}),a.promise},this.getParams=function(){var e=s.params||{};return angular.extend(e,o.parseParams(a.location.search))}}]).service("settingsParser",[function(){function e(e){return 0===e.indexOf("up_")?e.slice(3):null}this.parseAdditionalParams=function(e){return e?JSON.parse(e):{}},this.encodeAdditionalParams=function(e){return JSON.stringify(e)},this.encodeParams=function(e){var n=[];for(var t in e)if(e.hasOwnProperty(t)){var o;o="object"==typeof e[t]?JSON.stringify(e[t]):e[t],n.push("up_"+encodeURIComponent(t)+"="+encodeURIComponent(o))}return n.join("&")},this.parseParams=function(n){"?"===n[0]&&(n=n.slice(1));for(var t={},o=n.split("&"),a=0;a<o.length;a++){var s=o[a].split("="),i=e(decodeURIComponent(s[0]));if(i)try{t[i]=JSON.parse(decodeURIComponent(s[1]))}catch(r){t[i]=decodeURIComponent(s[1])}}return t}}]).service("settingsCloser",["$q","$log","gadgetsApi",function(e,n,t){this.closeSettings=function(){var n=e.defer();return t.rpc.call("","rscmd_closeSettings",function(){n.resolve(!0)}),n.promise}}]).value("defaultSettings",{}),function(e){"use strict";e.module("risevision.widget.common.visualization",[]).factory("visualizationApi",["$q","$window",function(e,n){var t,o=e.defer(),a={get:function(){return t||(t=o.promise,n.google.visualization?o.resolve(n.google.visualization):n.google.setOnLoadCallback(function(){o.resolve(n.google.visualization)})),t}};return a}])}(angular),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(e){var n=e.storageKey(),t=e.storage(),o=function(){var o=e.preferredLanguage();angular.isString(o)?e.use(o):t.put(n,e.use())};t?t.get(n)?e.use(t.get(n))["catch"](o):o():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(e){var n,t,o,a,s,i,r,c,l,u,d,m,p,g,f,h={},v=[],y=e,b=[],C=!1,S="translate-cloak",w=!1,$=".",k="2.5.2",A=function(){var e,n,t=window.navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(t.languages))for(e=0;e<t.languages.length;e++)if(n=t.languages[e],n&&n.length)return n;for(e=0;e<o.length;e++)if(n=t[o[e]],n&&n.length)return n;return null};A.displayName="angular-translate/service: getFirstBrowserLanguage";var I=function(){return(A()||"").split("-").join("_")};I.displayName="angular-translate/service: getLocale";var U=function(e,n){for(var t=0,o=e.length;o>t;t++)if(e[t]===n)return t;return-1},R=function(){return this.replace(/^\s+|\s+$/g,"")},T=function(e){for(var n=[],o=angular.lowercase(e),a=0,s=v.length;s>a;a++)n.push(angular.lowercase(v[a]));if(U(n,o)>-1)return e;if(t){var i;for(var r in t){var c=!1,l=Object.prototype.hasOwnProperty.call(t,r)&&angular.lowercase(r)===angular.lowercase(e);if("*"===r.slice(-1)&&(c=r.slice(0,-1)===e.slice(0,r.length-1)),(l||c)&&(i=t[r],U(n,angular.lowercase(i))>-1))return i}}var u=e.split("_");return u.length>1&&U(n,angular.lowercase(u[0]))>-1?u[0]:e},E=function(e,n){if(!e&&!n)return h;if(e&&!n){if(angular.isString(e))return h[e]}else angular.isObject(h[e])||(h[e]={}),angular.extend(h[e],L(n));return this};this.translations=E,this.cloakClassName=function(e){return e?(S=e,this):S};var L=function(e,n,t,o){var a,s,i,r;n||(n=[]),t||(t={});for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r=e[a],angular.isObject(r)?L(r,n.concat(a),t,a):(s=n.length?""+n.join($)+$+a:a,n.length&&a===o&&(i=""+n.join($),t[i]="@:"+s),t[s]=r));return t};this.addInterpolation=function(e){return b.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return u=e,this},this.useSanitizeValueStrategy=function(e){return C=e,this},this.preferredLanguage=function(e){return N(e),this};var N=function(e){return e&&(n=e),n};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(p=e,this):p},this.translationNotFoundIndicatorRight=function(e){return e?(g=e,this):g},this.fallbackLanguage=function(e){return x(e),this};var x=function(e){return e?(angular.isString(e)?(a=!0,o=[e]):angular.isArray(e)&&(a=!1,o=e),angular.isString(n)&&U(o,n)<0&&o.push(n),this):a?o[0]:o};this.use=function(e){if(e){if(!h[e]&&!d)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return s=e,this}return s};var M=function(e){return e?void(y=e):c?c+y:y};this.storageKey=M,this.useUrlLoader=function(e,n){return this.useLoader("$translateUrlLoader",angular.extend({url:e},n))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,n){return d=e,m=n||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return r=e,this},this.storagePrefix=function(e){return e?(c=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return l=e,this},this.usePostCompiling=function(e){return w=!!e,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():I();return n=v.length?T(t):t,this},this.registerAvailableLanguageKeys=function(e,n){return e?(v=e,n&&(t=n),this):v},this.useLoaderCache=function(e){return e===!1?f=void 0:e===!0?f=!0:"undefined"==typeof e?f="$translationCache":e&&(f=e),this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,c,v){var $,A,I,_=t.get(u||"$translateDefaultInterpolation"),P=!1,O={},F={},D=function(e,t,a){if(angular.isArray(e)){var i=function(e){for(var n={},o=[],s=function(e){var o=v.defer(),s=function(t){n[e]=t,o.resolve([e,t])};return D(e,t,a).then(s,s),o.promise},i=0,r=e.length;r>i;i++)o.push(s(e[i]));return v.all(o).then(function(){return n})};return i(e)}var c=v.defer();e&&(e=R.apply(e));var l=function(){var e=n?F[n]:F[s];if(A=0,r&&!e){var t=$.get(y);if(e=F[t],o&&o.length){var a=U(o,t);A=0===a?1:0,U(o,n)<0&&o.push(n)}}return e}();return l?l.then(function(){Z(e,t,a).then(c.resolve,c.reject)},c.reject):Z(e,t,a).then(c.resolve,c.reject),c.promise},j=function(e){return p&&(e=[p,e].join(" ")),g&&(e=[e,g].join(" ")),e},V=function(e){s=e,c.$emit("$translateChangeSuccess",{language:e}),r&&$.put(D.storageKey(),s),_.setLocale(s),angular.forEach(O,function(e,n){O[n].setLocale(s)}),c.$emit("$translateChangeEnd",{language:e})},G=function(e){if(!e)throw"No language key specified for loading.";var n=v.defer();c.$emit("$translateLoadingStart",{language:e}),P=!0;var o=f;"string"==typeof o&&(o=t.get(o));var a=angular.extend({},m,{key:e,$http:angular.extend({},{cache:o},m.$http)});return t.get(d)(a).then(function(t){var o={};c.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(o,L(e))}):angular.extend(o,L(t)),P=!1,n.resolve({key:e,table:o}),c.$emit("$translateLoadingEnd",{language:e})},function(e){c.$emit("$translateLoadingError",{language:e}),n.reject(e),c.$emit("$translateLoadingEnd",{language:e})}),n.promise};if(r&&($=t.get(r),!$.get||!$.put))throw new Error("Couldn't use storage '"+r+"', missing get() or put() method!");angular.isFunction(_.useSanitizeValueStrategy)&&_.useSanitizeValueStrategy(C),b.length&&angular.forEach(b,function(e){var o=t.get(e);o.setLocale(n||s),angular.isFunction(o.useSanitizeValueStrategy)&&o.useSanitizeValueStrategy(C),O[o.getInterpolationIdentifier()]=o});var q=function(e){var n=v.defer();return Object.prototype.hasOwnProperty.call(h,e)?n.resolve(h[e]):F[e]?F[e].then(function(e){E(e.key,e.table),n.resolve(e.table)},n.reject):n.reject(),n.promise},B=function(e,n,t,o){var a=v.defer();return q(e).then(function(i){Object.prototype.hasOwnProperty.call(i,n)?(o.setLocale(e),a.resolve(o.interpolate(i[n],t)),o.setLocale(s)):a.reject()},a.reject),a.promise},H=function(e,n,t,o){var a,i=h[e];return i&&Object.prototype.hasOwnProperty.call(i,n)&&(o.setLocale(e),a=o.interpolate(i[n],t),o.setLocale(s)),a},z=function(e){if(l){var n=t.get(l)(e,s);return void 0!==n?n:e}return e},K=function(e,n,t,a){var s=v.defer();if(e<o.length){var i=o[e];B(i,n,t,a).then(s.resolve,function(){K(e+1,n,t,a).then(s.resolve)})}else s.resolve(z(n));return s.promise},W=function(e,n,t,a){var s;if(e<o.length){var i=o[e];s=H(i,n,t,a),s||(s=W(e+1,n,t,a))}return s},Y=function(e,n,t){return K(I>0?I:A,e,n,t)},J=function(e,n,t){return W(I>0?I:A,e,n,t)},Z=function(e,n,t){var a=v.defer(),i=s?h[s]:h,r=t?O[t]:_;if(i&&Object.prototype.hasOwnProperty.call(i,e)){var c=i[e];"@:"===c.substr(0,2)?D(c.substr(2),n,t).then(a.resolve,a.reject):a.resolve(r.interpolate(c,n))}else{var u;l&&!P&&(u=z(e)),s&&o&&o.length?Y(e,n,r).then(function(e){a.resolve(e)},function(e){a.reject(j(e))}):l&&!P&&u?a.resolve(u):a.reject(j(e))}return a.promise},X=function(e,n,t){var a,i=s?h[s]:h,r=t?O[t]:_;if(i&&Object.prototype.hasOwnProperty.call(i,e)){var c=i[e];a="@:"===c.substr(0,2)?X(c.substr(2),n,t):r.interpolate(c,n)}else{var u;l&&!P&&(u=z(e)),s&&o&&o.length?(A=0,a=J(e,n,r)):a=l&&!P&&u?u:j(e)}return a};if(D.preferredLanguage=function(e){return e&&N(e),n},D.cloakClassName=function(){return S},D.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(x(e),d&&o&&o.length)for(var n=0,t=o.length;t>n;n++)F[o[n]]||(F[o[n]]=G(o[n]));D.use(D.use());
}return a?o[0]:o},D.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var n=U(o,e);n>-1&&(I=n)}else I=0},D.proposedLanguage=function(){return i},D.storage=function(){return $},D.use=function(e){if(!e)return s;var n=v.defer();c.$emit("$translateChangeStart",{language:e});var t=T(e);return t&&(e=t),h[e]||!d||F[e]?(n.resolve(e),V(e)):(i=e,F[e]=G(e).then(function(t){return E(t.key,t.table),n.resolve(t.key),V(t.key),i===e&&(i=void 0),t},function(e){i===e&&(i=void 0),c.$emit("$translateChangeError",{language:e}),n.reject(e),c.$emit("$translateChangeEnd",{language:e})})),n.promise},D.storageKey=function(){return M()},D.isPostCompilingEnabled=function(){return w},D.refresh=function(e){function n(){a.resolve(),c.$emit("$translateRefreshEnd",{language:e})}function t(){a.reject(),c.$emit("$translateRefreshEnd",{language:e})}if(!d)throw new Error("Couldn't refresh translation table, no loader registered!");var a=v.defer();if(c.$emit("$translateRefreshStart",{language:e}),e)h[e]?G(e).then(function(t){E(t.key,t.table),e===s&&V(s),n()},t):t();else{var i=[],r={};if(o&&o.length)for(var l=0,u=o.length;u>l;l++)i.push(G(o[l])),r[o[l]]=!0;s&&!r[s]&&i.push(G(s)),v.all(i).then(function(e){angular.forEach(e,function(e){h[e.key]&&delete h[e.key],E(e.key,e.table)}),s&&V(s),n()})}return a.promise},D.instant=function(e,t,a){if(null===e||angular.isUndefined(e))return e;if(angular.isArray(e)){for(var i={},r=0,c=e.length;c>r;r++)i[e[r]]=D.instant(e[r],t,a);return i}if(angular.isString(e)&&e.length<1)return e;e&&(e=R.apply(e));var u,d=[];n&&d.push(n),s&&d.push(s),o&&o.length&&(d=d.concat(o));for(var m=0,p=d.length;p>m;m++){var g=d[m];if(h[g]&&"undefined"!=typeof h[g][e]&&(u=X(e,t,a)),"undefined"!=typeof u)break}return u||""===u||(u=_.interpolate(e,t),l&&!P&&(u=z(e))),u},D.versionInfo=function(){return k},D.loaderCache=function(){return f},d&&(angular.equals(h,{})&&D.use(D.use()),o&&o.length))for(var Q=function(e){return E(e.key,e.table),c.$emit("$translateChangeEnd",{language:e.key}),e},ee=0,ne=o.length;ne>ee;ee++)F[o[ee]]=G(o[ee]).then(Q);return D}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(e){var n,t={},o="default",a=null,s={escaped:function(e){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=angular.element("<div></div>").text(e[t]).html());return n}},i=function(e){var n;return n=angular.isFunction(s[a])?s[a](e):e};return t.setLocale=function(e){n=e},t.getInterpolationIdentifier=function(){return o},t.useSanitizeValueStrategy=function(e){return a=e,this},t.interpolate=function(n,t){return a&&(t=i(t)),e(n)(t||{})},t}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(e,n,t,o,a,s){return{restrict:"AE",scope:!0,compile:function(n,i){var r=i.translateValues?i.translateValues:void 0,c=i.translateInterpolation?i.translateInterpolation:void 0,l=n[0].outerHTML.match(/translate-value-+/i),u="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",d="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(n,m,p){n.interpolateParams={},n.preText="",n.postText="";var g={},f=function(e){if(angular.equals(e,"")||!angular.isDefined(e)){var o=m.text().match(u);angular.isArray(o)?(n.preText=o[1],n.postText=o[3],g.translate=t(o[2])(n.$parent),watcherMatches=m.text().match(d),angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&n.$watch(watcherMatches[2],function(e){g.translate=e,C()})):g.translate=m.text().replace(/^\s+|\s+$/g,"")}else g.translate=e;C()},h=function(e){p.$observe(e,function(n){g[e]=n,C()})};p.$observe("translate",function(e){f(e)});for(var v in p)p.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&h(v);if(p.$observe("translateDefault",function(e){n.defaultText=e}),r&&p.$observe("translateValues",function(e){e&&n.$parent.$watch(function(){angular.extend(n.interpolateParams,a(e)(n.$parent))})}),l){var y=function(e){p.$observe(e,function(t){var o=angular.lowercase(e.substr(14,1))+e.substr(15);n.interpolateParams[o]=t})};for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&"translateValue"===b.substr(0,14)&&"translateValues"!==b&&y(b)}var C=function(){for(var e in g)g.hasOwnProperty(e)&&g[e]&&S(e,g[e],n,n.interpolateParams)},S=function(n,t,o,a){e(t,a,c).then(function(e){w(e,o,!0,n)},function(e){w(e,o,!1,n)})},w=function(n,t,a,s){if("translate"===s){a||"undefined"==typeof t.defaultText||(n=t.defaultText),m.html(t.preText+n+t.postText);var r=e.isPostCompilingEnabled(),c="undefined"!=typeof i.translateCompile,l=c&&"false"!==i.translateCompile;(r&&!c||l)&&o(m.contents())(t)}else{a||"undefined"==typeof t.defaultText||(n=t.defaultText);var u=p.$attr[s].substr(15);m.attr(u,n)}};n.$watch("interpolateParams",C,!0);var $=s.$on("$translateChangeSuccess",C);m.text().length&&f(""),C(),n.$on("$destroy",$)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(e,n){return{compile:function(t){var o=function(){t.addClass(n.cloakClassName())},a=function(){t.removeClass(n.cloakClassName())},s=e.$on("$translateChangeEnd",function(){a(),s(),s=null});return o(),function(e,t,s){s.translateCloak&&s.translateCloak.length&&s.$observe("translateCloak",function(e){n(e).then(a,o)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(e,n){var t=function(t,o,a){return angular.isObject(o)||(o=e(o)(this)),n.instant(t,o,a)};return t.$stateful=!0,t}]),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,n){return function(t){if(!t||!angular.isString(t.prefix)||!angular.isString(t.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var o=e.defer();return n(angular.extend({url:[t.prefix,t.key,t.suffix].join(""),method:"GET",params:""},t.$http)).success(function(e){o.resolve(e)}).error(function(e){o.reject(t.key)}),o.promise}}]),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,n){function t(e,o){n(angular.extend({url:[e.prefix,e.key.toLowerCase(),e.suffix].join(""),method:"GET",params:""},e.$http)).success(function(e){o.resolve(e)}).error(function(){if(e.key.indexOf("_")>=0){var n=e.key.substr(0,e.key.lastIndexOf("_")),a=angular.extend({},e,{key:n});t(a,o)}else o.resolve("{}")})}return function(n){if(!n||!angular.isString(n.prefix)||!angular.isString(n.suffix))throw new Error('Couldn"t load static files, no prefix or suffix specified!');var o=e.defer();return t(n,o),o.promise}}]),angular.module("risevision.common.i18n",["pascalprecht.translate","risevision.common.i18n.config"]).config(["$translateProvider","LOCALES_PREFIX","LOCALES_SUFIX",function(e,n,t){e.useStaticFilesLoader({prefix:n,suffix:t}),e.determinePreferredLanguage().fallbackLanguage("en")}]);